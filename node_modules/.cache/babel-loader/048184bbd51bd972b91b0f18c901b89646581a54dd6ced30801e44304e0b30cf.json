{"ast":null,"code":"/**\n * E2E Encryption для AIST Messenger\n * - Сообщения шифруются локально перед отправкой\n * - Сервер только ретранслирует зашифрованные данные\n * - Ключи хранятся только на устройствах пользователей\n */const KEY_STORAGE_PREFIX='aist_e2e_';// Генерация ключевой пары (RSA-OAEP)\nexport async function generateKeyPair(){const keyPair=await window.crypto.subtle.generateKey({name:'RSA-OAEP',modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:'SHA-256'},true,['encrypt','decrypt']);return keyPair;}// Экспорт публичного ключа в формате для отправки\nexport async function exportPublicKey(key){const exported=await window.crypto.subtle.exportKey('spki',key);return btoa(String.fromCharCode(...new Uint8Array(exported)));}// Импорт публичного ключа другого пользователя\nexport async function importPublicKey(pem){const binaryDerString=atob(pem);const binaryDer=new Uint8Array(binaryDerString.length);for(let i=0;i<binaryDerString.length;i++){binaryDer[i]=binaryDerString.charCodeAt(i);}return window.crypto.subtle.importKey('spki',binaryDer.buffer,{name:'RSA-OAEP',hash:'SHA-256'},true,['encrypt']);}// Экспорт приватного ключа для хранения (зашифрованный паролем)\nexport async function exportPrivateKey(key,password){const exported=await window.crypto.subtle.exportKey('pkcs8',key);const encoder=new TextEncoder();const keyMaterial=await window.crypto.subtle.importKey('raw',encoder.encode(password),'PBKDF2',false,['deriveKey']);const salt=window.crypto.getRandomValues(new Uint8Array(16));const aesKey=await window.crypto.subtle.deriveKey({name:'PBKDF2',salt:salt,iterations:100000,hash:'SHA-256'},keyMaterial,{name:'AES-GCM',length:256},true,['encrypt','decrypt']);const iv=window.crypto.getRandomValues(new Uint8Array(12));const encrypted=await window.crypto.subtle.encrypt({name:'AES-GCM',iv:iv},aesKey,exported);const combined=new Uint8Array(salt.length+iv.length+encrypted.length);combined.set(salt,0);combined.set(iv,salt.length);combined.set(encrypted,salt.length+iv.length);return btoa(String.fromCharCode(...combined));}// Импорт приватного ключа из хранилища\nexport async function importPrivateKey(encryptedPem,password){const combined=new Uint8Array(atob(encryptedPem).split('').map(c=>c.charCodeAt(0)));const salt=combined.slice(0,16);const iv=combined.slice(16,28);const encrypted=combined.slice(28);const encoder=new TextEncoder();const keyMaterial=await window.crypto.subtle.importKey('raw',encoder.encode(password),'PBKDF2',false,['deriveKey']);const aesKey=await window.crypto.subtle.deriveKey({name:'PBKDF2',salt:salt,iterations:100000,hash:'SHA-256'},keyMaterial,{name:'AES-GCM',length:256},true,['encrypt','decrypt']);const decrypted=await window.crypto.subtle.decrypt({name:'AES-GCM',iv:iv},aesKey,encrypted);return window.crypto.subtle.importKey('pkcs8',decrypted,{name:'RSA-OAEP',hash:'SHA-256'},true,['decrypt']);}// Шифрование сообщения для получателя\nexport async function encryptMessage(message,publicKey){const encoder=new TextEncoder();const data=encoder.encode(message);const encrypted=await window.crypto.subtle.encrypt({name:'RSA-OAEP'},publicKey,data);return btoa(String.fromCharCode(...new Uint8Array(encrypted)));}// Расшифрование сообщения от отправителя\nexport async function decryptMessage(encryptedBase64,privateKey){try{const encrypted=new Uint8Array(atob(encryptedBase64).split('').map(c=>c.charCodeAt(0)));const decrypted=await window.crypto.subtle.decrypt({name:'RSA-OAEP'},privateKey,encrypted);const decoder=new TextDecoder();return decoder.decode(decrypted);}catch(e){console.error('Decryption failed:',e);return'[Зашифрованное сообщение]';}}// Сохранение ключевой пары в IndexedDB\nexport async function storeKeyPair(keyPair,password){const publicKeyPem=await exportPublicKey(keyPair.publicKey);const privateKeyPem=await exportPrivateKey(keyPair.privateKey,password);localStorage.setItem(\"\".concat(KEY_STORAGE_PREFIX,\"public\"),publicKeyPem);localStorage.setItem(\"\".concat(KEY_STORAGE_PREFIX,\"private\"),privateKeyPem);return publicKeyPem;}// Загрузка ключевой пары из IndexedDB\nexport async function loadKeyPair(password){const publicKeyPem=localStorage.getItem(\"\".concat(KEY_STORAGE_PREFIX,\"public\"));const privateKeyPem=localStorage.getItem(\"\".concat(KEY_STORAGE_PREFIX,\"private\"));if(!publicKeyPem||!privateKeyPem)return null;try{const privateKey=await importPrivateKey(privateKeyPem,password);const publicKey=await importPublicKey(publicKeyPem);return{publicKey,privateKey};}catch(e){console.error('Failed to load key pair:',e);return null;}}// Проверка наличия ключей\nexport function hasKeys(){return!!localStorage.getItem(\"\".concat(KEY_STORAGE_PREFIX,\"public\"));}// Удаление ключей\nexport function clearKeys(){localStorage.removeItem(\"\".concat(KEY_STORAGE_PREFIX,\"public\"));localStorage.removeItem(\"\".concat(KEY_STORAGE_PREFIX,\"private\"));}// Генерация общего ключа для чата (опционально для групповых чатов)\nexport async function generateSharedKey(){const key=await window.crypto.subtle.generateKey({name:'AES-GCM',length:256},true,['encrypt','decrypt']);return key;}// Шифрование через AES-GCM (для групповых чатов)\nexport async function encryptAES(message,key){const encoder=new TextEncoder();const data=encoder.encode(message);const iv=window.crypto.subtle.getRandomValues(new Uint8Array(12));const encrypted=await window.crypto.subtle.encrypt({name:'AES-GCM',iv:iv},key,data);const combined=new Uint8Array(iv.length+encrypted.length);combined.set(iv,0);combined.set(encrypted,iv.length);return btoa(String.fromCharCode(...combined));}// Расшифрование через AES-GCM\nexport async function decryptAES(encryptedBase64,key){try{const combined=new Uint8Array(atob(encryptedBase64).split('').map(c=>c.charCodeAt(0)));const iv=combined.slice(0,12);const encrypted=combined.slice(12);const decrypted=await window.crypto.subtle.decrypt({name:'AES-GCM',iv:iv},key,encrypted);const decoder=new TextDecoder();return decoder.decode(decrypted);}catch(e){console.error('AES decryption failed:',e);return'[Зашифрованное сообщение]';}}","map":{"version":3,"names":["KEY_STORAGE_PREFIX","generateKeyPair","keyPair","window","crypto","subtle","generateKey","name","modulusLength","publicExponent","Uint8Array","hash","exportPublicKey","key","exported","exportKey","btoa","String","fromCharCode","importPublicKey","pem","binaryDerString","atob","binaryDer","length","i","charCodeAt","importKey","buffer","exportPrivateKey","password","encoder","TextEncoder","keyMaterial","encode","salt","getRandomValues","aesKey","deriveKey","iterations","iv","encrypted","encrypt","combined","set","importPrivateKey","encryptedPem","split","map","c","slice","decrypted","decrypt","encryptMessage","message","publicKey","data","decryptMessage","encryptedBase64","privateKey","decoder","TextDecoder","decode","e","console","error","storeKeyPair","publicKeyPem","privateKeyPem","localStorage","setItem","concat","loadKeyPair","getItem","hasKeys","clearKeys","removeItem","generateSharedKey","encryptAES","decryptAES"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/lib/e2eCrypto.js"],"sourcesContent":["/**\n * E2E Encryption для AIST Messenger\n * - Сообщения шифруются локально перед отправкой\n * - Сервер только ретранслирует зашифрованные данные\n * - Ключи хранятся только на устройствах пользователей\n */\n\nconst KEY_STORAGE_PREFIX = 'aist_e2e_';\n\n// Генерация ключевой пары (RSA-OAEP)\nexport async function generateKeyPair() {\n  const keyPair = await window.crypto.subtle.generateKey(\n    {\n      name: 'RSA-OAEP',\n      modulusLength: 2048,\n      publicExponent: new Uint8Array([1, 0, 1]),\n      hash: 'SHA-256',\n    },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  return keyPair;\n}\n\n// Экспорт публичного ключа в формате для отправки\nexport async function exportPublicKey(key) {\n  const exported = await window.crypto.subtle.exportKey('spki', key);\n  return btoa(String.fromCharCode(...new Uint8Array(exported)));\n}\n\n// Импорт публичного ключа другого пользователя\nexport async function importPublicKey(pem) {\n  const binaryDerString = atob(pem);\n  const binaryDer = new Uint8Array(binaryDerString.length);\n  for (let i = 0; i < binaryDerString.length; i++) {\n    binaryDer[i] = binaryDerString.charCodeAt(i);\n  }\n  return window.crypto.subtle.importKey(\n    'spki',\n    binaryDer.buffer,\n    { name: 'RSA-OAEP', hash: 'SHA-256' },\n    true,\n    ['encrypt']\n  );\n}\n\n// Экспорт приватного ключа для хранения (зашифрованный паролем)\nexport async function exportPrivateKey(key, password) {\n  const exported = await window.crypto.subtle.exportKey('pkcs8', key);\n  const encoder = new TextEncoder();\n  const keyMaterial = await window.crypto.subtle.importKey(\n    'raw',\n    encoder.encode(password),\n    'PBKDF2',\n    false,\n    ['deriveKey']\n  );\n  const salt = window.crypto.getRandomValues(new Uint8Array(16));\n  const aesKey = await window.crypto.subtle.deriveKey(\n    {\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: 100000,\n      hash: 'SHA-256',\n    },\n    keyMaterial,\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n  const encrypted = await window.crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv: iv },\n    aesKey,\n    exported\n  );\n  const combined = new Uint8Array(salt.length + iv.length + encrypted.length);\n  combined.set(salt, 0);\n  combined.set(iv, salt.length);\n  combined.set(encrypted, salt.length + iv.length);\n  return btoa(String.fromCharCode(...combined));\n}\n\n// Импорт приватного ключа из хранилища\nexport async function importPrivateKey(encryptedPem, password) {\n  const combined = new Uint8Array(\n    atob(encryptedPem).split('').map(c => c.charCodeAt(0))\n  );\n  const salt = combined.slice(0, 16);\n  const iv = combined.slice(16, 28);\n  const encrypted = combined.slice(28);\n  const encoder = new TextEncoder();\n  const keyMaterial = await window.crypto.subtle.importKey(\n    'raw',\n    encoder.encode(password),\n    'PBKDF2',\n    false,\n    ['deriveKey']\n  );\n  const aesKey = await window.crypto.subtle.deriveKey(\n    {\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: 100000,\n      hash: 'SHA-256',\n    },\n    keyMaterial,\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  const decrypted = await window.crypto.subtle.decrypt(\n    { name: 'AES-GCM', iv: iv },\n    aesKey,\n    encrypted\n  );\n  return window.crypto.subtle.importKey(\n    'pkcs8',\n    decrypted,\n    { name: 'RSA-OAEP', hash: 'SHA-256' },\n    true,\n    ['decrypt']\n  );\n}\n\n// Шифрование сообщения для получателя\nexport async function encryptMessage(message, publicKey) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(message);\n  const encrypted = await window.crypto.subtle.encrypt(\n    { name: 'RSA-OAEP' },\n    publicKey,\n    data\n  );\n  return btoa(String.fromCharCode(...new Uint8Array(encrypted)));\n}\n\n// Расшифрование сообщения от отправителя\nexport async function decryptMessage(encryptedBase64, privateKey) {\n  try {\n    const encrypted = new Uint8Array(\n      atob(encryptedBase64).split('').map(c => c.charCodeAt(0))\n    );\n    const decrypted = await window.crypto.subtle.decrypt(\n      { name: 'RSA-OAEP' },\n      privateKey,\n      encrypted\n    );\n    const decoder = new TextDecoder();\n    return decoder.decode(decrypted);\n  } catch (e) {\n    console.error('Decryption failed:', e);\n    return '[Зашифрованное сообщение]';\n  }\n}\n\n// Сохранение ключевой пары в IndexedDB\nexport async function storeKeyPair(keyPair, password) {\n  const publicKeyPem = await exportPublicKey(keyPair.publicKey);\n  const privateKeyPem = await exportPrivateKey(keyPair.privateKey, password);\n  \n  localStorage.setItem(`${KEY_STORAGE_PREFIX}public`, publicKeyPem);\n  localStorage.setItem(`${KEY_STORAGE_PREFIX}private`, privateKeyPem);\n  \n  return publicKeyPem;\n}\n\n// Загрузка ключевой пары из IndexedDB\nexport async function loadKeyPair(password) {\n  const publicKeyPem = localStorage.getItem(`${KEY_STORAGE_PREFIX}public`);\n  const privateKeyPem = localStorage.getItem(`${KEY_STORAGE_PREFIX}private`);\n  \n  if (!publicKeyPem || !privateKeyPem) return null;\n  \n  try {\n    const privateKey = await importPrivateKey(privateKeyPem, password);\n    const publicKey = await importPublicKey(publicKeyPem);\n    return { publicKey, privateKey };\n  } catch (e) {\n    console.error('Failed to load key pair:', e);\n    return null;\n  }\n}\n\n// Проверка наличия ключей\nexport function hasKeys() {\n  return !!localStorage.getItem(`${KEY_STORAGE_PREFIX}public`);\n}\n\n// Удаление ключей\nexport function clearKeys() {\n  localStorage.removeItem(`${KEY_STORAGE_PREFIX}public`);\n  localStorage.removeItem(`${KEY_STORAGE_PREFIX}private`);\n}\n\n// Генерация общего ключа для чата (опционально для групповых чатов)\nexport async function generateSharedKey() {\n  const key = await window.crypto.subtle.generateKey(\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  return key;\n}\n\n// Шифрование через AES-GCM (для групповых чатов)\nexport async function encryptAES(message, key) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(message);\n  const iv = window.crypto.subtle.getRandomValues(new Uint8Array(12));\n  const encrypted = await window.crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv: iv },\n    key,\n    data\n  );\n  const combined = new Uint8Array(iv.length + encrypted.length);\n  combined.set(iv, 0);\n  combined.set(encrypted, iv.length);\n  return btoa(String.fromCharCode(...combined));\n}\n\n// Расшифрование через AES-GCM\nexport async function decryptAES(encryptedBase64, key) {\n  try {\n    const combined = new Uint8Array(\n      atob(encryptedBase64).split('').map(c => c.charCodeAt(0))\n    );\n    const iv = combined.slice(0, 12);\n    const encrypted = combined.slice(12);\n    const decrypted = await window.crypto.subtle.decrypt(\n      { name: 'AES-GCM', iv: iv },\n      key,\n      encrypted\n    );\n    const decoder = new TextDecoder();\n    return decoder.decode(decrypted);\n  } catch (e) {\n    console.error('AES decryption failed:', e);\n    return '[Зашифрованное сообщение]';\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}