{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vladislav\\\\Documents\\\\GitHub\\\\aist-messenger\\\\src\\\\components\\\\Chats.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useTheme } from '../context/ThemeContext';\nimport { useUser } from '../context/UserContext';\nimport { IconBack, IconSearch, IconPen, IconChannel, IconChevronRight, IconPhone, IconVideo, IconAttach, IconSend, IconSmile, IconMore, IconStories, IconGallery, IconContacts, IconCheck, IconCheckDouble, IconCopy, IconDelete, IconReply, IconForward, IconPin, IconMute } from './Icons';\nimport CallScreen from './CallScreen';\nimport { getChatList, saveChatList, getMessages, appendMessage, saveMessages, addOrUpdateChat, createChat, getChannelMeta, saveChannelMeta } from '../lib/chatStorage';\nimport { apiGetChats, apiGetMessages, apiSendMessage, apiCreateChat } from '../lib/api';\nimport { getFolders, addChatToFolder, removeChatFromFolder, getChatFolderIds } from '../lib/folderStorage';\nimport { connectChatWebSocket, disconnect, addListener, removeListener, isWebSocketConnected } from '../lib/chatWebSocket';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst APP_DOMAIN = 'https://aist-messenger.vercel.app';\nconst FOLDER_ALL = 'all';\nfunction ChatView({\n  chat,\n  onBack\n}) {\n  _s();\n  const {\n    theme,\n    chatBg,\n    isDark\n  } = useTheme();\n  const {\n    displayName\n  } = useUser();\n  const accent = typeof theme.accent === 'string' ? theme.accent : '#0a84ff';\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [attachPreview, setAttachPreview] = useState(null);\n  const [callMode, setCallMode] = useState(null);\n  const [showChannelInfo, setShowChannelInfo] = useState(false);\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\n  const messagesAreaBg = chatBg || (isDark ? '#0d1218' : '#e8eef5');\n  const channelMeta = chat.type === 'channel' ? getChannelMeta(chat.id) : null;\n  const channelLink = (channelMeta === null || channelMeta === void 0 ? void 0 : channelMeta.shareLink) || `${APP_DOMAIN}/c/${chat.id}`;\n\n  // Локальное хранение: сначала показываем с устройства, затем синхронизируем с сервером при открытии\n  useEffect(() => {\n    setMessages(getMessages(chat.id));\n    let cancelled = false;\n    (async () => {\n      const fromApi = await apiGetMessages(chat.id);\n      if (cancelled) return;\n      if (Array.isArray(fromApi)) {\n        const merged = saveMessages(chat.id, fromApi);\n        setMessages(merged);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [chat.id]);\n\n  // WebSocket для получения сообщений в реальном времени\n  useEffect(() => {\n    const handleMessage = data => {\n      if (data.type === 'new_message' && data.chatId === chat.id) {\n        const newMsg = data.message;\n        if (newMsg) {\n          setMessages(prev => {\n            const exists = prev.some(m => m.id === newMsg.id);\n            if (exists) return prev;\n            const updated = [...prev, newMsg];\n            saveMessages(chat.id, updated);\n            return updated;\n          });\n        }\n      }\n    };\n    addListener(handleMessage);\n    return () => removeListener(handleMessage);\n  }, [chat.id]);\n  const sendMessage = useCallback(async textOrAttachment => {\n    const isAttach = typeof textOrAttachment === 'object';\n    const text = isAttach ? textOrAttachment.caption || '' : (textOrAttachment || '').trim();\n    const attachment = isAttach ? textOrAttachment : null;\n    if (!text && !attachment) return;\n    const localId = `m_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;\n    const localMsg = {\n      id: localId,\n      fromMe: true,\n      text: text || (attachment ? attachment.type === 'image' ? 'Фото' : 'Видео' : ''),\n      time: new Date().toISOString(),\n      senderName: displayName || 'Вы',\n      attachment: attachment ? {\n        type: attachment.type,\n        url: attachment.url\n      } : undefined\n    };\n    // Сначала сохраняем на устройстве и сразу показываем\n    const next = appendMessage(chat.id, localMsg);\n    setMessages(next);\n    setInputValue('');\n    setAttachPreview(null);\n    addOrUpdateChat({\n      ...chat,\n      lastMessage: text || 'Медиа',\n      lastTime: Date.now()\n    });\n    // Затем отправляем на сервер для синхронизации с другими устройствами\n    const fromApi = await apiSendMessage(chat.id, {\n      text: localMsg.text,\n      attachment: attachment ? {\n        type: attachment.type,\n        url: attachment.url\n      } : null\n    });\n    if (fromApi && fromApi.id !== localId) {\n      const list = getMessages(chat.id);\n      const idx = list.findIndex(m => m.id === localId);\n      if (idx >= 0) {\n        const updated = [...list];\n        updated[idx] = {\n          ...list[idx],\n          id: fromApi.id,\n          time: fromApi.time || list[idx].time\n        };\n        saveMessages(chat.id, updated);\n        setMessages(updated);\n      }\n    }\n  }, [chat, displayName]);\n  const MAX_FILE_MB = 16;\n  const ALLOWED_IMAGE = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n  const ALLOWED_VIDEO = ['video/mp4', 'video/webm'];\n  const onAttach = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    const sizeMB = f.size / (1024 * 1024);\n    if (sizeMB > MAX_FILE_MB) return;\n    if (ALLOWED_IMAGE.includes(f.type)) {\n      const r = new FileReader();\n      r.onload = () => setAttachPreview({\n        type: 'image',\n        url: r.result\n      });\n      r.readAsDataURL(f);\n    } else if (ALLOWED_VIDEO.includes(f.type)) {\n      const r = new FileReader();\n      r.onload = () => setAttachPreview({\n        type: 'video',\n        url: r.result\n      });\n      r.readAsDataURL(f);\n    }\n  };\n  const bubbleIn = theme.bubbleIn || (isDark ? 'rgba(32, 42, 58, .88)' : 'rgba(255,255,255,.92)');\n  const bubbleOut = theme.bubbleOut || accent;\n  const bubbleStyleIn = {\n    padding: '14px 18px 12px 18px',\n    borderRadius: '22px 22px 22px 8px',\n    background: bubbleIn,\n    color: theme.text,\n    fontSize: 15,\n    lineHeight: 1.5,\n    maxWidth: '100%',\n    boxShadow: isDark ? '0 4px 16px rgba(0,0,0,.3)' : '0 4px 16px rgba(0,0,0,.1)',\n    backdropFilter: 'blur(20px) saturate(160%)',\n    WebkitBackdropFilter: 'blur(20px) saturate(160%)',\n    border: `1px solid ${theme.cardBorder || 'transparent'}`\n  };\n  const bubbleStyleOut = {\n    ...bubbleStyleIn,\n    borderRadius: '22px 22px 8px 22px',\n    background: bubbleOut,\n    color: theme.accentText || '#fff',\n    boxShadow: `0 6px 20px ${theme.glow || 'rgba(10, 132, 255, .4)'}`,\n    border: 'none'\n  };\n  const formatDateKey = t => new Date(t).toDateString();\n  const messagesWithDates = useMemo(() => {\n    const out = [];\n    let lastDate = null;\n    messages.forEach(m => {\n      const d = formatDateKey(m.time);\n      if (d !== lastDate) {\n        lastDate = d;\n        out.push({\n          type: 'date',\n          key: `date-${d}`,\n          date: m.time\n        });\n      }\n      out.push(m);\n    });\n    return out;\n  }, [messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: {\n        height: 64,\n        padding: '0 8px 0 4px',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n        background: theme.headerBg,\n        backdropFilter: 'blur(24px) saturate(180%)',\n        WebkitBackdropFilter: 'blur(24px) saturate(180%)',\n        borderBottom: `1px solid ${theme.border}`,\n        boxShadow: isDark ? '0 4px 20px rgba(0,0,0,.15)' : '0 4px 20px rgba(0,0,0,.06)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        style: {\n          border: 'none',\n          background: 'transparent',\n          color: accent,\n          padding: 10,\n          cursor: 'pointer',\n          display: isMobile ? 'flex' : 'none',\n          alignItems: 'center',\n          justifyContent: 'center',\n          borderRadius: 12,\n          transition: 'all 0.2s'\n        },\n        onClick: onBack,\n        \"aria-label\": \"\\u041D\\u0430\\u0437\\u0430\\u0434\",\n        children: /*#__PURE__*/_jsxDEV(IconBack, {\n          width: 24,\n          height: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => chat.type === 'channel' && setShowChannelInfo(true),\n        style: {\n          flex: 1,\n          border: 'none',\n          background: 'transparent',\n          padding: '10px 12px',\n          cursor: chat.type === 'channel' ? 'pointer' : 'default',\n          textAlign: 'left',\n          minWidth: 0,\n          borderRadius: 12,\n          transition: 'background 0.2s'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 700,\n            fontSize: 18,\n            color: theme.text,\n            display: 'block',\n            letterSpacing: '-0.3px'\n          },\n          children: chat.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), chat.type !== 'channel' && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: 13,\n            color: theme.textMuted,\n            fontWeight: 500\n          },\n          children: \"\\u043E\\u043D\\u043B\\u0430\\u0439\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), chat.type !== 'channel' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            border: 'none',\n            background: 'transparent',\n            padding: 10,\n            color: theme.textMuted,\n            cursor: 'pointer',\n            borderRadius: 12,\n            transition: 'all 0.2s'\n          },\n          \"aria-label\": \"\\u0413\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u043E\\u0439 \\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\",\n          onClick: () => setCallMode('voice'),\n          children: /*#__PURE__*/_jsxDEV(IconPhone, {\n            width: 22,\n            height: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 254\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            border: 'none',\n            background: 'transparent',\n            padding: 10,\n            color: theme.textMuted,\n            cursor: 'pointer',\n            borderRadius: 12,\n            transition: 'all 0.2s'\n          },\n          \"aria-label\": \"\\u0412\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\",\n          onClick: () => setCallMode('video'),\n          children: /*#__PURE__*/_jsxDEV(IconVideo, {\n            width: 22,\n            height: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 249\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            border: 'none',\n            background: 'transparent',\n            padding: 10,\n            color: theme.textMuted,\n            cursor: 'pointer',\n            borderRadius: 12,\n            transition: 'all 0.2s'\n          },\n          \"aria-label\": \"\\u0415\\u0449\\u0451\",\n          children: /*#__PURE__*/_jsxDEV(IconMore, {\n            width: 22,\n            height: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 204\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), showChannelInfo && channelMeta && /*#__PURE__*/_jsxDEV(\"div\", {\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      \"aria-label\": \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u043A\\u0430\\u043D\\u0430\\u043B\\u0435\",\n      style: {\n        position: 'fixed',\n        inset: 0,\n        zIndex: 1000,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 16,\n        background: 'rgba(0,0,0,.6)',\n        backdropFilter: 'blur(8px)'\n      },\n      onClick: () => setShowChannelInfo(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: theme.cardBg,\n          borderRadius: 20,\n          padding: 24,\n          maxWidth: 380,\n          width: '100%',\n          border: `1px solid ${theme.cardBorder}`,\n          boxShadow: '0 16px 48px rgba(0,0,0,.3)',\n          backdropFilter: 'blur(20px) saturate(140%)',\n          WebkitBackdropFilter: 'blur(20px) saturate(140%)'\n        },\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 700,\n            marginBottom: 14,\n            color: theme.text\n          },\n          children: chat.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this), channelMeta.description ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: 15,\n            color: theme.textMuted,\n            marginBottom: 16,\n            whiteSpace: 'pre-wrap',\n            lineHeight: 1.5\n          },\n          children: channelMeta.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 40\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 14,\n            color: theme.textMuted,\n            marginBottom: 10\n          },\n          children: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u043D\\u0430\\u043B:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 10,\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            readOnly: true,\n            value: channelLink,\n            style: {\n              flex: 1,\n              padding: '10px 14px',\n              borderRadius: 12,\n              border: `1px solid ${theme.border}`,\n              background: theme.inputBg,\n              color: theme.text,\n              fontSize: 14\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              var _navigator$clipboard;\n              (_navigator$clipboard = navigator.clipboard) === null || _navigator$clipboard === void 0 ? void 0 : _navigator$clipboard.writeText(channelLink);\n            },\n            style: {\n              padding: '10px 18px',\n              borderRadius: 12,\n              border: 'none',\n              background: accent,\n              color: theme.accentText || '#fff',\n              cursor: 'pointer',\n              fontSize: 14,\n              fontWeight: 600,\n              boxShadow: '0 4px 12px rgba(10, 132, 255, .3)'\n            },\n            children: \"\\u041A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setShowChannelInfo(false),\n          style: {\n            marginTop: 20,\n            width: '100%',\n            padding: 12,\n            borderRadius: 12,\n            border: 'none',\n            background: theme.sidebarBg,\n            color: theme.text,\n            cursor: 'pointer',\n            fontSize: 15,\n            fontWeight: 600\n          },\n          children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }, this), callMode && /*#__PURE__*/_jsxDEV(CallScreen, {\n      peerName: chat.name,\n      isVideo: callMode === 'video',\n      onEnd: () => setCallMode(null),\n      peerUserId: chat.peerUserId || chat.otherUserId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: '14px 20px 20px',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 8,\n        background: messagesAreaBg\n      },\n      children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: theme.textMuted,\n          fontSize: 15,\n          textAlign: 'center',\n          padding: '60px 20px'\n        },\n        children: \"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this), messagesWithDates.map(item => {\n        var _m$attachment;\n        if (item.type === 'date') {\n          const label = new Date(item.date).toLocaleDateString('ru-RU', {\n            day: 'numeric',\n            month: 'long',\n            year: 'numeric'\n          });\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              alignSelf: 'center',\n              margin: '16px 0 8px',\n              padding: '6px 16px',\n              borderRadius: 12,\n              background: isDark ? 'rgba(255,255,255,.08)' : 'rgba(0,0,0,.06)',\n              fontSize: 13,\n              color: theme.textMuted,\n              fontWeight: 600,\n              backdropFilter: 'blur(10px)'\n            },\n            children: label\n          }, item.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this);\n        }\n        const m = item;\n        const timeStr = new Date(m.time).toLocaleTimeString('ru-RU', {\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            alignSelf: m.fromMe ? 'flex-end' : 'flex-start',\n            maxWidth: '82%',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: m.fromMe ? 'flex-end' : 'flex-start'\n          },\n          children: [!m.fromMe && chat.type === 'group' && m.senderName && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: 12,\n              color: theme.textMuted,\n              marginBottom: 2,\n              marginLeft: 4\n            },\n            children: m.senderName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 17\n          }, this), ((_m$attachment = m.attachment) === null || _m$attachment === void 0 ? void 0 : _m$attachment.url) && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 2,\n              borderRadius: 12,\n              overflow: 'hidden',\n              boxShadow: '0 1px 3px rgba(0,0,0,.2)'\n            },\n            children: m.attachment.type === 'image' ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: m.attachment.url,\n              alt: \"\",\n              style: {\n                maxWidth: 260,\n                maxHeight: 260,\n                display: 'block'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n              src: m.attachment.url,\n              controls: true,\n              style: {\n                maxWidth: 260,\n                maxHeight: 180\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: m.fromMe ? bubbleStyleOut : bubbleStyleIn,\n            children: [m.text ? /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                display: 'block',\n                marginBottom: 2\n              },\n              children: m.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 27\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 11,\n                opacity: 0.8\n              },\n              children: timeStr\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this)]\n        }, m.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), attachPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 12,\n        borderTop: `1px solid ${theme.border}`,\n        background: theme.headerBg,\n        backdropFilter: 'blur(20px)'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          display: 'inline-block'\n        },\n        children: [attachPreview.type === 'image' ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: attachPreview.url,\n          alt: \"\",\n          style: {\n            maxHeight: 140,\n            borderRadius: 12,\n            boxShadow: '0 4px 12px rgba(0,0,0,.15)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 47\n        }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n          src: attachPreview.url,\n          style: {\n            maxHeight: 140,\n            borderRadius: 12,\n            boxShadow: '0 4px 12px rgba(0,0,0,.15)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 174\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setAttachPreview(null),\n          style: {\n            position: 'absolute',\n            top: 8,\n            right: 8,\n            border: 'none',\n            background: 'rgba(0,0,0,.6)',\n            color: '#fff',\n            borderRadius: 50,\n            width: 28,\n            height: 28,\n            cursor: 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: 16\n          },\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '12px 16px 14px',\n        borderTop: `1px solid ${theme.border}`,\n        background: theme.headerBg,\n        backdropFilter: 'blur(24px) saturate(180%)',\n        WebkitBackdropFilter: 'blur(24px) saturate(180%)',\n        display: 'flex',\n        gap: 10,\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          cursor: 'pointer',\n          color: theme.textMuted,\n          padding: 8,\n          flexShrink: 0,\n          borderRadius: 14,\n          transition: 'all 0.2s'\n        },\n        \"aria-label\": \"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",\n        onMouseEnter: e => e.currentTarget.style.background = isDark ? 'rgba(255,255,255,.06)' : 'rgba(0,0,0,.04)',\n        onMouseLeave: e => e.currentTarget.style.background = 'transparent',\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*,video/*,.pdf,.doc,.docx\",\n          style: {\n            display: 'none'\n          },\n          onChange: onAttach\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconAttach, {\n          width: 24,\n          height: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          flex: 1,\n          minWidth: 0,\n          padding: '14px 20px',\n          borderRadius: 26,\n          border: 'none',\n          background: theme.messageInputBg || theme.inputBg,\n          color: theme.text,\n          fontSize: 15,\n          outline: 'none',\n          transition: 'all 0.2s',\n          boxShadow: isDark ? '0 2px 8px rgba(0,0,0,.15)' : '0 2px 8px rgba(0,0,0,.05)'\n        },\n        placeholder: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n        value: inputValue,\n        onChange: e => setInputValue(e.target.value),\n        onKeyDown: e => {\n          if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            if (attachPreview) sendMessage({\n              ...attachPreview,\n              caption: inputValue\n            });else sendMessage(inputValue);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => attachPreview ? sendMessage({\n          ...attachPreview,\n          caption: inputValue\n        }) : sendMessage(inputValue),\n        style: {\n          width: 48,\n          height: 48,\n          minWidth: 48,\n          minHeight: 48,\n          flexShrink: 0,\n          padding: 0,\n          borderRadius: '50%',\n          border: 'none',\n          background: accent,\n          color: theme.accentText || '#fff',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: 18,\n          boxShadow: `0 6px 20px ${theme.glow || 'rgba(10, 132, 255, .4)'}`,\n          transition: 'all 0.2s'\n        },\n        \"aria-label\": \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",\n        children: /*#__PURE__*/_jsxDEV(IconSend, {\n          width: 22,\n          height: 22\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatView, \"ZvORugiCAk3yyEddtSsVqWH8P+0=\", false, function () {\n  return [useTheme, useUser];\n});\n_c = ChatView;\nexport default function Chats() {\n  _s2();\n  var _location$state2;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    theme\n  } = useTheme();\n  const {\n    token\n  } = useUser();\n  const [chatList, setChatList] = useState(getChatList);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [newChatOpen, setNewChatOpen] = useState(false);\n  const [activeFolderId, setActiveFolderId] = useState(FOLDER_ALL);\n  const [foldersRefresh, setFoldersRefresh] = useState(0);\n  const [folderMenuChatId, setFolderMenuChatId] = useState(null);\n  const folderMenuRef = useRef(null);\n  const folders = useMemo(() => getFolders(), [foldersRefresh]);\n  useEffect(() => {\n    if (!folderMenuChatId) return;\n    const onDocClick = e => {\n      var _folderMenuRef$curren;\n      if ((_folderMenuRef$curren = folderMenuRef.current) !== null && _folderMenuRef$curren !== void 0 && _folderMenuRef$curren.contains(e.target) || e.target.closest('[data-folder-trigger]')) return;\n      setFolderMenuChatId(null);\n    };\n    document.addEventListener('click', onDocClick);\n    return () => document.removeEventListener('click', onDocClick);\n  }, [folderMenuChatId]);\n  useEffect(() => {\n    var _location$state;\n    const id = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.openChatId;\n    if (id) {\n      const c = getChatList().find(ch => ch.id === id);\n      if (c) setSelectedChat(c);\n      navigate('/messenger', {\n        replace: true,\n        state: {}\n      });\n    }\n  }, [(_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.openChatId, navigate]);\n  const refreshList = useCallback(async () => {\n    const fromApi = await apiGetChats();\n    if (Array.isArray(fromApi) && fromApi.length >= 0) {\n      try {\n        saveChatList(fromApi);\n      } catch {}\n      setChatList(fromApi);\n      return;\n    }\n    setChatList(getChatList());\n  }, []);\n  useEffect(() => {\n    refreshList();\n  }, [refreshList]);\n\n  // Синхронизация при возврате на вкладку (другое устройство могло отправить сообщения)\n  useEffect(() => {\n    const onVisible = () => refreshList();\n    document.addEventListener('visibilitychange', onVisible);\n    return () => document.removeEventListener('visibilitychange', onVisible);\n  }, [refreshList]);\n  const filteredChats = useMemo(() => {\n    const q = searchQuery.trim().toLowerCase().replace(/^@/, '');\n    if (!q) return chatList;\n    return chatList.filter(c => c.name && c.name.toLowerCase().includes(q) || c.username && c.username.toLowerCase().includes(q));\n  }, [chatList, searchQuery]);\n  const chatsByFolder = useMemo(() => {\n    var _folder$chatIds;\n    if (activeFolderId === FOLDER_ALL) return filteredChats;\n    const folder = folders.find(f => f.id === activeFolderId);\n    if (!(folder !== null && folder !== void 0 && (_folder$chatIds = folder.chatIds) !== null && _folder$chatIds !== void 0 && _folder$chatIds.length)) return [];\n    return filteredChats.filter(c => folder.chatIds.includes(c.id));\n  }, [activeFolderId, filteredChats, folders]);\n  const createNewChat = async type => {\n    if (type === 'channel') {\n      setNewChatOpen(false);\n      navigate('/messenger/new-channel');\n      return;\n    }\n    if (type === 'group') {\n      setNewChatOpen(false);\n      navigate('/messenger/new-group');\n      return;\n    }\n    const name = window.prompt('Введите ник @ или имя пользователя');\n    if (!(name !== null && name !== void 0 && name.trim())) return;\n    const peerUsername = name.trim().replace(/^@/, '');\n    const created = await apiCreateChat({\n      name: name.trim(),\n      type: 'user',\n      peerUsername\n    });\n    if (created !== null && created !== void 0 && created.id) {\n      addOrUpdateChat({\n        id: created.id,\n        name: created.name || name.trim(),\n        type: 'user',\n        lastMessage: '',\n        lastTime: null,\n        unread: 0,\n        peerUserId: created.peerUserId\n      });\n      await refreshList();\n      setSelectedChat(created);\n      setNewChatOpen(false);\n    } else {\n      window.alert('Пользователь с таким ником не найден. Убедитесь, что он зарегистрирован в AIST и указал никнейм в настройках.');\n    }\n  };\n  useEffect(() => {\n    if (!selectedChat) refreshList();\n  }, [selectedChat, refreshList]);\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\n  const showListOnly = isMobile && selectedChat;\n  const isDark = typeof window !== 'undefined' && window.matchMedia('(prefers-color-scheme: dark)').matches;\n  const accent = typeof theme.accent === 'string' ? theme.accent : '#0a84ff';\n\n  // Двухколоночный макет: слева — только список чатов, справа — окно чата (как в Telegram Desktop)\n  const s = {\n    container: {\n      display: 'flex',\n      flexDirection: 'row',\n      height: '100%',\n      minHeight: 0,\n      background: theme.pageBg\n    },\n    header: {\n      height: 64,\n      padding: '0 16px',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      background: theme.headerBg,\n      backdropFilter: 'blur(24px) saturate(180%)',\n      WebkitBackdropFilter: 'blur(24px) saturate(180%)',\n      borderBottom: `1px solid ${theme.border}`,\n      boxShadow: isDark ? '0 4px 20px rgba(0,0,0,.15)' : '0 4px 20px rgba(0,0,0,.06)'\n    },\n    headerTitle: {\n      fontSize: 24,\n      fontWeight: 700,\n      color: theme.text,\n      letterSpacing: '-0.5px'\n    },\n    search: {\n      padding: '12px 16px 14px'\n    },\n    searchInput: {\n      width: '100%',\n      padding: '14px 18px 14px 50px',\n      borderRadius: 24,\n      border: 'none',\n      background: theme.inputBg,\n      color: theme.text,\n      fontSize: 15,\n      outline: 'none',\n      transition: 'all 0.2s',\n      boxShadow: isDark ? '0 2px 8px rgba(0,0,0,.15)' : '0 2px 8px rgba(0,0,0,.05)'\n    },\n    searchWrap: {\n      position: 'relative'\n    },\n    searchIcon: {\n      position: 'absolute',\n      left: 18,\n      top: '50%',\n      transform: 'translateY(-50%)',\n      color: theme.textMuted,\n      pointerEvents: 'none'\n    },\n    sidebar: {\n      width: 400,\n      minWidth: 320,\n      maxWidth: 480,\n      flexShrink: 0,\n      background: theme.sidebarBg,\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      position: 'relative',\n      borderRight: `1px solid ${theme.border}`,\n      backdropFilter: 'blur(24px) saturate(160%)',\n      WebkitBackdropFilter: 'blur(24px) saturate(160%)'\n    },\n    chatList: {\n      flex: 1,\n      overflowY: 'auto',\n      overflowX: 'hidden'\n    },\n    chatItem: {\n      padding: '14px 16px',\n      display: 'flex',\n      alignItems: 'center',\n      gap: 14,\n      cursor: 'pointer',\n      transition: 'all 0.2s',\n      borderBottom: theme.border ? `1px solid ${theme.border}` : 'none'\n    },\n    chatItemActive: {\n      background: isDark ? 'rgba(255,255,255,0.06)' : 'rgba(0,0,0,0.04)'\n    },\n    avatar: {\n      width: 56,\n      height: 56,\n      borderRadius: '50%',\n      background: `linear-gradient(135deg, ${accent}, ${accent}dd)`,\n      color: theme.accentText || '#fff',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontSize: 22,\n      fontWeight: 600,\n      flexShrink: 0,\n      boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}`\n    },\n    chatInfo: {\n      flex: 1,\n      minWidth: 0\n    },\n    chatName: {\n      fontSize: 16,\n      fontWeight: 600,\n      color: theme.text,\n      marginBottom: 4,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      letterSpacing: '-0.2px'\n    },\n    lastMsg: {\n      fontSize: 14,\n      color: theme.textMuted,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      lineHeight: 1.35\n    },\n    chatMeta: {\n      flexShrink: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-end',\n      gap: 4\n    },\n    chatTime: {\n      fontSize: 12,\n      color: theme.textMuted,\n      fontWeight: 500\n    },\n    unreadBadge: {\n      minWidth: 20,\n      height: 20,\n      borderRadius: 10,\n      background: accent,\n      color: theme.accentText || '#fff',\n      fontSize: 11,\n      fontWeight: 600,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      padding: '0 6px',\n      boxShadow: `0 2px 8px ${theme.glow || 'rgba(10, 132, 255, .35)'}`\n    },\n    mainArea: {\n      flex: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      minWidth: 0,\n      minHeight: 0,\n      background: theme.cardBg,\n      transition: 'opacity 0.2s'\n    },\n    empty: {\n      flex: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      padding: 48,\n      textAlign: 'center'\n    },\n    emptyIconWrap: {\n      width: 120,\n      height: 120,\n      borderRadius: 60,\n      background: `linear-gradient(135deg, ${accent}15, ${accent}08)`,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginBottom: 28,\n      backdropFilter: 'blur(16px)',\n      boxShadow: `0 8px 32px ${theme.glow || 'rgba(10, 132, 255, .2)'}`\n    },\n    emptyTitle: {\n      fontSize: 28,\n      fontWeight: 700,\n      color: theme.text,\n      marginBottom: 14\n    },\n    emptySub: {\n      fontSize: 17,\n      lineHeight: 1.6,\n      color: theme.textMuted,\n      maxWidth: 320\n    },\n    emptyTagline: {\n      fontSize: 16,\n      color: theme.textMuted,\n      marginTop: 36,\n      opacity: 0.7\n    }\n  };\n  if (newChatOpen) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...s.container,\n        flexDirection: 'column',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        style: s.header,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            border: 'none',\n            background: 'transparent',\n            color: theme.accent,\n            padding: 8\n          },\n          onClick: () => setNewChatOpen(false),\n          children: /*#__PURE__*/_jsxDEV(IconBack, {\n            width: 24,\n            height: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: s.headerTitle,\n          children: \"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: 40\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: s.search,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: s.searchWrap,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: s.searchIcon,\n            children: /*#__PURE__*/_jsxDEV(IconSearch, {\n              width: 20,\n              height: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            style: s.searchInput,\n            placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u0438\\u043A\\u0443 \\u0438\\u043B\\u0438 \\u0438\\u043C\\u0435\\u043D\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...s.chatItem,\n            flexDirection: 'column',\n            alignItems: 'flex-start'\n          },\n          onClick: () => createNewChat('group'),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 12,\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...s.avatar,\n                background: theme.sidebarBg,\n                color: theme.text,\n                fontSize: 24\n              },\n              children: \"\\uD83D\\uDC65\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: s.chatName,\n                children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0433\\u0440\\u0443\\u043F\\u043F\\u0443\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 20\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: s.lastMsg,\n                children: \"\\u041E\\u0431\\u0449\\u0438\\u0439 \\u0447\\u0430\\u0442 \\u0441 \\u043D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u0438\\u043C\\u0438 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0430\\u043C\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 64\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IconChevronRight, {\n              width: 20,\n              height: 20,\n              style: {\n                marginLeft: 'auto',\n                color: theme.textMuted\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...s.chatItem,\n            flexDirection: 'column',\n            alignItems: 'flex-start'\n          },\n          onClick: () => createNewChat('channel'),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 12,\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...s.avatar,\n                background: theme.sidebarBg,\n                color: theme.text\n              },\n              children: /*#__PURE__*/_jsxDEV(IconChannel, {\n                width: 24,\n                height: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 92\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: s.chatName,\n                children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u0430\\u043D\\u0430\\u043B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 20\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: s.lastMsg,\n                children: \"\\u041F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043B\\u044F \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0447\\u0438\\u043A\\u043E\\u0432\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 63\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IconChevronRight, {\n              width: 20,\n              height: 20,\n              style: {\n                marginLeft: 'auto',\n                color: theme.textMuted\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: s.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...s.sidebar,\n        display: showListOnly ? 'none' : 'flex',\n        ...(isMobile ? {\n          width: '100%',\n          maxWidth: '100%'\n        } : {})\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        style: s.header,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: s.headerTitle,\n          children: \"\\u0427\\u0430\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            border: 'none',\n            background: 'transparent',\n            color: theme.accent,\n            padding: 8\n          },\n          onClick: () => setNewChatOpen(true),\n          \"aria-label\": \"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n          children: /*#__PURE__*/_jsxDEV(IconPen, {\n            width: 24,\n            height: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: s.search,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: s.searchWrap,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: s.searchIcon,\n            children: /*#__PURE__*/_jsxDEV(IconSearch, {\n              width: 20,\n              height: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            style: s.searchInput,\n            placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A\",\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 14px 12px',\n          display: 'flex',\n          gap: 8,\n          overflowX: 'auto',\n          flexShrink: 0\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            padding: '8px 16px',\n            borderRadius: 20,\n            border: 'none',\n            background: activeFolderId === FOLDER_ALL ? accent : theme.sidebarBg,\n            color: activeFolderId === FOLDER_ALL ? theme.accentText || '#fff' : theme.textMuted,\n            fontSize: 13,\n            fontWeight: 600,\n            cursor: 'pointer',\n            whiteSpace: 'nowrap',\n            transition: 'all 0.2s'\n          },\n          onClick: () => {\n            setFolderMenuChatId(null);\n            setActiveFolderId(FOLDER_ALL);\n          },\n          children: \"\\u0412\\u0441\\u0435 \\u0447\\u0430\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this), folders.map(f => /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            padding: '8px 16px',\n            borderRadius: 20,\n            border: 'none',\n            background: activeFolderId === f.id ? accent : theme.sidebarBg,\n            color: activeFolderId === f.id ? theme.accentText || '#fff' : theme.textMuted,\n            fontSize: 13,\n            fontWeight: 600,\n            cursor: 'pointer',\n            whiteSpace: 'nowrap',\n            transition: 'all 0.2s'\n          },\n          onClick: () => {\n            setFolderMenuChatId(null);\n            setActiveFolderId(f.id);\n          },\n          children: f.name\n        }, f.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px 16px 8px',\n          display: 'flex',\n          gap: 12,\n          overflowX: 'auto',\n          flexShrink: 0,\n          borderBottom: `1px solid ${theme.border}`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            gap: 6,\n            flexShrink: 0,\n            cursor: 'pointer'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 62,\n              height: 62,\n              borderRadius: '50%',\n              background: `linear-gradient(135deg, ${accent}, ${accent}dd)`,\n              padding: 3,\n              boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}`\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '100%',\n                height: '100%',\n                borderRadius: '50%',\n                background: theme.sidebarBg,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                color: theme.text,\n                fontSize: 24\n              },\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: 11,\n              color: theme.textMuted,\n              fontWeight: 500\n            },\n            children: \"\\u041C\\u043E\\u044F \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this), chatsByFolder.slice(0, 8).map(chat => {\n          var _chat$name, _chat$name$;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              gap: 6,\n              flexShrink: 0,\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: 62,\n                height: 62,\n                borderRadius: '50%',\n                background: `linear-gradient(135deg, ${accent}, ${accent}dd)`,\n                padding: 3,\n                boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}`\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: '100%',\n                  height: '100%',\n                  borderRadius: '50%',\n                  background: theme.cardBg,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  overflow: 'hidden'\n                },\n                children: chat.photo ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: chat.photo,\n                  alt: \"\",\n                  style: {\n                    width: '100%',\n                    height: '100%',\n                    objectFit: 'cover'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 33\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: 20,\n                    fontWeight: 600,\n                    color: theme.text\n                  },\n                  children: ((_chat$name = chat.name) === null || _chat$name === void 0 ? void 0 : (_chat$name$ = _chat$name[0]) === null || _chat$name$ === void 0 ? void 0 : _chat$name$.toUpperCase()) || '?'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 129\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 11,\n                color: theme.textMuted,\n                fontWeight: 500,\n                maxWidth: 60,\n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n                whiteSpace: 'nowrap'\n              },\n              children: chat.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this)]\n          }, `story-${chat.id}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scrollable\",\n        style: s.chatList,\n        children: [chatsByFolder.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: 24,\n            textAlign: 'center',\n            color: theme.textMuted,\n            fontSize: 15\n          },\n          children: \"\\u041D\\u0435\\u0442 \\u0447\\u0430\\u0442\\u043E\\u0432 \\u0432 \\u044D\\u0442\\u043E\\u0439 \\u043F\\u0430\\u043F\\u043A\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 13\n        }, this), chatsByFolder.map(chat => {\n          var _chat$name2, _chat$name2$;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            role: \"button\",\n            tabIndex: 0,\n            onClick: () => {\n              setFolderMenuChatId(null);\n              setSelectedChat(chat);\n            },\n            onKeyDown: e => e.key === 'Enter' && setSelectedChat(chat),\n            onMouseEnter: e => {\n              if ((selectedChat === null || selectedChat === void 0 ? void 0 : selectedChat.id) !== chat.id) e.currentTarget.style.background = isDark ? 'rgba(255,255,255,.04)' : 'rgba(0,0,0,.03)';\n            },\n            onMouseLeave: e => {\n              if ((selectedChat === null || selectedChat === void 0 ? void 0 : selectedChat.id) !== chat.id) e.currentTarget.style.background = 'transparent';\n            },\n            style: {\n              ...s.chatItem,\n              ...((selectedChat === null || selectedChat === void 0 ? void 0 : selectedChat.id) === chat.id ? s.chatItemActive : {}),\n              position: 'relative'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: s.avatar,\n              children: chat.photo ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: chat.photo,\n                alt: \"\",\n                style: {\n                  width: '100%',\n                  height: '100%',\n                  borderRadius: '50%',\n                  objectFit: 'cover'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 51\n              }, this) : chat.type === 'channel' ? /*#__PURE__*/_jsxDEV(IconChannel, {\n                width: 22,\n                height: 22\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 195\n              }, this) : ((_chat$name2 = chat.name) === null || _chat$name2 === void 0 ? void 0 : (_chat$name2$ = _chat$name2[0]) === null || _chat$name2$ === void 0 ? void 0 : _chat$name2$.toUpperCase()) || '?'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: s.chatInfo,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: s.chatName,\n                children: chat.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  ...s.lastMsg,\n                  ...(chat.unread > 0 ? {\n                    fontWeight: 500,\n                    color: theme.text\n                  } : {})\n                },\n                children: chat.lastMessage || (chat.type === 'channel' ? 'Канал' : 'Нет сообщений')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: s.chatMeta,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: s.chatTime,\n                children: chat.lastTime ? (() => {\n                  const d = new Date(chat.lastTime);\n                  const now = new Date();\n                  if (d.toDateString() === now.toDateString()) return d.toLocaleTimeString('ru-RU', {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  });\n                  if (d.getTime() > now.getTime() - 7 * 86400000) return d.toLocaleDateString('ru-RU', {\n                    weekday: 'short'\n                  });\n                  return d.toLocaleDateString('ru-RU', {\n                    day: 'numeric',\n                    month: 'short'\n                  });\n                })() : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 17\n              }, this), chat.unread > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: s.unreadBadge,\n                children: chat.unread > 99 ? '99+' : chat.unread\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              \"data-folder-trigger\": true,\n              \"aria-label\": \"\\u041F\\u0430\\u043F\\u043A\\u0438\",\n              style: {\n                border: 'none',\n                background: 'transparent',\n                color: theme.textMuted,\n                padding: 6,\n                borderRadius: 8,\n                cursor: 'pointer',\n                flexShrink: 0\n              },\n              onClick: e => {\n                e.stopPropagation();\n                setFolderMenuChatId(folderMenuChatId === chat.id ? null : chat.id);\n              },\n              children: \"\\u22EF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 15\n            }, this), folderMenuChatId === chat.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: folderMenuRef,\n              style: {\n                position: 'absolute',\n                right: 8,\n                top: '100%',\n                zIndex: 10,\n                marginTop: 2,\n                padding: 8,\n                borderRadius: 12,\n                background: theme.cardBg || theme.sidebarBg,\n                boxShadow: '0 4px 12px rgba(0,0,0,.2)',\n                minWidth: 180\n              },\n              onClick: e => e.stopPropagation(),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 12,\n                  color: theme.textMuted,\n                  marginBottom: 6\n                },\n                children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043F\\u0430\\u043F\\u043A\\u0443\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 19\n              }, this), folders.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 13,\n                  color: theme.textMuted\n                },\n                children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0430\\u043F\\u043A\\u0438 \\u0432 \\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0430\\u0445\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 43\n              }, this) : folders.map(f => {\n                const inFolder = (f.chatIds || []).includes(chat.id);\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  style: {\n                    display: 'block',\n                    width: '100%',\n                    padding: '8px 10px',\n                    border: 'none',\n                    background: inFolder ? 'rgba(0,136,204,.15)' : 'transparent',\n                    color: theme.text,\n                    borderRadius: 8,\n                    cursor: 'pointer',\n                    textAlign: 'left',\n                    fontSize: 14\n                  },\n                  onClick: () => {\n                    if (inFolder) removeChatFromFolder(f.id, chat.id);else addChatToFolder(f.id, chat.id);\n                    setFoldersRefresh(k => k + 1);\n                  },\n                  children: [inFolder ? '✓ ' : '', f.name]\n                }, f.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 553,\n                  columnNumber: 23\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 17\n            }, this)]\n          }, chat.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        \"aria-label\": \"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n        onClick: () => setNewChatOpen(true),\n        style: {\n          position: 'absolute',\n          bottom: 24,\n          right: 16,\n          width: 60,\n          height: 60,\n          borderRadius: 30,\n          border: 'none',\n          background: accent,\n          color: theme.accentText || '#fff',\n          boxShadow: `0 8px 32px ${theme.glow || 'rgba(10, 132, 255, .5)'}`,\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)'\n        },\n        onMouseEnter: e => e.currentTarget.style.transform = 'scale(1.08)',\n        onMouseLeave: e => e.currentTarget.style.transform = 'scale(1)',\n        children: /*#__PURE__*/_jsxDEV(IconPen, {\n          width: 28,\n          height: 28\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: s.mainArea,\n      children: selectedChat ? /*#__PURE__*/_jsxDEV(ChatView, {\n        chat: selectedChat,\n        onBack: () => setSelectedChat(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: s.empty,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: s.emptyIconWrap,\n          children: /*#__PURE__*/_jsxDEV(IconPen, {\n            width: 36,\n            height: 36,\n            style: {\n              color: theme.textMuted\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: s.emptyTitle,\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0447\\u0430\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: s.emptySub,\n          children: \"\\u0418\\u043B\\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\u0441 \\u0440\\u0443\\u0447\\u043A\\u043E\\u0439 \\u0432\\u044B\\u0448\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043D\\u0430\\u0447\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0434\\u0438\\u0430\\u043B\\u043E\\u0433\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: s.emptyTagline,\n          children: \"AIST \\u2014 \\u0443\\u0434\\u043E\\u0431\\u043D\\u044B\\u0439, \\u043A\\u043E\\u043C\\u0444\\u043E\\u0440\\u0442\\u043D\\u044B\\u0439 \\u0438 \\u0431\\u0435\\u0437\\u043E\\u043F\\u0430\\u0441\\u043D\\u044B\\u0439 \\u043C\\u0435\\u0441\\u0441\\u0435\\u043D\\u0434\\u0436\\u0435\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 473,\n    columnNumber: 5\n  }, this);\n}\n_s2(Chats, \"Fs5MMHD3wse1sTHs9HWil9LCUwo=\", false, function () {\n  return [useNavigate, useLocation, useTheme, useUser];\n});\n_c2 = Chats;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChatView\");\n$RefreshReg$(_c2, \"Chats\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useCallback","useRef","useNavigate","useLocation","useTheme","useUser","IconBack","IconSearch","IconPen","IconChannel","IconChevronRight","IconPhone","IconVideo","IconAttach","IconSend","IconSmile","IconMore","IconStories","IconGallery","IconContacts","IconCheck","IconCheckDouble","IconCopy","IconDelete","IconReply","IconForward","IconPin","IconMute","CallScreen","getChatList","saveChatList","getMessages","appendMessage","saveMessages","addOrUpdateChat","createChat","getChannelMeta","saveChannelMeta","apiGetChats","apiGetMessages","apiSendMessage","apiCreateChat","getFolders","addChatToFolder","removeChatFromFolder","getChatFolderIds","connectChatWebSocket","disconnect","addListener","removeListener","isWebSocketConnected","jsxDEV","_jsxDEV","Fragment","_Fragment","APP_DOMAIN","FOLDER_ALL","ChatView","chat","onBack","_s","theme","chatBg","isDark","displayName","accent","messages","setMessages","inputValue","setInputValue","attachPreview","setAttachPreview","callMode","setCallMode","showChannelInfo","setShowChannelInfo","isMobile","window","matchMedia","matches","messagesAreaBg","channelMeta","type","id","channelLink","shareLink","cancelled","fromApi","Array","isArray","merged","handleMessage","data","chatId","newMsg","message","prev","exists","some","m","updated","sendMessage","textOrAttachment","isAttach","text","caption","trim","attachment","localId","Date","now","Math","random","toString","slice","localMsg","fromMe","time","toISOString","senderName","url","undefined","next","lastMessage","lastTime","list","idx","findIndex","MAX_FILE_MB","ALLOWED_IMAGE","ALLOWED_VIDEO","onAttach","e","_e$target$files","f","target","files","sizeMB","size","includes","r","FileReader","onload","result","readAsDataURL","bubbleIn","bubbleOut","bubbleStyleIn","padding","borderRadius","background","color","fontSize","lineHeight","maxWidth","boxShadow","backdropFilter","WebkitBackdropFilter","border","cardBorder","bubbleStyleOut","accentText","glow","formatDateKey","t","toDateString","messagesWithDates","out","lastDate","forEach","d","push","key","date","style","display","flexDirection","height","children","alignItems","gap","headerBg","borderBottom","cursor","justifyContent","transition","onClick","width","fileName","_jsxFileName","lineNumber","columnNumber","flex","textAlign","minWidth","fontWeight","letterSpacing","name","textMuted","role","position","inset","zIndex","cardBg","stopPropagation","marginBottom","description","whiteSpace","readOnly","value","inputBg","_navigator$clipboard","navigator","clipboard","writeText","marginTop","sidebarBg","peerName","isVideo","onEnd","peerUserId","otherUserId","overflowY","length","map","item","_m$attachment","label","toLocaleDateString","day","month","year","alignSelf","margin","timeStr","toLocaleTimeString","hour","minute","marginLeft","overflow","src","alt","maxHeight","controls","opacity","borderTop","top","right","flexShrink","onMouseEnter","currentTarget","onMouseLeave","accept","onChange","messageInputBg","outline","placeholder","onKeyDown","shiftKey","preventDefault","minHeight","_c","Chats","_s2","_location$state2","navigate","location","token","chatList","setChatList","selectedChat","setSelectedChat","searchQuery","setSearchQuery","newChatOpen","setNewChatOpen","activeFolderId","setActiveFolderId","foldersRefresh","setFoldersRefresh","folderMenuChatId","setFolderMenuChatId","folderMenuRef","folders","onDocClick","_folderMenuRef$curren","current","contains","closest","document","addEventListener","removeEventListener","_location$state","state","openChatId","c","find","ch","replace","refreshList","onVisible","filteredChats","q","toLowerCase","filter","username","chatsByFolder","_folder$chatIds","folder","chatIds","createNewChat","prompt","peerUsername","created","unread","alert","showListOnly","s","container","pageBg","header","headerTitle","search","searchInput","searchWrap","searchIcon","left","transform","pointerEvents","sidebar","borderRight","overflowX","chatItem","chatItemActive","avatar","chatInfo","chatName","textOverflow","lastMsg","chatMeta","chatTime","unreadBadge","mainArea","empty","emptyIconWrap","emptyTitle","emptySub","emptyTagline","_chat$name","_chat$name$","photo","objectFit","toUpperCase","className","_chat$name2","_chat$name2$","tabIndex","getTime","weekday","ref","inFolder","k","bottom","_c2","$RefreshReg$"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/components/Chats.jsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useTheme } from '../context/ThemeContext';\r\nimport { useUser } from '../context/UserContext';\r\nimport {\r\n  IconBack, IconSearch, IconPen, IconChannel, IconChevronRight,\r\n  IconPhone, IconVideo, IconAttach, IconSend, IconSmile, IconMore,\r\n  IconStories, IconGallery, IconContacts, IconCheck, IconCheckDouble,\r\n  IconCopy, IconDelete, IconReply, IconForward, IconPin, IconMute\r\n} from './Icons';\r\nimport CallScreen from './CallScreen';\r\nimport {\r\n  getChatList,\r\n  saveChatList,\r\n  getMessages,\r\n  appendMessage,\r\n  saveMessages,\r\n  addOrUpdateChat,\r\n  createChat,\r\n  getChannelMeta,\r\n  saveChannelMeta,\r\n} from '../lib/chatStorage';\r\nimport { apiGetChats, apiGetMessages, apiSendMessage, apiCreateChat } from '../lib/api';\r\nimport { getFolders, addChatToFolder, removeChatFromFolder, getChatFolderIds } from '../lib/folderStorage';\r\nimport { connectChatWebSocket, disconnect, addListener, removeListener, isWebSocketConnected } from '../lib/chatWebSocket';\r\n\r\nconst APP_DOMAIN = 'https://aist-messenger.vercel.app';\r\nconst FOLDER_ALL = 'all';\r\n\r\nfunction ChatView({ chat, onBack }) {\r\n  const { theme, chatBg, isDark } = useTheme();\r\n  const { displayName } = useUser();\r\n  const accent = typeof theme.accent === 'string' ? theme.accent : '#0a84ff';\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [attachPreview, setAttachPreview] = useState(null);\r\n  const [callMode, setCallMode] = useState(null);\r\n  const [showChannelInfo, setShowChannelInfo] = useState(false);\r\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\r\n  const messagesAreaBg = chatBg || (isDark ? '#0d1218' : '#e8eef5');\r\n  const channelMeta = chat.type === 'channel' ? getChannelMeta(chat.id) : null;\r\n  const channelLink = channelMeta?.shareLink || `${APP_DOMAIN}/c/${chat.id}`;\r\n\r\n  // Локальное хранение: сначала показываем с устройства, затем синхронизируем с сервером при открытии\r\n  useEffect(() => {\r\n    setMessages(getMessages(chat.id));\r\n    let cancelled = false;\r\n    (async () => {\r\n      const fromApi = await apiGetMessages(chat.id);\r\n      if (cancelled) return;\r\n      if (Array.isArray(fromApi)) {\r\n        const merged = saveMessages(chat.id, fromApi);\r\n        setMessages(merged);\r\n      }\r\n    })();\r\n    return () => { cancelled = true; };\r\n  }, [chat.id]);\r\n\r\n  // WebSocket для получения сообщений в реальном времени\r\n  useEffect(() => {\r\n    const handleMessage = (data) => {\r\n      if (data.type === 'new_message' && data.chatId === chat.id) {\r\n        const newMsg = data.message;\r\n        if (newMsg) {\r\n          setMessages(prev => {\r\n            const exists = prev.some(m => m.id === newMsg.id);\r\n            if (exists) return prev;\r\n            const updated = [...prev, newMsg];\r\n            saveMessages(chat.id, updated);\r\n            return updated;\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    addListener(handleMessage);\r\n    return () => removeListener(handleMessage);\r\n  }, [chat.id]);\r\n\r\n  const sendMessage = useCallback(async (textOrAttachment) => {\r\n    const isAttach = typeof textOrAttachment === 'object';\r\n    const text = isAttach ? textOrAttachment.caption || '' : (textOrAttachment || '').trim();\r\n    const attachment = isAttach ? textOrAttachment : null;\r\n    if (!text && !attachment) return;\r\n    const localId = `m_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;\r\n    const localMsg = {\r\n      id: localId,\r\n      fromMe: true,\r\n      text: text || (attachment ? (attachment.type === 'image' ? 'Фото' : 'Видео') : ''),\r\n      time: new Date().toISOString(),\r\n      senderName: displayName || 'Вы',\r\n      attachment: attachment ? { type: attachment.type, url: attachment.url } : undefined,\r\n    };\r\n    // Сначала сохраняем на устройстве и сразу показываем\r\n    const next = appendMessage(chat.id, localMsg);\r\n    setMessages(next);\r\n    setInputValue('');\r\n    setAttachPreview(null);\r\n    addOrUpdateChat({ ...chat, lastMessage: text || 'Медиа', lastTime: Date.now() });\r\n    // Затем отправляем на сервер для синхронизации с другими устройствами\r\n    const fromApi = await apiSendMessage(chat.id, {\r\n      text: localMsg.text,\r\n      attachment: attachment ? { type: attachment.type, url: attachment.url } : null,\r\n    });\r\n    if (fromApi && fromApi.id !== localId) {\r\n      const list = getMessages(chat.id);\r\n      const idx = list.findIndex((m) => m.id === localId);\r\n      if (idx >= 0) {\r\n        const updated = [...list];\r\n        updated[idx] = { ...list[idx], id: fromApi.id, time: fromApi.time || list[idx].time };\r\n        saveMessages(chat.id, updated);\r\n        setMessages(updated);\r\n      }\r\n    }\r\n  }, [chat, displayName]);\r\n\r\n  const MAX_FILE_MB = 16;\r\n  const ALLOWED_IMAGE = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\n  const ALLOWED_VIDEO = ['video/mp4', 'video/webm'];\r\n  const onAttach = (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    const sizeMB = f.size / (1024 * 1024);\r\n    if (sizeMB > MAX_FILE_MB) return;\r\n    if (ALLOWED_IMAGE.includes(f.type)) {\r\n      const r = new FileReader();\r\n      r.onload = () => setAttachPreview({ type: 'image', url: r.result });\r\n      r.readAsDataURL(f);\r\n    } else if (ALLOWED_VIDEO.includes(f.type)) {\r\n      const r = new FileReader();\r\n      r.onload = () => setAttachPreview({ type: 'video', url: r.result });\r\n      r.readAsDataURL(f);\r\n    }\r\n  };\r\n\r\n  const bubbleIn = theme.bubbleIn || (isDark ? 'rgba(32, 42, 58, .88)' : 'rgba(255,255,255,.92)');\r\n  const bubbleOut = theme.bubbleOut || accent;\r\n  const bubbleStyleIn = {\r\n    padding: '14px 18px 12px 18px',\r\n    borderRadius: '22px 22px 22px 8px',\r\n    background: bubbleIn,\r\n    color: theme.text,\r\n    fontSize: 15,\r\n    lineHeight: 1.5,\r\n    maxWidth: '100%',\r\n    boxShadow: isDark ? '0 4px 16px rgba(0,0,0,.3)' : '0 4px 16px rgba(0,0,0,.1)',\r\n    backdropFilter: 'blur(20px) saturate(160%)',\r\n    WebkitBackdropFilter: 'blur(20px) saturate(160%)',\r\n    border: `1px solid ${theme.cardBorder || 'transparent'}`,\r\n  };\r\n  const bubbleStyleOut = {\r\n    ...bubbleStyleIn,\r\n    borderRadius: '22px 22px 8px 22px',\r\n    background: bubbleOut,\r\n    color: theme.accentText || '#fff',\r\n    boxShadow: `0 6px 20px ${theme.glow || 'rgba(10, 132, 255, .4)'}`,\r\n    border: 'none',\r\n  };\r\n\r\n  const formatDateKey = (t) => new Date(t).toDateString();\r\n  const messagesWithDates = useMemo(() => {\r\n    const out = [];\r\n    let lastDate = null;\r\n    messages.forEach((m) => {\r\n      const d = formatDateKey(m.time);\r\n      if (d !== lastDate) {\r\n        lastDate = d;\r\n        out.push({ type: 'date', key: `date-${d}`, date: m.time });\r\n      }\r\n      out.push(m);\r\n    });\r\n    return out;\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\r\n      <header style={{ height: 64, padding: '0 8px 0 4px', display: 'flex', alignItems: 'center', gap: 6, background: theme.headerBg, backdropFilter: 'blur(24px) saturate(180%)', WebkitBackdropFilter: 'blur(24px) saturate(180%)', borderBottom: `1px solid ${theme.border}`, boxShadow: isDark ? '0 4px 20px rgba(0,0,0,.15)' : '0 4px 20px rgba(0,0,0,.06)' }}>\r\n        <button type=\"button\" style={{ border: 'none', background: 'transparent', color: accent, padding: 10, cursor: 'pointer', display: isMobile ? 'flex' : 'none', alignItems: 'center', justifyContent: 'center', borderRadius: 12, transition: 'all 0.2s' }} onClick={onBack} aria-label=\"Назад\">\r\n          <IconBack width={24} height={24} />\r\n        </button>\r\n        <button type=\"button\" onClick={() => chat.type === 'channel' && setShowChannelInfo(true)} style={{ flex: 1, border: 'none', background: 'transparent', padding: '10px 12px', cursor: chat.type === 'channel' ? 'pointer' : 'default', textAlign: 'left', minWidth: 0, borderRadius: 12, transition: 'background 0.2s' }}>\r\n          <span style={{ fontWeight: 700, fontSize: 18, color: theme.text, display: 'block', letterSpacing: '-0.3px' }}>{chat.name}</span>\r\n          {chat.type !== 'channel' && <span style={{ fontSize: 13, color: theme.textMuted, fontWeight: 500 }}>онлайн</span>}\r\n        </button>\r\n        {chat.type !== 'channel' && (\r\n          <>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 10, color: theme.textMuted, cursor: 'pointer', borderRadius: 12, transition: 'all 0.2s' }} aria-label=\"Голосовой звонок\" onClick={() => setCallMode('voice')}><IconPhone width={22} height={22} /></button>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 10, color: theme.textMuted, cursor: 'pointer', borderRadius: 12, transition: 'all 0.2s' }} aria-label=\"Видеозвонок\" onClick={() => setCallMode('video')}><IconVideo width={22} height={22} /></button>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 10, color: theme.textMuted, cursor: 'pointer', borderRadius: 12, transition: 'all 0.2s' }} aria-label=\"Ещё\"><IconMore width={22} height={22} /></button>\r\n          </>\r\n        )}\r\n      </header>\r\n      {showChannelInfo && channelMeta && (\r\n        <div\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-label=\"Информация о канале\"\r\n          style={{ position: 'fixed', inset: 0, zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: 16, background: 'rgba(0,0,0,.6)', backdropFilter: 'blur(8px)' }}\r\n          onClick={() => setShowChannelInfo(false)}\r\n        >\r\n          <div style={{ background: theme.cardBg, borderRadius: 20, padding: 24, maxWidth: 380, width: '100%', border: `1px solid ${theme.cardBorder}`, boxShadow: '0 16px 48px rgba(0,0,0,.3)', backdropFilter: 'blur(20px) saturate(140%)', WebkitBackdropFilter: 'blur(20px) saturate(140%)' }} onClick={(e) => e.stopPropagation()}>\r\n            <div style={{ fontSize: 20, fontWeight: 700, marginBottom: 14, color: theme.text }}>{chat.name}</div>\r\n            {channelMeta.description ? <p style={{ fontSize: 15, color: theme.textMuted, marginBottom: 16, whiteSpace: 'pre-wrap', lineHeight: 1.5 }}>{channelMeta.description}</p> : null}\r\n            <div style={{ fontSize: 14, color: theme.textMuted, marginBottom: 10 }}>Ссылка на канал:</div>\r\n            <div style={{ display: 'flex', gap: 10, alignItems: 'center' }}>\r\n              <input readOnly value={channelLink} style={{ flex: 1, padding: '10px 14px', borderRadius: 12, border: `1px solid ${theme.border}`, background: theme.inputBg, color: theme.text, fontSize: 14 }} />\r\n              <button type=\"button\" onClick={() => { navigator.clipboard?.writeText(channelLink); }} style={{ padding: '10px 18px', borderRadius: 12, border: 'none', background: accent, color: theme.accentText || '#fff', cursor: 'pointer', fontSize: 14, fontWeight: 600, boxShadow: '0 4px 12px rgba(10, 132, 255, .3)' }}>Копировать</button>\r\n            </div>\r\n            <button type=\"button\" onClick={() => setShowChannelInfo(false)} style={{ marginTop: 20, width: '100%', padding: 12, borderRadius: 12, border: 'none', background: theme.sidebarBg, color: theme.text, cursor: 'pointer', fontSize: 15, fontWeight: 600 }}>Закрыть</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {callMode && (\r\n        <CallScreen peerName={chat.name} isVideo={callMode === 'video'} onEnd={() => setCallMode(null)} peerUserId={chat.peerUserId || chat.otherUserId} />\r\n      )}\r\n      <div style={{ flex: 1, overflowY: 'auto', padding: '14px 20px 20px', display: 'flex', flexDirection: 'column', gap: 8, background: messagesAreaBg }}>\r\n        {messages.length === 0 && (\r\n          <div style={{ color: theme.textMuted, fontSize: 15, textAlign: 'center', padding: '60px 20px' }}>Нет сообщений</div>\r\n        )}\r\n        {messagesWithDates.map((item) => {\r\n          if (item.type === 'date') {\r\n            const label = new Date(item.date).toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });\r\n            return (\r\n              <div key={item.key} style={{ alignSelf: 'center', margin: '16px 0 8px', padding: '6px 16px', borderRadius: 12, background: isDark ? 'rgba(255,255,255,.08)' : 'rgba(0,0,0,.06)', fontSize: 13, color: theme.textMuted, fontWeight: 600, backdropFilter: 'blur(10px)' }}>\r\n                {label}\r\n              </div>\r\n            );\r\n          }\r\n          const m = item;\r\n          const timeStr = new Date(m.time).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n          return (\r\n            <div key={m.id} style={{ alignSelf: m.fromMe ? 'flex-end' : 'flex-start', maxWidth: '82%', display: 'flex', flexDirection: 'column', alignItems: m.fromMe ? 'flex-end' : 'flex-start' }}>\r\n              {!m.fromMe && chat.type === 'group' && m.senderName && (\r\n                <span style={{ fontSize: 12, color: theme.textMuted, marginBottom: 2, marginLeft: 4 }}>{m.senderName}</span>\r\n              )}\r\n              {m.attachment?.url && (\r\n                <div style={{ marginBottom: 2, borderRadius: 12, overflow: 'hidden', boxShadow: '0 1px 3px rgba(0,0,0,.2)' }}>\r\n                  {m.attachment.type === 'image' ? (\r\n                    <img src={m.attachment.url} alt=\"\" style={{ maxWidth: 260, maxHeight: 260, display: 'block' }} />\r\n                  ) : (\r\n                    <video src={m.attachment.url} controls style={{ maxWidth: 260, maxHeight: 180 }} />\r\n                  )}\r\n                </div>\r\n              )}\r\n              <div style={m.fromMe ? bubbleStyleOut : bubbleStyleIn}>\r\n                {m.text ? <span style={{ display: 'block', marginBottom: 2 }}>{m.text}</span> : null}\r\n                <div style={{ fontSize: 11, opacity: 0.8 }}>{timeStr}</div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {attachPreview && (\r\n        <div style={{ padding: 12, borderTop: `1px solid ${theme.border}`, background: theme.headerBg, backdropFilter: 'blur(20px)' }}>\r\n          <div style={{ position: 'relative', display: 'inline-block' }}>\r\n            {attachPreview.type === 'image' ? <img src={attachPreview.url} alt=\"\" style={{ maxHeight: 140, borderRadius: 12, boxShadow: '0 4px 12px rgba(0,0,0,.15)' }} /> : <video src={attachPreview.url} style={{ maxHeight: 140, borderRadius: 12, boxShadow: '0 4px 12px rgba(0,0,0,.15)' }} />}\r\n            <button type=\"button\" onClick={() => setAttachPreview(null)} style={{ position: 'absolute', top: 8, right: 8, border: 'none', background: 'rgba(0,0,0,.6)', color: '#fff', borderRadius: 50, width: 28, height: 28, cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 16 }}>×</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div style={{ padding: '12px 16px 14px', borderTop: `1px solid ${theme.border}`, background: theme.headerBg, backdropFilter: 'blur(24px) saturate(180%)', WebkitBackdropFilter: 'blur(24px) saturate(180%)', display: 'flex', gap: 10, alignItems: 'center' }}>\r\n        <label style={{ cursor: 'pointer', color: theme.textMuted, padding: 8, flexShrink: 0, borderRadius: 14, transition: 'all 0.2s' }} aria-label=\"Прикрепить файл\" onMouseEnter={(e) => e.currentTarget.style.background = isDark ? 'rgba(255,255,255,.06)' : 'rgba(0,0,0,.04)'} onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}>\r\n          <input type=\"file\" accept=\"image/*,video/*,.pdf,.doc,.docx\" style={{ display: 'none' }} onChange={onAttach} />\r\n          <IconAttach width={24} height={24} />\r\n        </label>\r\n        <input\r\n          style={{ flex: 1, minWidth: 0, padding: '14px 20px', borderRadius: 26, border: 'none', background: theme.messageInputBg || theme.inputBg, color: theme.text, fontSize: 15, outline: 'none', transition: 'all 0.2s', boxShadow: isDark ? '0 2px 8px rgba(0,0,0,.15)' : '0 2px 8px rgba(0,0,0,.05)' }}\r\n          placeholder=\"Сообщение\"\r\n          value={inputValue}\r\n          onChange={(e) => setInputValue(e.target.value)}\r\n          onKeyDown={(e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); if (attachPreview) sendMessage({ ...attachPreview, caption: inputValue }); else sendMessage(inputValue); } }}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => attachPreview ? sendMessage({ ...attachPreview, caption: inputValue }) : sendMessage(inputValue)}\r\n          style={{\r\n            width: 48,\r\n            height: 48,\r\n            minWidth: 48,\r\n            minHeight: 48,\r\n            flexShrink: 0,\r\n            padding: 0,\r\n            borderRadius: '50%',\r\n            border: 'none',\r\n            background: accent,\r\n            color: theme.accentText || '#fff',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: 18,\r\n            boxShadow: `0 6px 20px ${theme.glow || 'rgba(10, 132, 255, .4)'}`,\r\n            transition: 'all 0.2s',\r\n          }}\r\n          aria-label=\"Отправить\"\r\n        >\r\n          <IconSend width={22} height={22} />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Chats() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { theme } = useTheme();\r\n  const { token } = useUser();\r\n  const [chatList, setChatList] = useState(getChatList);\r\n  const [selectedChat, setSelectedChat] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [newChatOpen, setNewChatOpen] = useState(false);\r\n  const [activeFolderId, setActiveFolderId] = useState(FOLDER_ALL);\r\n  const [foldersRefresh, setFoldersRefresh] = useState(0);\r\n  const [folderMenuChatId, setFolderMenuChatId] = useState(null);\r\n  const folderMenuRef = useRef(null);\r\n  const folders = useMemo(() => getFolders(), [foldersRefresh]);\r\n\r\n  useEffect(() => {\r\n    if (!folderMenuChatId) return;\r\n    const onDocClick = (e) => {\r\n      if (folderMenuRef.current?.contains(e.target) || e.target.closest('[data-folder-trigger]')) return;\r\n      setFolderMenuChatId(null);\r\n    };\r\n    document.addEventListener('click', onDocClick);\r\n    return () => document.removeEventListener('click', onDocClick);\r\n  }, [folderMenuChatId]);\r\n\r\n  useEffect(() => {\r\n    const id = location.state?.openChatId;\r\n    if (id) {\r\n      const c = getChatList().find((ch) => ch.id === id);\r\n      if (c) setSelectedChat(c);\r\n      navigate('/messenger', { replace: true, state: {} });\r\n    }\r\n  }, [location.state?.openChatId, navigate]);\r\n\r\n  const refreshList = useCallback(async () => {\r\n    const fromApi = await apiGetChats();\r\n    if (Array.isArray(fromApi) && fromApi.length >= 0) {\r\n      try {\r\n        saveChatList(fromApi);\r\n      } catch {}\r\n      setChatList(fromApi);\r\n      return;\r\n    }\r\n    setChatList(getChatList());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    refreshList();\r\n  }, [refreshList]);\r\n\r\n  // Синхронизация при возврате на вкладку (другое устройство могло отправить сообщения)\r\n  useEffect(() => {\r\n    const onVisible = () => refreshList();\r\n    document.addEventListener('visibilitychange', onVisible);\r\n    return () => document.removeEventListener('visibilitychange', onVisible);\r\n  }, [refreshList]);\r\n\r\n  const filteredChats = useMemo(() => {\r\n    const q = searchQuery.trim().toLowerCase().replace(/^@/, '');\r\n    if (!q) return chatList;\r\n    return chatList.filter((c) => (c.name && c.name.toLowerCase().includes(q)) || (c.username && c.username.toLowerCase().includes(q)));\r\n  }, [chatList, searchQuery]);\r\n\r\n  const chatsByFolder = useMemo(() => {\r\n    if (activeFolderId === FOLDER_ALL) return filteredChats;\r\n    const folder = folders.find((f) => f.id === activeFolderId);\r\n    if (!folder?.chatIds?.length) return [];\r\n    return filteredChats.filter((c) => folder.chatIds.includes(c.id));\r\n  }, [activeFolderId, filteredChats, folders]);\r\n\r\n  const createNewChat = async (type) => {\r\n    if (type === 'channel') {\r\n      setNewChatOpen(false);\r\n      navigate('/messenger/new-channel');\r\n      return;\r\n    }\r\n    if (type === 'group') {\r\n      setNewChatOpen(false);\r\n      navigate('/messenger/new-group');\r\n      return;\r\n    }\r\n    const name = window.prompt('Введите ник @ или имя пользователя');\r\n    if (!name?.trim()) return;\r\n    const peerUsername = name.trim().replace(/^@/, '');\r\n    const created = await apiCreateChat({ name: name.trim(), type: 'user', peerUsername });\r\n    if (created?.id) {\r\n      addOrUpdateChat({ id: created.id, name: created.name || name.trim(), type: 'user', lastMessage: '', lastTime: null, unread: 0, peerUserId: created.peerUserId });\r\n      await refreshList();\r\n      setSelectedChat(created);\r\n      setNewChatOpen(false);\r\n    } else {\r\n      window.alert('Пользователь с таким ником не найден. Убедитесь, что он зарегистрирован в AIST и указал никнейм в настройках.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!selectedChat) refreshList();\r\n  }, [selectedChat, refreshList]);\r\n\r\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\r\n  const showListOnly = isMobile && selectedChat;\r\n  const isDark = typeof window !== 'undefined' && window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n  const accent = typeof theme.accent === 'string' ? theme.accent : '#0a84ff';\r\n\r\n  // Двухколоночный макет: слева — только список чатов, справа — окно чата (как в Telegram Desktop)\r\n  const s = {\r\n    container: { display: 'flex', flexDirection: 'row', height: '100%', minHeight: 0, background: theme.pageBg },\r\n    header: { height: 64, padding: '0 16px', display: 'flex', alignItems: 'center', justifyContent: 'space-between', background: theme.headerBg, backdropFilter: 'blur(24px) saturate(180%)', WebkitBackdropFilter: 'blur(24px) saturate(180%)', borderBottom: `1px solid ${theme.border}`, boxShadow: isDark ? '0 4px 20px rgba(0,0,0,.15)' : '0 4px 20px rgba(0,0,0,.06)' },\r\n    headerTitle: { fontSize: 24, fontWeight: 700, color: theme.text, letterSpacing: '-0.5px' },\r\n    search: { padding: '12px 16px 14px' },\r\n    searchInput: { width: '100%', padding: '14px 18px 14px 50px', borderRadius: 24, border: 'none', background: theme.inputBg, color: theme.text, fontSize: 15, outline: 'none', transition: 'all 0.2s', boxShadow: isDark ? '0 2px 8px rgba(0,0,0,.15)' : '0 2px 8px rgba(0,0,0,.05)' },\r\n    searchWrap: { position: 'relative' },\r\n    searchIcon: { position: 'absolute', left: 18, top: '50%', transform: 'translateY(-50%)', color: theme.textMuted, pointerEvents: 'none' },\r\n    sidebar: { width: 400, minWidth: 320, maxWidth: 480, flexShrink: 0, background: theme.sidebarBg, display: 'flex', flexDirection: 'column', overflow: 'hidden', position: 'relative', borderRight: `1px solid ${theme.border}`, backdropFilter: 'blur(24px) saturate(160%)', WebkitBackdropFilter: 'blur(24px) saturate(160%)' },\r\n    chatList: { flex: 1, overflowY: 'auto', overflowX: 'hidden' },\r\n    chatItem: { padding: '14px 16px', display: 'flex', alignItems: 'center', gap: 14, cursor: 'pointer', transition: 'all 0.2s', borderBottom: theme.border ? `1px solid ${theme.border}` : 'none' },\r\n    chatItemActive: { background: isDark ? 'rgba(255,255,255,0.06)' : 'rgba(0,0,0,0.04)' },\r\n    avatar: { width: 56, height: 56, borderRadius: '50%', background: `linear-gradient(135deg, ${accent}, ${accent}dd)`, color: theme.accentText || '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 22, fontWeight: 600, flexShrink: 0, boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}` },\r\n    chatInfo: { flex: 1, minWidth: 0 },\r\n    chatName: { fontSize: 16, fontWeight: 600, color: theme.text, marginBottom: 4, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', letterSpacing: '-0.2px' },\r\n    lastMsg: { fontSize: 14, color: theme.textMuted, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', lineHeight: 1.35 },\r\n    chatMeta: { flexShrink: 0, display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: 4 },\r\n    chatTime: { fontSize: 12, color: theme.textMuted, fontWeight: 500 },\r\n    unreadBadge: { minWidth: 20, height: 20, borderRadius: 10, background: accent, color: theme.accentText || '#fff', fontSize: 11, fontWeight: 600, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '0 6px', boxShadow: `0 2px 8px ${theme.glow || 'rgba(10, 132, 255, .35)'}` },\r\n    mainArea: { flex: 1, display: 'flex', flexDirection: 'column', minWidth: 0, minHeight: 0, background: theme.cardBg, transition: 'opacity 0.2s' },\r\n    empty: { flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', padding: 48, textAlign: 'center' },\r\n    emptyIconWrap: { width: 120, height: 120, borderRadius: 60, background: `linear-gradient(135deg, ${accent}15, ${accent}08)`, display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: 28, backdropFilter: 'blur(16px)', boxShadow: `0 8px 32px ${theme.glow || 'rgba(10, 132, 255, .2)'}` },\r\n    emptyTitle: { fontSize: 28, fontWeight: 700, color: theme.text, marginBottom: 14 },\r\n    emptySub: { fontSize: 17, lineHeight: 1.6, color: theme.textMuted, maxWidth: 320 },\r\n    emptyTagline: { fontSize: 16, color: theme.textMuted, marginTop: 36, opacity: 0.7 },\r\n  };\r\n\r\n  if (newChatOpen) {\r\n    return (\r\n      <div style={{ ...s.container, flexDirection: 'column', width: '100%' }}>\r\n        <header style={s.header}>\r\n          <button type=\"button\" style={{ border: 'none', background: 'transparent', color: theme.accent, padding: 8 }} onClick={() => setNewChatOpen(false)}>\r\n            <IconBack width={24} height={24} />\r\n          </button>\r\n          <span style={s.headerTitle}>Новое сообщение</span>\r\n          <span style={{ width: 40 }} />\r\n        </header>\r\n        <div style={s.search}>\r\n          <div style={s.searchWrap}>\r\n            <span style={s.searchIcon}><IconSearch width={20} height={20} /></span>\r\n            <input type=\"text\" style={s.searchInput} placeholder=\"Поиск по нику или имени\" />\r\n          </div>\r\n        </div>\r\n        <div style={{ flex: 1, overflowY: 'auto' }}>\r\n          <div style={{ ...s.chatItem, flexDirection: 'column', alignItems: 'flex-start' }} onClick={() => createNewChat('group')}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, width: '100%' }}>\r\n              <div style={{ ...s.avatar, background: theme.sidebarBg, color: theme.text, fontSize: 24 }}>👥</div>\r\n              <div><div style={s.chatName}>Создать группу</div><div style={s.lastMsg}>Общий чат с несколькими участниками</div></div>\r\n              <IconChevronRight width={20} height={20} style={{ marginLeft: 'auto', color: theme.textMuted }} />\r\n            </div>\r\n          </div>\r\n          <div style={{ ...s.chatItem, flexDirection: 'column', alignItems: 'flex-start' }} onClick={() => createNewChat('channel')}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, width: '100%' }}>\r\n              <div style={{ ...s.avatar, background: theme.sidebarBg, color: theme.text }}><IconChannel width={24} height={24} /></div>\r\n              <div><div style={s.chatName}>Создать канал</div><div style={s.lastMsg}>Публикация новостей для подписчиков</div></div>\r\n              <IconChevronRight width={20} height={20} style={{ marginLeft: 'auto', color: theme.textMuted }} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={s.container}>\r\n      <div style={{ ...s.sidebar, display: showListOnly ? 'none' : 'flex', ...(isMobile ? { width: '100%', maxWidth: '100%' } : {}) }}>\r\n        <header style={s.header}>\r\n          <span style={s.headerTitle}>Чаты</span>\r\n          <button type=\"button\" style={{ border: 'none', background: 'transparent', color: theme.accent, padding: 8 }} onClick={() => setNewChatOpen(true)} aria-label=\"Новое сообщение\">\r\n            <IconPen width={24} height={24} />\r\n          </button>\r\n        </header>\r\n        <div style={s.search}>\r\n          <div style={s.searchWrap}>\r\n            <span style={s.searchIcon}><IconSearch width={20} height={20} /></span>\r\n            <input type=\"text\" style={s.searchInput} placeholder=\"Поиск\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div style={{ padding: '8px 14px 12px', display: 'flex', gap: 8, overflowX: 'auto', flexShrink: 0 }}>\r\n          <button type=\"button\" style={{ padding: '8px 16px', borderRadius: 20, border: 'none', background: activeFolderId === FOLDER_ALL ? accent : theme.sidebarBg, color: activeFolderId === FOLDER_ALL ? (theme.accentText || '#fff') : theme.textMuted, fontSize: 13, fontWeight: 600, cursor: 'pointer', whiteSpace: 'nowrap', transition: 'all 0.2s' }} onClick={() => { setFolderMenuChatId(null); setActiveFolderId(FOLDER_ALL); }}>Все чаты</button>\r\n          {folders.map((f) => (\r\n            <button key={f.id} type=\"button\" style={{ padding: '8px 16px', borderRadius: 20, border: 'none', background: activeFolderId === f.id ? accent : theme.sidebarBg, color: activeFolderId === f.id ? (theme.accentText || '#fff') : theme.textMuted, fontSize: 13, fontWeight: 600, cursor: 'pointer', whiteSpace: 'nowrap', transition: 'all 0.2s' }} onClick={() => { setFolderMenuChatId(null); setActiveFolderId(f.id); }}>{f.name}</button>\r\n          ))}\r\n        </div>\r\n        {/* Истории */}\r\n        <div style={{ padding: '12px 16px 8px', display: 'flex', gap: 12, overflowX: 'auto', flexShrink: 0, borderBottom: `1px solid ${theme.border}` }}>\r\n          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 6, flexShrink: 0, cursor: 'pointer' }}>\r\n            <div style={{ width: 62, height: 62, borderRadius: '50%', background: `linear-gradient(135deg, ${accent}, ${accent}dd)`, padding: 3, boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}` }}>\r\n              <div style={{ width: '100%', height: '100%', borderRadius: '50%', background: theme.sidebarBg, display: 'flex', alignItems: 'center', justifyContent: 'center', color: theme.text, fontSize: 24 }}>+</div>\r\n            </div>\r\n            <span style={{ fontSize: 11, color: theme.textMuted, fontWeight: 500 }}>Моя история</span>\r\n          </div>\r\n          {chatsByFolder.slice(0, 8).map((chat) => (\r\n            <div key={`story-${chat.id}`} style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 6, flexShrink: 0, cursor: 'pointer' }}>\r\n              <div style={{ width: 62, height: 62, borderRadius: '50%', background: `linear-gradient(135deg, ${accent}, ${accent}dd)`, padding: 3, boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}` }}>\r\n                <div style={{ width: '100%', height: '100%', borderRadius: '50%', background: theme.cardBg, display: 'flex', alignItems: 'center', justifyContent: 'center', overflow: 'hidden' }}>\r\n                  {chat.photo ? <img src={chat.photo} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} /> : <span style={{ fontSize: 20, fontWeight: 600, color: theme.text }}>{chat.name?.[0]?.toUpperCase() || '?'}</span>}\r\n                </div>\r\n              </div>\r\n              <span style={{ fontSize: 11, color: theme.textMuted, fontWeight: 500, maxWidth: 60, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{chat.name}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"scrollable\" style={s.chatList}>\r\n          {chatsByFolder.length === 0 && (\r\n            <div style={{ padding: 24, textAlign: 'center', color: theme.textMuted, fontSize: 15 }}>Нет чатов в этой папке</div>\r\n          )}\r\n          {chatsByFolder.map((chat) => (\r\n            <div\r\n              key={chat.id}\r\n              role=\"button\"\r\n              tabIndex={0}\r\n              onClick={() => { setFolderMenuChatId(null); setSelectedChat(chat); }}\r\n              onKeyDown={(e) => e.key === 'Enter' && setSelectedChat(chat)}\r\n              onMouseEnter={(e) => { if (selectedChat?.id !== chat.id) e.currentTarget.style.background = isDark ? 'rgba(255,255,255,.04)' : 'rgba(0,0,0,.03)'; }}\r\n              onMouseLeave={(e) => { if (selectedChat?.id !== chat.id) e.currentTarget.style.background = 'transparent'; }}\r\n              style={{ ...s.chatItem, ...(selectedChat?.id === chat.id ? s.chatItemActive : {}), position: 'relative' }}\r\n            >\r\n              <div style={s.avatar}>{chat.photo ? <img src={chat.photo} alt=\"\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} /> : (chat.type === 'channel' ? <IconChannel width={22} height={22} /> : (chat.name?.[0]?.toUpperCase() || '?'))}</div>\r\n              <div style={s.chatInfo}>\r\n                <div style={s.chatName}>{chat.name}</div>\r\n                <div style={{ ...s.lastMsg, ...(chat.unread > 0 ? { fontWeight: 500, color: theme.text } : {}) }}>{chat.lastMessage || (chat.type === 'channel' ? 'Канал' : 'Нет сообщений')}</div>\r\n              </div>\r\n              <div style={s.chatMeta}>\r\n                <span style={s.chatTime}>\r\n                  {chat.lastTime\r\n                    ? (() => {\r\n                        const d = new Date(chat.lastTime);\r\n                        const now = new Date();\r\n                        if (d.toDateString() === now.toDateString()) return d.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n                        if (d.getTime() > now.getTime() - 7 * 86400000) return d.toLocaleDateString('ru-RU', { weekday: 'short' });\r\n                        return d.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' });\r\n                      })()\r\n                    : ''}\r\n                </span>\r\n                {chat.unread > 0 && <span style={s.unreadBadge}>{chat.unread > 99 ? '99+' : chat.unread}</span>}\r\n              </div>\r\n              <button type=\"button\" data-folder-trigger aria-label=\"Папки\" style={{ border: 'none', background: 'transparent', color: theme.textMuted, padding: 6, borderRadius: 8, cursor: 'pointer', flexShrink: 0 }} onClick={(e) => { e.stopPropagation(); setFolderMenuChatId(folderMenuChatId === chat.id ? null : chat.id); }}>⋯</button>\r\n              {folderMenuChatId === chat.id && (\r\n                <div ref={folderMenuRef} style={{ position: 'absolute', right: 8, top: '100%', zIndex: 10, marginTop: 2, padding: 8, borderRadius: 12, background: theme.cardBg || theme.sidebarBg, boxShadow: '0 4px 12px rgba(0,0,0,.2)', minWidth: 180 }} onClick={(e) => e.stopPropagation()}>\r\n                  <div style={{ fontSize: 12, color: theme.textMuted, marginBottom: 6 }}>Добавить в папку</div>\r\n                  {folders.length === 0 ? <div style={{ fontSize: 13, color: theme.textMuted }}>Создайте папки в Настройках</div> : folders.map((f) => {\r\n                    const inFolder = (f.chatIds || []).includes(chat.id);\r\n                    return (\r\n                      <button key={f.id} type=\"button\" style={{ display: 'block', width: '100%', padding: '8px 10px', border: 'none', background: inFolder ? 'rgba(0,136,204,.15)' : 'transparent', color: theme.text, borderRadius: 8, cursor: 'pointer', textAlign: 'left', fontSize: 14 }} onClick={() => { if (inFolder) removeChatFromFolder(f.id, chat.id); else addChatToFolder(f.id, chat.id); setFoldersRefresh((k) => k + 1); }}>\r\n                        {inFolder ? '✓ ' : ''}{f.name}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Новое сообщение\"\r\n          onClick={() => setNewChatOpen(true)}\r\n          style={{\r\n            position: 'absolute',\r\n            bottom: 24,\r\n            right: 16,\r\n            width: 60,\r\n            height: 60,\r\n            borderRadius: 30,\r\n            border: 'none',\r\n            background: accent,\r\n            color: theme.accentText || '#fff',\r\n            boxShadow: `0 8px 32px ${theme.glow || 'rgba(10, 132, 255, .5)'}`,\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n          }}\r\n          onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.08)'}\r\n          onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n        >\r\n          <IconPen width={28} height={28} />\r\n        </button>\r\n      </div>\r\n      <div style={s.mainArea}>\r\n        {selectedChat ? <ChatView chat={selectedChat} onBack={() => setSelectedChat(null)} /> : (\r\n          <div style={s.empty}>\r\n            <div style={s.emptyIconWrap}>\r\n              <IconPen width={36} height={36} style={{ color: theme.textMuted }} />\r\n            </div>\r\n            <div style={s.emptyTitle}>Выберите чат</div>\r\n            <div style={s.emptySub}>Или нажмите кнопку с ручкой выше, чтобы начать новый диалог</div>\r\n            <div style={s.emptyTagline}>AIST — удобный, комфортный и безопасный мессенджер</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}