{"ast":null,"code":"/**\r\n * Папки чатов (как в Telegram). Хранение в localStorage.\r\n */const KEY='aist_chat_folders';export function getFolders(){try{const raw=localStorage.getItem(KEY);const list=raw?JSON.parse(raw):[];return Array.isArray(list)?list:[];}catch(_unused){return[];}}export function saveFolders(folders){try{localStorage.setItem(KEY,JSON.stringify(folders));}catch(_unused2){}}export function addFolder(name){const folders=getFolders();const id=\"folder_\".concat(Date.now(),\"_\").concat(Math.random().toString(36).slice(2,9));folders.push({id,name:(name||'').trim()||'Новая папка',chatIds:[]});saveFolders(folders);return id;}export function updateFolder(id,_ref){let{name,chatIds}=_ref;const folders=getFolders();const idx=folders.findIndex(f=>f.id===id);if(idx<0)return;if(name!==undefined)folders[idx].name=String(name).trim()||folders[idx].name;if(chatIds!==undefined)folders[idx].chatIds=Array.isArray(chatIds)?chatIds:folders[idx].chatIds;saveFolders(folders);}export function deleteFolder(id){const folders=getFolders().filter(f=>f.id!==id);saveFolders(folders);}export function addChatToFolder(folderId,chatId){const folders=getFolders();const folder=folders.find(f=>f.id===folderId);if(!folder||folder.chatIds.includes(chatId))return;folder.chatIds.push(chatId);saveFolders(folders);}export function removeChatFromFolder(folderId,chatId){const folders=getFolders();const folder=folders.find(f=>f.id===folderId);if(!folder)return;folder.chatIds=folder.chatIds.filter(id=>id!==chatId);saveFolders(folders);}export function getChatFolderIds(chatId){return getFolders().filter(f=>f.chatIds&&f.chatIds.includes(chatId)).map(f=>f.id);}","map":{"version":3,"names":["KEY","getFolders","raw","localStorage","getItem","list","JSON","parse","Array","isArray","_unused","saveFolders","folders","setItem","stringify","_unused2","addFolder","name","id","concat","Date","now","Math","random","toString","slice","push","trim","chatIds","updateFolder","_ref","idx","findIndex","f","undefined","String","deleteFolder","filter","addChatToFolder","folderId","chatId","folder","find","includes","removeChatFromFolder","getChatFolderIds","map"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/lib/folderStorage.js"],"sourcesContent":["/**\r\n * Папки чатов (как в Telegram). Хранение в localStorage.\r\n */\r\n\r\nconst KEY = 'aist_chat_folders';\r\n\r\nexport function getFolders() {\r\n  try {\r\n    const raw = localStorage.getItem(KEY);\r\n    const list = raw ? JSON.parse(raw) : [];\r\n    return Array.isArray(list) ? list : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveFolders(folders) {\r\n  try {\r\n    localStorage.setItem(KEY, JSON.stringify(folders));\r\n  } catch {}\r\n}\r\n\r\nexport function addFolder(name) {\r\n  const folders = getFolders();\r\n  const id = `folder_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;\r\n  folders.push({ id, name: (name || '').trim() || 'Новая папка', chatIds: [] });\r\n  saveFolders(folders);\r\n  return id;\r\n}\r\n\r\nexport function updateFolder(id, { name, chatIds }) {\r\n  const folders = getFolders();\r\n  const idx = folders.findIndex((f) => f.id === id);\r\n  if (idx < 0) return;\r\n  if (name !== undefined) folders[idx].name = String(name).trim() || folders[idx].name;\r\n  if (chatIds !== undefined) folders[idx].chatIds = Array.isArray(chatIds) ? chatIds : folders[idx].chatIds;\r\n  saveFolders(folders);\r\n}\r\n\r\nexport function deleteFolder(id) {\r\n  const folders = getFolders().filter((f) => f.id !== id);\r\n  saveFolders(folders);\r\n}\r\n\r\nexport function addChatToFolder(folderId, chatId) {\r\n  const folders = getFolders();\r\n  const folder = folders.find((f) => f.id === folderId);\r\n  if (!folder || folder.chatIds.includes(chatId)) return;\r\n  folder.chatIds.push(chatId);\r\n  saveFolders(folders);\r\n}\r\n\r\nexport function removeChatFromFolder(folderId, chatId) {\r\n  const folders = getFolders();\r\n  const folder = folders.find((f) => f.id === folderId);\r\n  if (!folder) return;\r\n  folder.chatIds = folder.chatIds.filter((id) => id !== chatId);\r\n  saveFolders(folders);\r\n}\r\n\r\nexport function getChatFolderIds(chatId) {\r\n  return getFolders().filter((f) => f.chatIds && f.chatIds.includes(chatId)).map((f) => f.id);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}