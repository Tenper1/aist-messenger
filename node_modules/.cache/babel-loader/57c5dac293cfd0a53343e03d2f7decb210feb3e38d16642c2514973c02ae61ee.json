{"ast":null,"code":"/**\r\n * PWA-уведомления. Запрос разрешения и показ уведомлений (в т.ч. для iOS).\r\n * Для полноценного push с сервера нужна подписка на push и бэкенд.\r\n */\n\nexport async function requestNotificationPermission() {\n  if (!('Notification' in window)) return 'unsupported';\n  if (Notification.permission === 'granted') return 'granted';\n  if (Notification.permission === 'denied') return 'denied';\n  const permission = await Notification.requestPermission();\n  return permission;\n}\nexport function showLocalNotification(title, options = {}) {\n  if (!('Notification' in window) || Notification.permission !== 'granted') return;\n  try {\n    const n = new Notification(title, {\n      icon: '/icon-192.png',\n      badge: '/icon-192.png',\n      ...options\n    });\n    n.onclick = () => {\n      window.focus();\n      n.close();\n    };\n  } catch (e) {\n    console.warn('Notification failed', e);\n  }\n}","map":{"version":3,"names":["requestNotificationPermission","window","Notification","permission","requestPermission","showLocalNotification","title","options","n","icon","badge","onclick","focus","close","e","console","warn"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/lib/notifications.js"],"sourcesContent":["/**\r\n * PWA-уведомления. Запрос разрешения и показ уведомлений (в т.ч. для iOS).\r\n * Для полноценного push с сервера нужна подписка на push и бэкенд.\r\n */\r\n\r\nexport async function requestNotificationPermission() {\r\n  if (!('Notification' in window)) return 'unsupported';\r\n  if (Notification.permission === 'granted') return 'granted';\r\n  if (Notification.permission === 'denied') return 'denied';\r\n  const permission = await Notification.requestPermission();\r\n  return permission;\r\n}\r\n\r\nexport function showLocalNotification(title, options = {}) {\r\n  if (!('Notification' in window) || Notification.permission !== 'granted') return;\r\n  try {\r\n    const n = new Notification(title, {\r\n      icon: '/icon-192.png',\r\n      badge: '/icon-192.png',\r\n      ...options,\r\n    });\r\n    n.onclick = () => {\r\n      window.focus();\r\n      n.close();\r\n    };\r\n  } catch (e) {\r\n    console.warn('Notification failed', e);\r\n  }\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,OAAO,eAAeA,6BAA6BA,CAAA,EAAG;EACpD,IAAI,EAAE,cAAc,IAAIC,MAAM,CAAC,EAAE,OAAO,aAAa;EACrD,IAAIC,YAAY,CAACC,UAAU,KAAK,SAAS,EAAE,OAAO,SAAS;EAC3D,IAAID,YAAY,CAACC,UAAU,KAAK,QAAQ,EAAE,OAAO,QAAQ;EACzD,MAAMA,UAAU,GAAG,MAAMD,YAAY,CAACE,iBAAiB,CAAC,CAAC;EACzD,OAAOD,UAAU;AACnB;AAEA,OAAO,SAASE,qBAAqBA,CAACC,KAAK,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACzD,IAAI,EAAE,cAAc,IAAIN,MAAM,CAAC,IAAIC,YAAY,CAACC,UAAU,KAAK,SAAS,EAAE;EAC1E,IAAI;IACF,MAAMK,CAAC,GAAG,IAAIN,YAAY,CAACI,KAAK,EAAE;MAChCG,IAAI,EAAE,eAAe;MACrBC,KAAK,EAAE,eAAe;MACtB,GAAGH;IACL,CAAC,CAAC;IACFC,CAAC,CAACG,OAAO,GAAG,MAAM;MAChBV,MAAM,CAACW,KAAK,CAAC,CAAC;MACdJ,CAAC,CAACK,KAAK,CAAC,CAAC;IACX,CAAC;EACH,CAAC,CAAC,OAAOC,CAAC,EAAE;IACVC,OAAO,CAACC,IAAI,CAAC,qBAAqB,EAAEF,CAAC,CAAC;EACxC;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}