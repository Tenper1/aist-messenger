{"ast":null,"code":"/**\n * E2E Encryption для AIST Messenger\n * - Сообщения шифруются локально перед отправкой\n * - Сервер только ретранслирует зашифрованные данные\n * - Ключи хранятся только на устройствах пользователей\n */\n\nconst KEY_STORAGE_PREFIX = 'aist_e2e_';\n\n// Генерация ключевой пары (RSA-OAEP)\nexport async function generateKeyPair() {\n  const keyPair = await window.crypto.subtle.generateKey({\n    name: 'RSA-OAEP',\n    modulusLength: 2048,\n    publicExponent: new Uint8Array([1, 0, 1]),\n    hash: 'SHA-256'\n  }, true, ['encrypt', 'decrypt']);\n  return keyPair;\n}\n\n// Экспорт публичного ключа в формате для отправки\nexport async function exportPublicKey(key) {\n  const exported = await window.crypto.subtle.exportKey('spki', key);\n  return btoa(String.fromCharCode(...new Uint8Array(exported)));\n}\n\n// Импорт публичного ключа другого пользователя\nexport async function importPublicKey(pem) {\n  const binaryDerString = atob(pem);\n  const binaryDer = new Uint8Array(binaryDerString.length);\n  for (let i = 0; i < binaryDerString.length; i++) {\n    binaryDer[i] = binaryDerString.charCodeAt(i);\n  }\n  return window.crypto.subtle.importKey('spki', binaryDer.buffer, {\n    name: 'RSA-OAEP',\n    hash: 'SHA-256'\n  }, true, ['encrypt']);\n}\n\n// Экспорт приватного ключа для хранения (зашифрованный паролем)\nexport async function exportPrivateKey(key, password) {\n  const exported = await window.crypto.subtle.exportKey('pkcs8', key);\n  const encoder = new TextEncoder();\n  const keyMaterial = await window.crypto.subtle.importKey('raw', encoder.encode(password), 'PBKDF2', false, ['deriveKey']);\n  const salt = window.crypto.getRandomValues(new Uint8Array(16));\n  const aesKey = await window.crypto.subtle.deriveKey({\n    name: 'PBKDF2',\n    salt: salt,\n    iterations: 100000,\n    hash: 'SHA-256'\n  }, keyMaterial, {\n    name: 'AES-GCM',\n    length: 256\n  }, true, ['encrypt', 'decrypt']);\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n  const encrypted = await window.crypto.subtle.encrypt({\n    name: 'AES-GCM',\n    iv: iv\n  }, aesKey, exported);\n  const combined = new Uint8Array(salt.length + iv.length + encrypted.length);\n  combined.set(salt, 0);\n  combined.set(iv, salt.length);\n  combined.set(encrypted, salt.length + iv.length);\n  return btoa(String.fromCharCode(...combined));\n}\n\n// Импорт приватного ключа из хранилища\nexport async function importPrivateKey(encryptedPem, password) {\n  const combined = new Uint8Array(atob(encryptedPem).split('').map(c => c.charCodeAt(0)));\n  const salt = combined.slice(0, 16);\n  const iv = combined.slice(16, 28);\n  const encrypted = combined.slice(28);\n  const encoder = new TextEncoder();\n  const keyMaterial = await window.crypto.subtle.importKey('raw', encoder.encode(password), 'PBKDF2', false, ['deriveKey']);\n  const aesKey = await window.crypto.subtle.deriveKey({\n    name: 'PBKDF2',\n    salt: salt,\n    iterations: 100000,\n    hash: 'SHA-256'\n  }, keyMaterial, {\n    name: 'AES-GCM',\n    length: 256\n  }, true, ['encrypt', 'decrypt']);\n  const decrypted = await window.crypto.subtle.decrypt({\n    name: 'AES-GCM',\n    iv: iv\n  }, aesKey, encrypted);\n  return window.crypto.subtle.importKey('pkcs8', decrypted, {\n    name: 'RSA-OAEP',\n    hash: 'SHA-256'\n  }, true, ['decrypt']);\n}\n\n// Шифрование сообщения для получателя\nexport async function encryptMessage(message, publicKey) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(message);\n  const encrypted = await window.crypto.subtle.encrypt({\n    name: 'RSA-OAEP'\n  }, publicKey, data);\n  return btoa(String.fromCharCode(...new Uint8Array(encrypted)));\n}\n\n// Расшифрование сообщения от отправителя\nexport async function decryptMessage(encryptedBase64, privateKey) {\n  try {\n    const encrypted = new Uint8Array(atob(encryptedBase64).split('').map(c => c.charCodeAt(0)));\n    const decrypted = await window.crypto.subtle.decrypt({\n      name: 'RSA-OAEP'\n    }, privateKey, encrypted);\n    const decoder = new TextDecoder();\n    return decoder.decode(decrypted);\n  } catch (e) {\n    console.error('Decryption failed:', e);\n    return '[Зашифрованное сообщение]';\n  }\n}\n\n// Сохранение ключевой пары в IndexedDB\nexport async function storeKeyPair(keyPair, password) {\n  const publicKeyPem = await exportPublicKey(keyPair.publicKey);\n  const privateKeyPem = await exportPrivateKey(keyPair.privateKey, password);\n  localStorage.setItem(`${KEY_STORAGE_PREFIX}public`, publicKeyPem);\n  localStorage.setItem(`${KEY_STORAGE_PREFIX}private`, privateKeyPem);\n  return publicKeyPem;\n}\n\n// Загрузка ключевой пары из IndexedDB\nexport async function loadKeyPair(password) {\n  const publicKeyPem = localStorage.getItem(`${KEY_STORAGE_PREFIX}public`);\n  const privateKeyPem = localStorage.getItem(`${KEY_STORAGE_PREFIX}private`);\n  if (!publicKeyPem || !privateKeyPem) return null;\n  try {\n    const privateKey = await importPrivateKey(privateKeyPem, password);\n    const publicKey = await importPublicKey(publicKeyPem);\n    return {\n      publicKey,\n      privateKey\n    };\n  } catch (e) {\n    console.error('Failed to load key pair:', e);\n    return null;\n  }\n}\n\n// Проверка наличия ключей\nexport function hasKeys() {\n  return !!localStorage.getItem(`${KEY_STORAGE_PREFIX}public`);\n}\n\n// Удаление ключей\nexport function clearKeys() {\n  localStorage.removeItem(`${KEY_STORAGE_PREFIX}public`);\n  localStorage.removeItem(`${KEY_STORAGE_PREFIX}private`);\n}\n\n// Генерация общего ключа для чата (опционально для групповых чатов)\nexport async function generateSharedKey() {\n  const key = await window.crypto.subtle.generateKey({\n    name: 'AES-GCM',\n    length: 256\n  }, true, ['encrypt', 'decrypt']);\n  return key;\n}\n\n// Шифрование через AES-GCM (для групповых чатов)\nexport async function encryptAES(message, key) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(message);\n  const iv = window.crypto.subtle.getRandomValues(new Uint8Array(12));\n  const encrypted = await window.crypto.subtle.encrypt({\n    name: 'AES-GCM',\n    iv: iv\n  }, key, data);\n  const combined = new Uint8Array(iv.length + encrypted.length);\n  combined.set(iv, 0);\n  combined.set(encrypted, iv.length);\n  return btoa(String.fromCharCode(...combined));\n}\n\n// Расшифрование через AES-GCM\nexport async function decryptAES(encryptedBase64, key) {\n  try {\n    const combined = new Uint8Array(atob(encryptedBase64).split('').map(c => c.charCodeAt(0)));\n    const iv = combined.slice(0, 12);\n    const encrypted = combined.slice(12);\n    const decrypted = await window.crypto.subtle.decrypt({\n      name: 'AES-GCM',\n      iv: iv\n    }, key, encrypted);\n    const decoder = new TextDecoder();\n    return decoder.decode(decrypted);\n  } catch (e) {\n    console.error('AES decryption failed:', e);\n    return '[Зашифрованное сообщение]';\n  }\n}","map":{"version":3,"names":["KEY_STORAGE_PREFIX","generateKeyPair","keyPair","window","crypto","subtle","generateKey","name","modulusLength","publicExponent","Uint8Array","hash","exportPublicKey","key","exported","exportKey","btoa","String","fromCharCode","importPublicKey","pem","binaryDerString","atob","binaryDer","length","i","charCodeAt","importKey","buffer","exportPrivateKey","password","encoder","TextEncoder","keyMaterial","encode","salt","getRandomValues","aesKey","deriveKey","iterations","iv","encrypted","encrypt","combined","set","importPrivateKey","encryptedPem","split","map","c","slice","decrypted","decrypt","encryptMessage","message","publicKey","data","decryptMessage","encryptedBase64","privateKey","decoder","TextDecoder","decode","e","console","error","storeKeyPair","publicKeyPem","privateKeyPem","localStorage","setItem","loadKeyPair","getItem","hasKeys","clearKeys","removeItem","generateSharedKey","encryptAES","decryptAES"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/lib/e2eCrypto.js"],"sourcesContent":["/**\n * E2E Encryption для AIST Messenger\n * - Сообщения шифруются локально перед отправкой\n * - Сервер только ретранслирует зашифрованные данные\n * - Ключи хранятся только на устройствах пользователей\n */\n\nconst KEY_STORAGE_PREFIX = 'aist_e2e_';\n\n// Генерация ключевой пары (RSA-OAEP)\nexport async function generateKeyPair() {\n  const keyPair = await window.crypto.subtle.generateKey(\n    {\n      name: 'RSA-OAEP',\n      modulusLength: 2048,\n      publicExponent: new Uint8Array([1, 0, 1]),\n      hash: 'SHA-256',\n    },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  return keyPair;\n}\n\n// Экспорт публичного ключа в формате для отправки\nexport async function exportPublicKey(key) {\n  const exported = await window.crypto.subtle.exportKey('spki', key);\n  return btoa(String.fromCharCode(...new Uint8Array(exported)));\n}\n\n// Импорт публичного ключа другого пользователя\nexport async function importPublicKey(pem) {\n  const binaryDerString = atob(pem);\n  const binaryDer = new Uint8Array(binaryDerString.length);\n  for (let i = 0; i < binaryDerString.length; i++) {\n    binaryDer[i] = binaryDerString.charCodeAt(i);\n  }\n  return window.crypto.subtle.importKey(\n    'spki',\n    binaryDer.buffer,\n    { name: 'RSA-OAEP', hash: 'SHA-256' },\n    true,\n    ['encrypt']\n  );\n}\n\n// Экспорт приватного ключа для хранения (зашифрованный паролем)\nexport async function exportPrivateKey(key, password) {\n  const exported = await window.crypto.subtle.exportKey('pkcs8', key);\n  const encoder = new TextEncoder();\n  const keyMaterial = await window.crypto.subtle.importKey(\n    'raw',\n    encoder.encode(password),\n    'PBKDF2',\n    false,\n    ['deriveKey']\n  );\n  const salt = window.crypto.getRandomValues(new Uint8Array(16));\n  const aesKey = await window.crypto.subtle.deriveKey(\n    {\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: 100000,\n      hash: 'SHA-256',\n    },\n    keyMaterial,\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n  const encrypted = await window.crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv: iv },\n    aesKey,\n    exported\n  );\n  const combined = new Uint8Array(salt.length + iv.length + encrypted.length);\n  combined.set(salt, 0);\n  combined.set(iv, salt.length);\n  combined.set(encrypted, salt.length + iv.length);\n  return btoa(String.fromCharCode(...combined));\n}\n\n// Импорт приватного ключа из хранилища\nexport async function importPrivateKey(encryptedPem, password) {\n  const combined = new Uint8Array(\n    atob(encryptedPem).split('').map(c => c.charCodeAt(0))\n  );\n  const salt = combined.slice(0, 16);\n  const iv = combined.slice(16, 28);\n  const encrypted = combined.slice(28);\n  const encoder = new TextEncoder();\n  const keyMaterial = await window.crypto.subtle.importKey(\n    'raw',\n    encoder.encode(password),\n    'PBKDF2',\n    false,\n    ['deriveKey']\n  );\n  const aesKey = await window.crypto.subtle.deriveKey(\n    {\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: 100000,\n      hash: 'SHA-256',\n    },\n    keyMaterial,\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  const decrypted = await window.crypto.subtle.decrypt(\n    { name: 'AES-GCM', iv: iv },\n    aesKey,\n    encrypted\n  );\n  return window.crypto.subtle.importKey(\n    'pkcs8',\n    decrypted,\n    { name: 'RSA-OAEP', hash: 'SHA-256' },\n    true,\n    ['decrypt']\n  );\n}\n\n// Шифрование сообщения для получателя\nexport async function encryptMessage(message, publicKey) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(message);\n  const encrypted = await window.crypto.subtle.encrypt(\n    { name: 'RSA-OAEP' },\n    publicKey,\n    data\n  );\n  return btoa(String.fromCharCode(...new Uint8Array(encrypted)));\n}\n\n// Расшифрование сообщения от отправителя\nexport async function decryptMessage(encryptedBase64, privateKey) {\n  try {\n    const encrypted = new Uint8Array(\n      atob(encryptedBase64).split('').map(c => c.charCodeAt(0))\n    );\n    const decrypted = await window.crypto.subtle.decrypt(\n      { name: 'RSA-OAEP' },\n      privateKey,\n      encrypted\n    );\n    const decoder = new TextDecoder();\n    return decoder.decode(decrypted);\n  } catch (e) {\n    console.error('Decryption failed:', e);\n    return '[Зашифрованное сообщение]';\n  }\n}\n\n// Сохранение ключевой пары в IndexedDB\nexport async function storeKeyPair(keyPair, password) {\n  const publicKeyPem = await exportPublicKey(keyPair.publicKey);\n  const privateKeyPem = await exportPrivateKey(keyPair.privateKey, password);\n  \n  localStorage.setItem(`${KEY_STORAGE_PREFIX}public`, publicKeyPem);\n  localStorage.setItem(`${KEY_STORAGE_PREFIX}private`, privateKeyPem);\n  \n  return publicKeyPem;\n}\n\n// Загрузка ключевой пары из IndexedDB\nexport async function loadKeyPair(password) {\n  const publicKeyPem = localStorage.getItem(`${KEY_STORAGE_PREFIX}public`);\n  const privateKeyPem = localStorage.getItem(`${KEY_STORAGE_PREFIX}private`);\n  \n  if (!publicKeyPem || !privateKeyPem) return null;\n  \n  try {\n    const privateKey = await importPrivateKey(privateKeyPem, password);\n    const publicKey = await importPublicKey(publicKeyPem);\n    return { publicKey, privateKey };\n  } catch (e) {\n    console.error('Failed to load key pair:', e);\n    return null;\n  }\n}\n\n// Проверка наличия ключей\nexport function hasKeys() {\n  return !!localStorage.getItem(`${KEY_STORAGE_PREFIX}public`);\n}\n\n// Удаление ключей\nexport function clearKeys() {\n  localStorage.removeItem(`${KEY_STORAGE_PREFIX}public`);\n  localStorage.removeItem(`${KEY_STORAGE_PREFIX}private`);\n}\n\n// Генерация общего ключа для чата (опционально для групповых чатов)\nexport async function generateSharedKey() {\n  const key = await window.crypto.subtle.generateKey(\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt']\n  );\n  return key;\n}\n\n// Шифрование через AES-GCM (для групповых чатов)\nexport async function encryptAES(message, key) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(message);\n  const iv = window.crypto.subtle.getRandomValues(new Uint8Array(12));\n  const encrypted = await window.crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv: iv },\n    key,\n    data\n  );\n  const combined = new Uint8Array(iv.length + encrypted.length);\n  combined.set(iv, 0);\n  combined.set(encrypted, iv.length);\n  return btoa(String.fromCharCode(...combined));\n}\n\n// Расшифрование через AES-GCM\nexport async function decryptAES(encryptedBase64, key) {\n  try {\n    const combined = new Uint8Array(\n      atob(encryptedBase64).split('').map(c => c.charCodeAt(0))\n    );\n    const iv = combined.slice(0, 12);\n    const encrypted = combined.slice(12);\n    const decrypted = await window.crypto.subtle.decrypt(\n      { name: 'AES-GCM', iv: iv },\n      key,\n      encrypted\n    );\n    const decoder = new TextDecoder();\n    return decoder.decode(decrypted);\n  } catch (e) {\n    console.error('AES decryption failed:', e);\n    return '[Зашифрованное сообщение]';\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}