{"ast":null,"code":"import _objectSpread from\"C:/Users/Vladislav/Documents/GitHub/aist-messenger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useMemo,useEffect,useCallback,useRef}from'react';import{useNavigate,useLocation}from'react-router-dom';import{useTheme}from'../context/ThemeContext';import{useUser}from'../context/UserContext';import{IconBack,IconSearch,IconPen,IconChannel,IconChevronRight,IconPhone,IconVideo,IconAttach,IconSend,IconSmile,IconMore,IconStories,IconGallery,IconContacts,IconCheck,IconCheckDouble,IconCopy,IconDelete,IconReply,IconForward,IconPin,IconMute}from'./Icons';import CallScreen from'./CallScreen';import{getChatList,saveChatList,getMessages,appendMessage,saveMessages,addOrUpdateChat,createChat,getChannelMeta,saveChannelMeta}from'../lib/chatStorage';import{apiGetChats,apiGetMessages,apiSendMessage,apiCreateChat}from'../lib/api';import{getFolders,addChatToFolder,removeChatFromFolder,getChatFolderIds}from'../lib/folderStorage';import{connectChatWebSocket,disconnect,addListener,removeListener}from'../lib/chatWebSocket';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const APP_DOMAIN='https://aist-messenger.vercel.app';const FOLDER_ALL='all';function ChatView(_ref){let{chat,onBack}=_ref;const{theme,chatBg,isDark}=useTheme();const{displayName}=useUser();const accent=typeof theme.accent==='string'?theme.accent:'#0a84ff';const[messages,setMessages]=useState([]);const[inputValue,setInputValue]=useState('');const[attachPreview,setAttachPreview]=useState(null);const[callMode,setCallMode]=useState(null);const[showChannelInfo,setShowChannelInfo]=useState(false);const isMobile=typeof window!=='undefined'&&window.matchMedia('(max-width: 768px)').matches;const messagesAreaBg=chatBg||(isDark?'#0d1218':'#e8eef5');const channelMeta=chat.type==='channel'?getChannelMeta(chat.id):null;const channelLink=(channelMeta===null||channelMeta===void 0?void 0:channelMeta.shareLink)||\"\".concat(APP_DOMAIN,\"/c/\").concat(chat.id);// Локальное хранение: сначала показываем с устройства, затем синхронизируем с сервером при открытии\nuseEffect(()=>{setMessages(getMessages(chat.id));let cancelled=false;(async()=>{const fromApi=await apiGetMessages(chat.id);if(cancelled)return;if(Array.isArray(fromApi)){const merged=saveMessages(chat.id,fromApi);setMessages(merged);}})();return()=>{cancelled=true;};},[chat.id]);// WebSocket для получения сообщений в реальном времени\nuseEffect(()=>{const handleMessage=data=>{if(data.type==='new_message'&&data.chatId===chat.id){const newMsg=data.message;if(newMsg){setMessages(prev=>{const exists=prev.some(m=>m.id===newMsg.id);if(exists)return prev;const updated=[...prev,newMsg];saveMessages(chat.id,updated);return updated;});}}};addListener(handleMessage);return()=>removeListener(handleMessage);},[chat.id]);const sendMessage=useCallback(async textOrAttachment=>{const isAttach=typeof textOrAttachment==='object';const text=isAttach?textOrAttachment.caption||'':(textOrAttachment||'').trim();const attachment=isAttach?textOrAttachment:null;if(!text&&!attachment)return;const localId=\"m_\".concat(Date.now(),\"_\").concat(Math.random().toString(36).slice(2,9));const localMsg={id:localId,fromMe:true,text:text||(attachment?attachment.type==='image'?'Фото':'Видео':''),time:new Date().toISOString(),senderName:displayName||'Вы',attachment:attachment?{type:attachment.type,url:attachment.url}:undefined};// Сначала сохраняем на устройстве и сразу показываем\nconst next=appendMessage(chat.id,localMsg);setMessages(next);setInputValue('');setAttachPreview(null);addOrUpdateChat(_objectSpread(_objectSpread({},chat),{},{lastMessage:text||'Медиа',lastTime:Date.now()}));// Затем отправляем на сервер для синхронизации с другими устройствами\nconst fromApi=await apiSendMessage(chat.id,{text:localMsg.text,attachment:attachment?{type:attachment.type,url:attachment.url}:null});if(fromApi&&fromApi.id!==localId){const list=getMessages(chat.id);const idx=list.findIndex(m=>m.id===localId);if(idx>=0){const updated=[...list];updated[idx]=_objectSpread(_objectSpread({},list[idx]),{},{id:fromApi.id,time:fromApi.time||list[idx].time});saveMessages(chat.id,updated);setMessages(updated);}}},[chat,displayName]);const MAX_FILE_MB=16;const ALLOWED_IMAGE=['image/jpeg','image/png','image/gif','image/webp'];const ALLOWED_VIDEO=['video/mp4','video/webm'];const onAttach=e=>{var _e$target$files;const f=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!f)return;const sizeMB=f.size/(1024*1024);if(sizeMB>MAX_FILE_MB)return;if(ALLOWED_IMAGE.includes(f.type)){const r=new FileReader();r.onload=()=>setAttachPreview({type:'image',url:r.result});r.readAsDataURL(f);}else if(ALLOWED_VIDEO.includes(f.type)){const r=new FileReader();r.onload=()=>setAttachPreview({type:'video',url:r.result});r.readAsDataURL(f);}};const bubbleIn=theme.bubbleIn||(isDark?'rgba(32, 42, 58, .88)':'rgba(255,255,255,.92)');const bubbleOut=theme.bubbleOut||accent;const bubbleStyleIn={padding:'14px 18px 12px 18px',borderRadius:'22px 22px 22px 8px',background:bubbleIn,color:theme.text,fontSize:15,lineHeight:1.5,maxWidth:'100%',boxShadow:isDark?'0 4px 16px rgba(0,0,0,.3)':'0 4px 16px rgba(0,0,0,.1)',backdropFilter:'blur(20px) saturate(160%)',WebkitBackdropFilter:'blur(20px) saturate(160%)',border:\"1px solid \".concat(theme.cardBorder||'transparent')};const bubbleStyleOut=_objectSpread(_objectSpread({},bubbleStyleIn),{},{borderRadius:'22px 22px 8px 22px',background:bubbleOut,color:theme.accentText||'#fff',boxShadow:\"0 6px 20px \".concat(theme.glow||'rgba(10, 132, 255, .4)'),border:'none'});const formatDateKey=t=>new Date(t).toDateString();const messagesWithDates=useMemo(()=>{const out=[];let lastDate=null;messages.forEach(m=>{const d=formatDateKey(m.time);if(d!==lastDate){lastDate=d;out.push({type:'date',key:\"date-\".concat(d),date:m.time});}out.push(m);});return out;},[messages]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',height:'100%'},children:[/*#__PURE__*/_jsxs(\"header\",{style:{height:64,padding:'0 8px 0 4px',display:'flex',alignItems:'center',gap:6,background:theme.headerBg,backdropFilter:'blur(24px) saturate(180%)',WebkitBackdropFilter:'blur(24px) saturate(180%)',borderBottom:\"1px solid \".concat(theme.border),boxShadow:isDark?'0 4px 20px rgba(0,0,0,.15)':'0 4px 20px rgba(0,0,0,.06)'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',color:accent,padding:10,cursor:'pointer',display:isMobile?'flex':'none',alignItems:'center',justifyContent:'center',borderRadius:12,transition:'all 0.2s'},onClick:onBack,\"aria-label\":\"\\u041D\\u0430\\u0437\\u0430\\u0434\",children:/*#__PURE__*/_jsx(IconBack,{width:24,height:24})}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>chat.type==='channel'&&setShowChannelInfo(true),style:{flex:1,border:'none',background:'transparent',padding:'10px 12px',cursor:chat.type==='channel'?'pointer':'default',textAlign:'left',minWidth:0,borderRadius:12,transition:'background 0.2s'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:18,color:theme.text,display:'block',letterSpacing:'-0.3px'},children:chat.name}),chat.type!=='channel'&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:13,color:theme.textMuted,fontWeight:500},children:\"\\u043E\\u043D\\u043B\\u0430\\u0439\\u043D\"})]}),chat.type!=='channel'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',padding:10,color:theme.textMuted,cursor:'pointer',borderRadius:12,transition:'all 0.2s'},\"aria-label\":\"\\u0413\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u043E\\u0439 \\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\",onClick:()=>setCallMode('voice'),children:/*#__PURE__*/_jsx(IconPhone,{width:22,height:22})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',padding:10,color:theme.textMuted,cursor:'pointer',borderRadius:12,transition:'all 0.2s'},\"aria-label\":\"\\u0412\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\",onClick:()=>setCallMode('video'),children:/*#__PURE__*/_jsx(IconVideo,{width:22,height:22})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',padding:10,color:theme.textMuted,cursor:'pointer',borderRadius:12,transition:'all 0.2s'},\"aria-label\":\"\\u0415\\u0449\\u0451\",children:/*#__PURE__*/_jsx(IconMore,{width:22,height:22})})]})]}),showChannelInfo&&channelMeta&&/*#__PURE__*/_jsx(\"div\",{role:\"dialog\",\"aria-modal\":\"true\",\"aria-label\":\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u043A\\u0430\\u043D\\u0430\\u043B\\u0435\",style:{position:'fixed',inset:0,zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center',padding:16,background:'rgba(0,0,0,.6)',backdropFilter:'blur(8px)'},onClick:()=>setShowChannelInfo(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:theme.cardBg,borderRadius:20,padding:24,maxWidth:380,width:'100%',border:\"1px solid \".concat(theme.cardBorder),boxShadow:'0 16px 48px rgba(0,0,0,.3)',backdropFilter:'blur(20px) saturate(140%)',WebkitBackdropFilter:'blur(20px) saturate(140%)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:20,fontWeight:700,marginBottom:14,color:theme.text},children:chat.name}),channelMeta.description?/*#__PURE__*/_jsx(\"p\",{style:{fontSize:15,color:theme.textMuted,marginBottom:16,whiteSpace:'pre-wrap',lineHeight:1.5},children:channelMeta.description}):null,/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,color:theme.textMuted,marginBottom:10},children:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u043D\\u0430\\u043B:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:10,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{readOnly:true,value:channelLink,style:{flex:1,padding:'10px 14px',borderRadius:12,border:\"1px solid \".concat(theme.border),background:theme.inputBg,color:theme.text,fontSize:14}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _navigator$clipboard;(_navigator$clipboard=navigator.clipboard)===null||_navigator$clipboard===void 0?void 0:_navigator$clipboard.writeText(channelLink);},style:{padding:'10px 18px',borderRadius:12,border:'none',background:accent,color:theme.accentText||'#fff',cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 4px 12px rgba(10, 132, 255, .3)'},children:\"\\u041A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowChannelInfo(false),style:{marginTop:20,width:'100%',padding:12,borderRadius:12,border:'none',background:theme.sidebarBg,color:theme.text,cursor:'pointer',fontSize:15,fontWeight:600},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})}),callMode&&/*#__PURE__*/_jsx(CallScreen,{peerName:chat.name,isVideo:callMode==='video',onEnd:()=>setCallMode(null),peerUserId:chat.peerUserId||chat.otherUserId}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',padding:'14px 20px 20px',display:'flex',flexDirection:'column',gap:8,background:messagesAreaBg},children:[messages.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:theme.textMuted,fontSize:15,textAlign:'center',padding:'60px 20px'},children:\"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"}),messagesWithDates.map(item=>{var _m$attachment;if(item.type==='date'){const label=new Date(item.date).toLocaleDateString('ru-RU',{day:'numeric',month:'long',year:'numeric'});return/*#__PURE__*/_jsx(\"div\",{style:{alignSelf:'center',margin:'16px 0 8px',padding:'6px 16px',borderRadius:12,background:isDark?'rgba(255,255,255,.08)':'rgba(0,0,0,.06)',fontSize:13,color:theme.textMuted,fontWeight:600,backdropFilter:'blur(10px)'},children:label},item.key);}const m=item;const timeStr=new Date(m.time).toLocaleTimeString('ru-RU',{hour:'2-digit',minute:'2-digit'});return/*#__PURE__*/_jsxs(\"div\",{style:{alignSelf:m.fromMe?'flex-end':'flex-start',maxWidth:'82%',display:'flex',flexDirection:'column',alignItems:m.fromMe?'flex-end':'flex-start'},children:[!m.fromMe&&chat.type==='group'&&m.senderName&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:theme.textMuted,marginBottom:2,marginLeft:4},children:m.senderName}),((_m$attachment=m.attachment)===null||_m$attachment===void 0?void 0:_m$attachment.url)&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:2,borderRadius:12,overflow:'hidden',boxShadow:'0 1px 3px rgba(0,0,0,.2)'},children:m.attachment.type==='image'?/*#__PURE__*/_jsx(\"img\",{src:m.attachment.url,alt:\"\",style:{maxWidth:260,maxHeight:260,display:'block'}}):/*#__PURE__*/_jsx(\"video\",{src:m.attachment.url,controls:true,style:{maxWidth:260,maxHeight:180}})}),/*#__PURE__*/_jsxs(\"div\",{style:m.fromMe?bubbleStyleOut:bubbleStyleIn,children:[m.text?/*#__PURE__*/_jsx(\"span\",{style:{display:'block',marginBottom:2},children:m.text}):null,/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.8},children:timeStr})]})]},m.id);})]}),attachPreview&&/*#__PURE__*/_jsx(\"div\",{style:{padding:12,borderTop:\"1px solid \".concat(theme.border),background:theme.headerBg,backdropFilter:'blur(20px)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',display:'inline-block'},children:[attachPreview.type==='image'?/*#__PURE__*/_jsx(\"img\",{src:attachPreview.url,alt:\"\",style:{maxHeight:140,borderRadius:12,boxShadow:'0 4px 12px rgba(0,0,0,.15)'}}):/*#__PURE__*/_jsx(\"video\",{src:attachPreview.url,style:{maxHeight:140,borderRadius:12,boxShadow:'0 4px 12px rgba(0,0,0,.15)'}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setAttachPreview(null),style:{position:'absolute',top:8,right:8,border:'none',background:'rgba(0,0,0,.6)',color:'#fff',borderRadius:50,width:28,height:28,cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',fontSize:16},children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px 16px 14px',borderTop:\"1px solid \".concat(theme.border),background:theme.headerBg,backdropFilter:'blur(24px) saturate(180%)',WebkitBackdropFilter:'blur(24px) saturate(180%)',display:'flex',gap:10,alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{cursor:'pointer',color:theme.textMuted,padding:8,flexShrink:0,borderRadius:14,transition:'all 0.2s'},\"aria-label\":\"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",onMouseEnter:e=>e.currentTarget.style.background=isDark?'rgba(255,255,255,.06)':'rgba(0,0,0,.04)',onMouseLeave:e=>e.currentTarget.style.background='transparent',children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*,video/*,.pdf,.doc,.docx\",style:{display:'none'},onChange:onAttach}),/*#__PURE__*/_jsx(IconAttach,{width:24,height:24})]}),/*#__PURE__*/_jsx(\"input\",{style:{flex:1,minWidth:0,padding:'14px 20px',borderRadius:26,border:'none',background:theme.messageInputBg||theme.inputBg,color:theme.text,fontSize:15,outline:'none',transition:'all 0.2s',boxShadow:isDark?'0 2px 8px rgba(0,0,0,.15)':'0 2px 8px rgba(0,0,0,.05)'},placeholder:\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",value:inputValue,onChange:e=>setInputValue(e.target.value),onKeyDown:e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();if(attachPreview)sendMessage(_objectSpread(_objectSpread({},attachPreview),{},{caption:inputValue}));else sendMessage(inputValue);}}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>attachPreview?sendMessage(_objectSpread(_objectSpread({},attachPreview),{},{caption:inputValue})):sendMessage(inputValue),style:{width:48,height:48,minWidth:48,minHeight:48,flexShrink:0,padding:0,borderRadius:'50%',border:'none',background:accent,color:theme.accentText||'#fff',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',fontSize:18,boxShadow:\"0 6px 20px \".concat(theme.glow||'rgba(10, 132, 255, .4)'),transition:'all 0.2s'},\"aria-label\":\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",children:/*#__PURE__*/_jsx(IconSend,{width:22,height:22})})]})]});}export default function Chats(){var _location$state2;const navigate=useNavigate();const location=useLocation();const{theme}=useTheme();const{token}=useUser();const[chatList,setChatList]=useState(getChatList);const[selectedChat,setSelectedChat]=useState(null);const[searchQuery,setSearchQuery]=useState('');const[newChatOpen,setNewChatOpen]=useState(false);const[activeFolderId,setActiveFolderId]=useState(FOLDER_ALL);const[foldersRefresh,setFoldersRefresh]=useState(0);const[folderMenuChatId,setFolderMenuChatId]=useState(null);const folderMenuRef=useRef(null);const folders=useMemo(()=>getFolders(),[foldersRefresh]);useEffect(()=>{if(!folderMenuChatId)return;const onDocClick=e=>{var _folderMenuRef$curren;if((_folderMenuRef$curren=folderMenuRef.current)!==null&&_folderMenuRef$curren!==void 0&&_folderMenuRef$curren.contains(e.target)||e.target.closest('[data-folder-trigger]'))return;setFolderMenuChatId(null);};document.addEventListener('click',onDocClick);return()=>document.removeEventListener('click',onDocClick);},[folderMenuChatId]);useEffect(()=>{var _location$state;const id=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.openChatId;if(id){const c=getChatList().find(ch=>ch.id===id);if(c)setSelectedChat(c);navigate('/messenger',{replace:true,state:{}});}},[(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.openChatId,navigate]);const refreshList=useCallback(async()=>{const fromApi=await apiGetChats();if(Array.isArray(fromApi)&&fromApi.length>=0){try{saveChatList(fromApi);}catch(_unused){}setChatList(fromApi);return;}setChatList(getChatList());},[]);useEffect(()=>{refreshList();},[refreshList]);// Синхронизация при возврате на вкладку (другое устройство могло отправить сообщения)\nuseEffect(()=>{const onVisible=()=>refreshList();document.addEventListener('visibilitychange',onVisible);return()=>document.removeEventListener('visibilitychange',onVisible);},[refreshList]);const filteredChats=useMemo(()=>{const q=searchQuery.trim().toLowerCase().replace(/^@/,'');if(!q)return chatList;return chatList.filter(c=>c.name&&c.name.toLowerCase().includes(q)||c.username&&c.username.toLowerCase().includes(q));},[chatList,searchQuery]);const chatsByFolder=useMemo(()=>{var _folder$chatIds;if(activeFolderId===FOLDER_ALL)return filteredChats;const folder=folders.find(f=>f.id===activeFolderId);if(!(folder!==null&&folder!==void 0&&(_folder$chatIds=folder.chatIds)!==null&&_folder$chatIds!==void 0&&_folder$chatIds.length))return[];return filteredChats.filter(c=>folder.chatIds.includes(c.id));},[activeFolderId,filteredChats,folders]);const createNewChat=async type=>{if(type==='channel'){setNewChatOpen(false);navigate('/messenger/new-channel');return;}if(type==='group'){setNewChatOpen(false);navigate('/messenger/new-group');return;}const name=window.prompt('Введите ник @ или имя пользователя');if(!(name!==null&&name!==void 0&&name.trim()))return;const peerUsername=name.trim().replace(/^@/,'');const created=await apiCreateChat({name:name.trim(),type:'user',peerUsername});if(created!==null&&created!==void 0&&created.id){addOrUpdateChat({id:created.id,name:created.name||name.trim(),type:'user',lastMessage:'',lastTime:null,unread:0,peerUserId:created.peerUserId});await refreshList();setSelectedChat(created);setNewChatOpen(false);}else{window.alert('Пользователь с таким ником не найден. Убедитесь, что он зарегистрирован в AIST и указал никнейм в настройках.');}};useEffect(()=>{if(!selectedChat)refreshList();},[selectedChat,refreshList]);const isMobile=typeof window!=='undefined'&&window.matchMedia('(max-width: 768px)').matches;const showListOnly=isMobile&&selectedChat;const isDark=typeof window!=='undefined'&&window.matchMedia('(prefers-color-scheme: dark)').matches;const accent=typeof theme.accent==='string'?theme.accent:'#0a84ff';// Двухколоночный макет: слева — только список чатов, справа — окно чата (как в Telegram Desktop)\nconst s={container:{display:'flex',flexDirection:'row',height:'100%',minHeight:0,background:theme.pageBg},header:{height:64,padding:'0 16px',display:'flex',alignItems:'center',justifyContent:'space-between',background:theme.headerBg,backdropFilter:'blur(24px) saturate(180%)',WebkitBackdropFilter:'blur(24px) saturate(180%)',borderBottom:\"1px solid \".concat(theme.border),boxShadow:isDark?'0 4px 20px rgba(0,0,0,.15)':'0 4px 20px rgba(0,0,0,.06)'},headerTitle:{fontSize:24,fontWeight:700,color:theme.text,letterSpacing:'-0.5px'},search:{padding:'12px 16px 14px'},searchInput:{width:'100%',padding:'14px 18px 14px 50px',borderRadius:24,border:'none',background:theme.inputBg,color:theme.text,fontSize:15,outline:'none',transition:'all 0.2s',boxShadow:isDark?'0 2px 8px rgba(0,0,0,.15)':'0 2px 8px rgba(0,0,0,.05)'},searchWrap:{position:'relative'},searchIcon:{position:'absolute',left:18,top:'50%',transform:'translateY(-50%)',color:theme.textMuted,pointerEvents:'none'},sidebar:{width:400,minWidth:320,maxWidth:480,flexShrink:0,background:theme.sidebarBg,display:'flex',flexDirection:'column',overflow:'hidden',position:'relative',borderRight:\"1px solid \".concat(theme.border),backdropFilter:'blur(24px) saturate(160%)',WebkitBackdropFilter:'blur(24px) saturate(160%)'},chatList:{flex:1,overflowY:'auto',overflowX:'hidden'},chatItem:{padding:'14px 16px',display:'flex',alignItems:'center',gap:14,cursor:'pointer',transition:'all 0.2s',borderBottom:theme.border?\"1px solid \".concat(theme.border):'none'},chatItemActive:{background:isDark?'rgba(255,255,255,0.06)':'rgba(0,0,0,0.04)'},avatar:{width:56,height:56,borderRadius:'50%',background:\"linear-gradient(135deg, \".concat(accent,\", \").concat(accent,\"dd)\"),color:theme.accentText||'#fff',display:'flex',alignItems:'center',justifyContent:'center',fontSize:22,fontWeight:600,flexShrink:0,boxShadow:\"0 4px 14px \".concat(theme.glow||'rgba(10, 132, 255, .3)')},chatInfo:{flex:1,minWidth:0},chatName:{fontSize:16,fontWeight:600,color:theme.text,marginBottom:4,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',letterSpacing:'-0.2px'},lastMsg:{fontSize:14,color:theme.textMuted,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',lineHeight:1.35},chatMeta:{flexShrink:0,display:'flex',flexDirection:'column',alignItems:'flex-end',gap:4},chatTime:{fontSize:12,color:theme.textMuted,fontWeight:500},unreadBadge:{minWidth:20,height:20,borderRadius:10,background:accent,color:theme.accentText||'#fff',fontSize:11,fontWeight:600,display:'flex',alignItems:'center',justifyContent:'center',padding:'0 6px',boxShadow:\"0 2px 8px \".concat(theme.glow||'rgba(10, 132, 255, .35)')},mainArea:{flex:1,display:'flex',flexDirection:'column',minWidth:0,minHeight:0,background:theme.cardBg,transition:'opacity 0.2s'},empty:{flex:1,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',padding:48,textAlign:'center'},emptyIconWrap:{width:120,height:120,borderRadius:60,background:\"linear-gradient(135deg, \".concat(accent,\"15, \").concat(accent,\"08)\"),display:'flex',alignItems:'center',justifyContent:'center',marginBottom:28,backdropFilter:'blur(16px)',boxShadow:\"0 8px 32px \".concat(theme.glow||'rgba(10, 132, 255, .2)')},emptyTitle:{fontSize:28,fontWeight:700,color:theme.text,marginBottom:14},emptySub:{fontSize:17,lineHeight:1.6,color:theme.textMuted,maxWidth:320},emptyTagline:{fontSize:16,color:theme.textMuted,marginTop:36,opacity:0.7}};if(newChatOpen){return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},s.container),{},{flexDirection:'column',width:'100%'}),children:[/*#__PURE__*/_jsxs(\"header\",{style:s.header,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',color:theme.accent,padding:8},onClick:()=>setNewChatOpen(false),children:/*#__PURE__*/_jsx(IconBack,{width:24,height:24})}),/*#__PURE__*/_jsx(\"span\",{style:s.headerTitle,children:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"span\",{style:{width:40}})]}),/*#__PURE__*/_jsx(\"div\",{style:s.search,children:/*#__PURE__*/_jsxs(\"div\",{style:s.searchWrap,children:[/*#__PURE__*/_jsx(\"span\",{style:s.searchIcon,children:/*#__PURE__*/_jsx(IconSearch,{width:20,height:20})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:s.searchInput,placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u0438\\u043A\\u0443 \\u0438\\u043B\\u0438 \\u0438\\u043C\\u0435\\u043D\\u0438\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.chatItem),{},{flexDirection:'column',alignItems:'flex-start'}),onClick:()=>createNewChat('group'),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12,width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.avatar),{},{background:theme.sidebarBg,color:theme.text,fontSize:24}),children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:s.chatName,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0433\\u0440\\u0443\\u043F\\u043F\\u0443\"}),/*#__PURE__*/_jsx(\"div\",{style:s.lastMsg,children:\"\\u041E\\u0431\\u0449\\u0438\\u0439 \\u0447\\u0430\\u0442 \\u0441 \\u043D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u0438\\u043C\\u0438 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0430\\u043C\\u0438\"})]}),/*#__PURE__*/_jsx(IconChevronRight,{width:20,height:20,style:{marginLeft:'auto',color:theme.textMuted}})]})}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.chatItem),{},{flexDirection:'column',alignItems:'flex-start'}),onClick:()=>createNewChat('channel'),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12,width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.avatar),{},{background:theme.sidebarBg,color:theme.text}),children:/*#__PURE__*/_jsx(IconChannel,{width:24,height:24})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:s.chatName,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u0430\\u043D\\u0430\\u043B\"}),/*#__PURE__*/_jsx(\"div\",{style:s.lastMsg,children:\"\\u041F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043B\\u044F \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0447\\u0438\\u043A\\u043E\\u0432\"})]}),/*#__PURE__*/_jsx(IconChevronRight,{width:20,height:20,style:{marginLeft:'auto',color:theme.textMuted}})]})})]})]});}return/*#__PURE__*/_jsxs(\"div\",{style:s.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},s.sidebar),{},{display:showListOnly?'none':'flex'},isMobile?{width:'100%',maxWidth:'100%'}:{}),children:[/*#__PURE__*/_jsxs(\"header\",{style:s.header,children:[/*#__PURE__*/_jsx(\"span\",{style:s.headerTitle,children:\"\\u0427\\u0430\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',color:theme.accent,padding:8},onClick:()=>setNewChatOpen(true),\"aria-label\":\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",children:/*#__PURE__*/_jsx(IconPen,{width:24,height:24})})]}),/*#__PURE__*/_jsx(\"div\",{style:s.search,children:/*#__PURE__*/_jsxs(\"div\",{style:s.searchWrap,children:[/*#__PURE__*/_jsx(\"span\",{style:s.searchIcon,children:/*#__PURE__*/_jsx(IconSearch,{width:20,height:20})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:s.searchInput,placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 14px 12px',display:'flex',gap:8,overflowX:'auto',flexShrink:0},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{padding:'8px 16px',borderRadius:20,border:'none',background:activeFolderId===FOLDER_ALL?accent:theme.sidebarBg,color:activeFolderId===FOLDER_ALL?theme.accentText||'#fff':theme.textMuted,fontSize:13,fontWeight:600,cursor:'pointer',whiteSpace:'nowrap',transition:'all 0.2s'},onClick:()=>{setFolderMenuChatId(null);setActiveFolderId(FOLDER_ALL);},children:\"\\u0412\\u0441\\u0435 \\u0447\\u0430\\u0442\\u044B\"}),folders.map(f=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{padding:'8px 16px',borderRadius:20,border:'none',background:activeFolderId===f.id?accent:theme.sidebarBg,color:activeFolderId===f.id?theme.accentText||'#fff':theme.textMuted,fontSize:13,fontWeight:600,cursor:'pointer',whiteSpace:'nowrap',transition:'all 0.2s'},onClick:()=>{setFolderMenuChatId(null);setActiveFolderId(f.id);},children:f.name},f.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px 16px 8px',display:'flex',gap:12,overflowX:'auto',flexShrink:0,borderBottom:\"1px solid \".concat(theme.border)},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',gap:6,flexShrink:0,cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:62,height:62,borderRadius:'50%',background:\"linear-gradient(135deg, \".concat(accent,\", \").concat(accent,\"dd)\"),padding:3,boxShadow:\"0 4px 14px \".concat(theme.glow||'rgba(10, 132, 255, .3)')},children:/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',borderRadius:'50%',background:theme.sidebarBg,display:'flex',alignItems:'center',justifyContent:'center',color:theme.text,fontSize:24},children:\"+\"})}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,color:theme.textMuted,fontWeight:500},children:\"\\u041C\\u043E\\u044F \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"})]}),chatsByFolder.slice(0,8).map(chat=>{var _chat$name,_chat$name$;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',gap:6,flexShrink:0,cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:62,height:62,borderRadius:'50%',background:\"linear-gradient(135deg, \".concat(accent,\", \").concat(accent,\"dd)\"),padding:3,boxShadow:\"0 4px 14px \".concat(theme.glow||'rgba(10, 132, 255, .3)')},children:/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',borderRadius:'50%',background:theme.cardBg,display:'flex',alignItems:'center',justifyContent:'center',overflow:'hidden'},children:chat.photo?/*#__PURE__*/_jsx(\"img\",{src:chat.photo,alt:\"\",style:{width:'100%',height:'100%',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"span\",{style:{fontSize:20,fontWeight:600,color:theme.text},children:((_chat$name=chat.name)===null||_chat$name===void 0?void 0:(_chat$name$=_chat$name[0])===null||_chat$name$===void 0?void 0:_chat$name$.toUpperCase())||'?'})})}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,color:theme.textMuted,fontWeight:500,maxWidth:60,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:chat.name})]},\"story-\".concat(chat.id));})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scrollable\",style:s.chatList,children:[chatsByFolder.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{padding:24,textAlign:'center',color:theme.textMuted,fontSize:15},children:\"\\u041D\\u0435\\u0442 \\u0447\\u0430\\u0442\\u043E\\u0432 \\u0432 \\u044D\\u0442\\u043E\\u0439 \\u043F\\u0430\\u043F\\u043A\\u0435\"}),chatsByFolder.map(chat=>{var _chat$name2,_chat$name2$;return/*#__PURE__*/_jsxs(\"div\",{role:\"button\",tabIndex:0,onClick:()=>{setFolderMenuChatId(null);setSelectedChat(chat);},onKeyDown:e=>e.key==='Enter'&&setSelectedChat(chat),onMouseEnter:e=>{if((selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)!==chat.id)e.currentTarget.style.background=isDark?'rgba(255,255,255,.04)':'rgba(0,0,0,.03)';},onMouseLeave:e=>{if((selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)!==chat.id)e.currentTarget.style.background='transparent';},style:_objectSpread(_objectSpread(_objectSpread({},s.chatItem),(selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)===chat.id?s.chatItemActive:{}),{},{position:'relative'}),children:[/*#__PURE__*/_jsx(\"div\",{style:s.avatar,children:chat.photo?/*#__PURE__*/_jsx(\"img\",{src:chat.photo,alt:\"\",style:{width:'100%',height:'100%',borderRadius:'50%',objectFit:'cover'}}):chat.type==='channel'?/*#__PURE__*/_jsx(IconChannel,{width:22,height:22}):((_chat$name2=chat.name)===null||_chat$name2===void 0?void 0:(_chat$name2$=_chat$name2[0])===null||_chat$name2$===void 0?void 0:_chat$name2$.toUpperCase())||'?'}),/*#__PURE__*/_jsxs(\"div\",{style:s.chatInfo,children:[/*#__PURE__*/_jsx(\"div\",{style:s.chatName,children:chat.name}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.lastMsg),chat.unread>0?{fontWeight:500,color:theme.text}:{}),children:chat.lastMessage||(chat.type==='channel'?'Канал':'Нет сообщений')})]}),/*#__PURE__*/_jsxs(\"div\",{style:s.chatMeta,children:[/*#__PURE__*/_jsx(\"span\",{style:s.chatTime,children:chat.lastTime?(()=>{const d=new Date(chat.lastTime);const now=new Date();if(d.toDateString()===now.toDateString())return d.toLocaleTimeString('ru-RU',{hour:'2-digit',minute:'2-digit'});if(d.getTime()>now.getTime()-7*86400000)return d.toLocaleDateString('ru-RU',{weekday:'short'});return d.toLocaleDateString('ru-RU',{day:'numeric',month:'short'});})():''}),chat.unread>0&&/*#__PURE__*/_jsx(\"span\",{style:s.unreadBadge,children:chat.unread>99?'99+':chat.unread})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-folder-trigger\":true,\"aria-label\":\"\\u041F\\u0430\\u043F\\u043A\\u0438\",style:{border:'none',background:'transparent',color:theme.textMuted,padding:6,borderRadius:8,cursor:'pointer',flexShrink:0},onClick:e=>{e.stopPropagation();setFolderMenuChatId(folderMenuChatId===chat.id?null:chat.id);},children:\"\\u22EF\"}),folderMenuChatId===chat.id&&/*#__PURE__*/_jsxs(\"div\",{ref:folderMenuRef,style:{position:'absolute',right:8,top:'100%',zIndex:10,marginTop:2,padding:8,borderRadius:12,background:theme.cardBg||theme.sidebarBg,boxShadow:'0 4px 12px rgba(0,0,0,.2)',minWidth:180},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:theme.textMuted,marginBottom:6},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043F\\u0430\\u043F\\u043A\\u0443\"}),folders.length===0?/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:theme.textMuted},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0430\\u043F\\u043A\\u0438 \\u0432 \\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0430\\u0445\"}):folders.map(f=>{const inFolder=(f.chatIds||[]).includes(chat.id);return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",style:{display:'block',width:'100%',padding:'8px 10px',border:'none',background:inFolder?'rgba(0,136,204,.15)':'transparent',color:theme.text,borderRadius:8,cursor:'pointer',textAlign:'left',fontSize:14},onClick:()=>{if(inFolder)removeChatFromFolder(f.id,chat.id);else addChatToFolder(f.id,chat.id);setFoldersRefresh(k=>k+1);},children:[inFolder?'✓ ':'',f.name]},f.id);})]})]},chat.id);})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"aria-label\":\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",onClick:()=>setNewChatOpen(true),style:{position:'absolute',bottom:24,right:16,width:60,height:60,borderRadius:30,border:'none',background:accent,color:theme.accentText||'#fff',boxShadow:\"0 8px 32px \".concat(theme.glow||'rgba(10, 132, 255, .5)'),cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)'},onMouseEnter:e=>e.currentTarget.style.transform='scale(1.08)',onMouseLeave:e=>e.currentTarget.style.transform='scale(1)',children:/*#__PURE__*/_jsx(IconPen,{width:28,height:28})})]}),/*#__PURE__*/_jsx(\"div\",{style:s.mainArea,children:selectedChat?/*#__PURE__*/_jsx(ChatView,{chat:selectedChat,onBack:()=>setSelectedChat(null)}):/*#__PURE__*/_jsxs(\"div\",{style:s.empty,children:[/*#__PURE__*/_jsx(\"div\",{style:s.emptyIconWrap,children:/*#__PURE__*/_jsx(IconPen,{width:36,height:36,style:{color:theme.textMuted}})}),/*#__PURE__*/_jsx(\"div\",{style:s.emptyTitle,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0447\\u0430\\u0442\"}),/*#__PURE__*/_jsx(\"div\",{style:s.emptySub,children:\"\\u0418\\u043B\\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\u0441 \\u0440\\u0443\\u0447\\u043A\\u043E\\u0439 \\u0432\\u044B\\u0448\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043D\\u0430\\u0447\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0434\\u0438\\u0430\\u043B\\u043E\\u0433\"}),/*#__PURE__*/_jsx(\"div\",{style:s.emptyTagline,children:\"AIST \\u2014 \\u0443\\u0434\\u043E\\u0431\\u043D\\u044B\\u0439, \\u043A\\u043E\\u043C\\u0444\\u043E\\u0440\\u0442\\u043D\\u044B\\u0439 \\u0438 \\u0431\\u0435\\u0437\\u043E\\u043F\\u0430\\u0441\\u043D\\u044B\\u0439 \\u043C\\u0435\\u0441\\u0441\\u0435\\u043D\\u0434\\u0436\\u0435\\u0440\"})]})})]});}","map":{"version":3,"names":["React","useState","useMemo","useEffect","useCallback","useRef","useNavigate","useLocation","useTheme","useUser","IconBack","IconSearch","IconPen","IconChannel","IconChevronRight","IconPhone","IconVideo","IconAttach","IconSend","IconSmile","IconMore","IconStories","IconGallery","IconContacts","IconCheck","IconCheckDouble","IconCopy","IconDelete","IconReply","IconForward","IconPin","IconMute","CallScreen","getChatList","saveChatList","getMessages","appendMessage","saveMessages","addOrUpdateChat","createChat","getChannelMeta","saveChannelMeta","apiGetChats","apiGetMessages","apiSendMessage","apiCreateChat","getFolders","addChatToFolder","removeChatFromFolder","getChatFolderIds","connectChatWebSocket","disconnect","addListener","removeListener","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","APP_DOMAIN","FOLDER_ALL","ChatView","_ref","chat","onBack","theme","chatBg","isDark","displayName","accent","messages","setMessages","inputValue","setInputValue","attachPreview","setAttachPreview","callMode","setCallMode","showChannelInfo","setShowChannelInfo","isMobile","window","matchMedia","matches","messagesAreaBg","channelMeta","type","id","channelLink","shareLink","concat","cancelled","fromApi","Array","isArray","merged","handleMessage","data","chatId","newMsg","message","prev","exists","some","m","updated","sendMessage","textOrAttachment","isAttach","text","caption","trim","attachment","localId","Date","now","Math","random","toString","slice","localMsg","fromMe","time","toISOString","senderName","url","undefined","next","_objectSpread","lastMessage","lastTime","list","idx","findIndex","MAX_FILE_MB","ALLOWED_IMAGE","ALLOWED_VIDEO","onAttach","e","_e$target$files","f","target","files","sizeMB","size","includes","r","FileReader","onload","result","readAsDataURL","bubbleIn","bubbleOut","bubbleStyleIn","padding","borderRadius","background","color","fontSize","lineHeight","maxWidth","boxShadow","backdropFilter","WebkitBackdropFilter","border","cardBorder","bubbleStyleOut","accentText","glow","formatDateKey","t","toDateString","messagesWithDates","out","lastDate","forEach","d","push","key","date","style","display","flexDirection","height","children","alignItems","gap","headerBg","borderBottom","cursor","justifyContent","transition","onClick","width","flex","textAlign","minWidth","fontWeight","letterSpacing","name","textMuted","role","position","inset","zIndex","cardBg","stopPropagation","marginBottom","description","whiteSpace","readOnly","value","inputBg","_navigator$clipboard","navigator","clipboard","writeText","marginTop","sidebarBg","peerName","isVideo","onEnd","peerUserId","otherUserId","overflowY","length","map","item","_m$attachment","label","toLocaleDateString","day","month","year","alignSelf","margin","timeStr","toLocaleTimeString","hour","minute","marginLeft","overflow","src","alt","maxHeight","controls","opacity","borderTop","top","right","flexShrink","onMouseEnter","currentTarget","onMouseLeave","accept","onChange","messageInputBg","outline","placeholder","onKeyDown","shiftKey","preventDefault","minHeight","Chats","_location$state2","navigate","location","token","chatList","setChatList","selectedChat","setSelectedChat","searchQuery","setSearchQuery","newChatOpen","setNewChatOpen","activeFolderId","setActiveFolderId","foldersRefresh","setFoldersRefresh","folderMenuChatId","setFolderMenuChatId","folderMenuRef","folders","onDocClick","_folderMenuRef$curren","current","contains","closest","document","addEventListener","removeEventListener","_location$state","state","openChatId","c","find","ch","replace","refreshList","_unused","onVisible","filteredChats","q","toLowerCase","filter","username","chatsByFolder","_folder$chatIds","folder","chatIds","createNewChat","prompt","peerUsername","created","unread","alert","showListOnly","s","container","pageBg","header","headerTitle","search","searchInput","searchWrap","searchIcon","left","transform","pointerEvents","sidebar","borderRight","overflowX","chatItem","chatItemActive","avatar","chatInfo","chatName","textOverflow","lastMsg","chatMeta","chatTime","unreadBadge","mainArea","empty","emptyIconWrap","emptyTitle","emptySub","emptyTagline","_chat$name","_chat$name$","photo","objectFit","toUpperCase","className","_chat$name2","_chat$name2$","tabIndex","getTime","weekday","ref","inFolder","k","bottom"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/components/Chats.jsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useTheme } from '../context/ThemeContext';\r\nimport { useUser } from '../context/UserContext';\r\nimport {\r\n  IconBack, IconSearch, IconPen, IconChannel, IconChevronRight,\r\n  IconPhone, IconVideo, IconAttach, IconSend, IconSmile, IconMore,\r\n  IconStories, IconGallery, IconContacts, IconCheck, IconCheckDouble,\r\n  IconCopy, IconDelete, IconReply, IconForward, IconPin, IconMute\r\n} from './Icons';\r\nimport CallScreen from './CallScreen';\r\nimport {\r\n  getChatList,\r\n  saveChatList,\r\n  getMessages,\r\n  appendMessage,\r\n  saveMessages,\r\n  addOrUpdateChat,\r\n  createChat,\r\n  getChannelMeta,\r\n  saveChannelMeta,\r\n} from '../lib/chatStorage';\r\nimport { apiGetChats, apiGetMessages, apiSendMessage, apiCreateChat } from '../lib/api';\r\nimport { getFolders, addChatToFolder, removeChatFromFolder, getChatFolderIds } from '../lib/folderStorage';\r\nimport { connectChatWebSocket, disconnect, addListener, removeListener } from '../lib/chatWebSocket';\r\n\r\nconst APP_DOMAIN = 'https://aist-messenger.vercel.app';\r\nconst FOLDER_ALL = 'all';\r\n\r\nfunction ChatView({ chat, onBack }) {\r\n  const { theme, chatBg, isDark } = useTheme();\r\n  const { displayName } = useUser();\r\n  const accent = typeof theme.accent === 'string' ? theme.accent : '#0a84ff';\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [attachPreview, setAttachPreview] = useState(null);\r\n  const [callMode, setCallMode] = useState(null);\r\n  const [showChannelInfo, setShowChannelInfo] = useState(false);\r\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\r\n  const messagesAreaBg = chatBg || (isDark ? '#0d1218' : '#e8eef5');\r\n  const channelMeta = chat.type === 'channel' ? getChannelMeta(chat.id) : null;\r\n  const channelLink = channelMeta?.shareLink || `${APP_DOMAIN}/c/${chat.id}`;\r\n\r\n  // Локальное хранение: сначала показываем с устройства, затем синхронизируем с сервером при открытии\r\n  useEffect(() => {\r\n    setMessages(getMessages(chat.id));\r\n    let cancelled = false;\r\n    (async () => {\r\n      const fromApi = await apiGetMessages(chat.id);\r\n      if (cancelled) return;\r\n      if (Array.isArray(fromApi)) {\r\n        const merged = saveMessages(chat.id, fromApi);\r\n        setMessages(merged);\r\n      }\r\n    })();\r\n    return () => { cancelled = true; };\r\n  }, [chat.id]);\r\n\r\n  // WebSocket для получения сообщений в реальном времени\r\n  useEffect(() => {\r\n    const handleMessage = (data) => {\r\n      if (data.type === 'new_message' && data.chatId === chat.id) {\r\n        const newMsg = data.message;\r\n        if (newMsg) {\r\n          setMessages(prev => {\r\n            const exists = prev.some(m => m.id === newMsg.id);\r\n            if (exists) return prev;\r\n            const updated = [...prev, newMsg];\r\n            saveMessages(chat.id, updated);\r\n            return updated;\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    addListener(handleMessage);\r\n    return () => removeListener(handleMessage);\r\n  }, [chat.id]);\r\n\r\n  const sendMessage = useCallback(async (textOrAttachment) => {\r\n    const isAttach = typeof textOrAttachment === 'object';\r\n    const text = isAttach ? textOrAttachment.caption || '' : (textOrAttachment || '').trim();\r\n    const attachment = isAttach ? textOrAttachment : null;\r\n    if (!text && !attachment) return;\r\n    const localId = `m_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;\r\n    const localMsg = {\r\n      id: localId,\r\n      fromMe: true,\r\n      text: text || (attachment ? (attachment.type === 'image' ? 'Фото' : 'Видео') : ''),\r\n      time: new Date().toISOString(),\r\n      senderName: displayName || 'Вы',\r\n      attachment: attachment ? { type: attachment.type, url: attachment.url } : undefined,\r\n    };\r\n    // Сначала сохраняем на устройстве и сразу показываем\r\n    const next = appendMessage(chat.id, localMsg);\r\n    setMessages(next);\r\n    setInputValue('');\r\n    setAttachPreview(null);\r\n    addOrUpdateChat({ ...chat, lastMessage: text || 'Медиа', lastTime: Date.now() });\r\n    // Затем отправляем на сервер для синхронизации с другими устройствами\r\n    const fromApi = await apiSendMessage(chat.id, {\r\n      text: localMsg.text,\r\n      attachment: attachment ? { type: attachment.type, url: attachment.url } : null,\r\n    });\r\n    if (fromApi && fromApi.id !== localId) {\r\n      const list = getMessages(chat.id);\r\n      const idx = list.findIndex((m) => m.id === localId);\r\n      if (idx >= 0) {\r\n        const updated = [...list];\r\n        updated[idx] = { ...list[idx], id: fromApi.id, time: fromApi.time || list[idx].time };\r\n        saveMessages(chat.id, updated);\r\n        setMessages(updated);\r\n      }\r\n    }\r\n  }, [chat, displayName]);\r\n\r\n  const MAX_FILE_MB = 16;\r\n  const ALLOWED_IMAGE = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\n  const ALLOWED_VIDEO = ['video/mp4', 'video/webm'];\r\n  const onAttach = (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    const sizeMB = f.size / (1024 * 1024);\r\n    if (sizeMB > MAX_FILE_MB) return;\r\n    if (ALLOWED_IMAGE.includes(f.type)) {\r\n      const r = new FileReader();\r\n      r.onload = () => setAttachPreview({ type: 'image', url: r.result });\r\n      r.readAsDataURL(f);\r\n    } else if (ALLOWED_VIDEO.includes(f.type)) {\r\n      const r = new FileReader();\r\n      r.onload = () => setAttachPreview({ type: 'video', url: r.result });\r\n      r.readAsDataURL(f);\r\n    }\r\n  };\r\n\r\n  const bubbleIn = theme.bubbleIn || (isDark ? 'rgba(32, 42, 58, .88)' : 'rgba(255,255,255,.92)');\r\n  const bubbleOut = theme.bubbleOut || accent;\r\n  const bubbleStyleIn = {\r\n    padding: '14px 18px 12px 18px',\r\n    borderRadius: '22px 22px 22px 8px',\r\n    background: bubbleIn,\r\n    color: theme.text,\r\n    fontSize: 15,\r\n    lineHeight: 1.5,\r\n    maxWidth: '100%',\r\n    boxShadow: isDark ? '0 4px 16px rgba(0,0,0,.3)' : '0 4px 16px rgba(0,0,0,.1)',\r\n    backdropFilter: 'blur(20px) saturate(160%)',\r\n    WebkitBackdropFilter: 'blur(20px) saturate(160%)',\r\n    border: `1px solid ${theme.cardBorder || 'transparent'}`,\r\n  };\r\n  const bubbleStyleOut = {\r\n    ...bubbleStyleIn,\r\n    borderRadius: '22px 22px 8px 22px',\r\n    background: bubbleOut,\r\n    color: theme.accentText || '#fff',\r\n    boxShadow: `0 6px 20px ${theme.glow || 'rgba(10, 132, 255, .4)'}`,\r\n    border: 'none',\r\n  };\r\n\r\n  const formatDateKey = (t) => new Date(t).toDateString();\r\n  const messagesWithDates = useMemo(() => {\r\n    const out = [];\r\n    let lastDate = null;\r\n    messages.forEach((m) => {\r\n      const d = formatDateKey(m.time);\r\n      if (d !== lastDate) {\r\n        lastDate = d;\r\n        out.push({ type: 'date', key: `date-${d}`, date: m.time });\r\n      }\r\n      out.push(m);\r\n    });\r\n    return out;\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\r\n      <header style={{ height: 64, padding: '0 8px 0 4px', display: 'flex', alignItems: 'center', gap: 6, background: theme.headerBg, backdropFilter: 'blur(24px) saturate(180%)', WebkitBackdropFilter: 'blur(24px) saturate(180%)', borderBottom: `1px solid ${theme.border}`, boxShadow: isDark ? '0 4px 20px rgba(0,0,0,.15)' : '0 4px 20px rgba(0,0,0,.06)' }}>\r\n        <button type=\"button\" style={{ border: 'none', background: 'transparent', color: accent, padding: 10, cursor: 'pointer', display: isMobile ? 'flex' : 'none', alignItems: 'center', justifyContent: 'center', borderRadius: 12, transition: 'all 0.2s' }} onClick={onBack} aria-label=\"Назад\">\r\n          <IconBack width={24} height={24} />\r\n        </button>\r\n        <button type=\"button\" onClick={() => chat.type === 'channel' && setShowChannelInfo(true)} style={{ flex: 1, border: 'none', background: 'transparent', padding: '10px 12px', cursor: chat.type === 'channel' ? 'pointer' : 'default', textAlign: 'left', minWidth: 0, borderRadius: 12, transition: 'background 0.2s' }}>\r\n          <span style={{ fontWeight: 700, fontSize: 18, color: theme.text, display: 'block', letterSpacing: '-0.3px' }}>{chat.name}</span>\r\n          {chat.type !== 'channel' && <span style={{ fontSize: 13, color: theme.textMuted, fontWeight: 500 }}>онлайн</span>}\r\n        </button>\r\n        {chat.type !== 'channel' && (\r\n          <>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 10, color: theme.textMuted, cursor: 'pointer', borderRadius: 12, transition: 'all 0.2s' }} aria-label=\"Голосовой звонок\" onClick={() => setCallMode('voice')}><IconPhone width={22} height={22} /></button>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 10, color: theme.textMuted, cursor: 'pointer', borderRadius: 12, transition: 'all 0.2s' }} aria-label=\"Видеозвонок\" onClick={() => setCallMode('video')}><IconVideo width={22} height={22} /></button>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 10, color: theme.textMuted, cursor: 'pointer', borderRadius: 12, transition: 'all 0.2s' }} aria-label=\"Ещё\"><IconMore width={22} height={22} /></button>\r\n          </>\r\n        )}\r\n      </header>\r\n      {showChannelInfo && channelMeta && (\r\n        <div\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-label=\"Информация о канале\"\r\n          style={{ position: 'fixed', inset: 0, zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: 16, background: 'rgba(0,0,0,.6)', backdropFilter: 'blur(8px)' }}\r\n          onClick={() => setShowChannelInfo(false)}\r\n        >\r\n          <div style={{ background: theme.cardBg, borderRadius: 20, padding: 24, maxWidth: 380, width: '100%', border: `1px solid ${theme.cardBorder}`, boxShadow: '0 16px 48px rgba(0,0,0,.3)', backdropFilter: 'blur(20px) saturate(140%)', WebkitBackdropFilter: 'blur(20px) saturate(140%)' }} onClick={(e) => e.stopPropagation()}>\r\n            <div style={{ fontSize: 20, fontWeight: 700, marginBottom: 14, color: theme.text }}>{chat.name}</div>\r\n            {channelMeta.description ? <p style={{ fontSize: 15, color: theme.textMuted, marginBottom: 16, whiteSpace: 'pre-wrap', lineHeight: 1.5 }}>{channelMeta.description}</p> : null}\r\n            <div style={{ fontSize: 14, color: theme.textMuted, marginBottom: 10 }}>Ссылка на канал:</div>\r\n            <div style={{ display: 'flex', gap: 10, alignItems: 'center' }}>\r\n              <input readOnly value={channelLink} style={{ flex: 1, padding: '10px 14px', borderRadius: 12, border: `1px solid ${theme.border}`, background: theme.inputBg, color: theme.text, fontSize: 14 }} />\r\n              <button type=\"button\" onClick={() => { navigator.clipboard?.writeText(channelLink); }} style={{ padding: '10px 18px', borderRadius: 12, border: 'none', background: accent, color: theme.accentText || '#fff', cursor: 'pointer', fontSize: 14, fontWeight: 600, boxShadow: '0 4px 12px rgba(10, 132, 255, .3)' }}>Копировать</button>\r\n            </div>\r\n            <button type=\"button\" onClick={() => setShowChannelInfo(false)} style={{ marginTop: 20, width: '100%', padding: 12, borderRadius: 12, border: 'none', background: theme.sidebarBg, color: theme.text, cursor: 'pointer', fontSize: 15, fontWeight: 600 }}>Закрыть</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {callMode && (\r\n        <CallScreen peerName={chat.name} isVideo={callMode === 'video'} onEnd={() => setCallMode(null)} peerUserId={chat.peerUserId || chat.otherUserId} />\r\n      )}\r\n      <div style={{ flex: 1, overflowY: 'auto', padding: '14px 20px 20px', display: 'flex', flexDirection: 'column', gap: 8, background: messagesAreaBg }}>\r\n        {messages.length === 0 && (\r\n          <div style={{ color: theme.textMuted, fontSize: 15, textAlign: 'center', padding: '60px 20px' }}>Нет сообщений</div>\r\n        )}\r\n        {messagesWithDates.map((item) => {\r\n          if (item.type === 'date') {\r\n            const label = new Date(item.date).toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });\r\n            return (\r\n              <div key={item.key} style={{ alignSelf: 'center', margin: '16px 0 8px', padding: '6px 16px', borderRadius: 12, background: isDark ? 'rgba(255,255,255,.08)' : 'rgba(0,0,0,.06)', fontSize: 13, color: theme.textMuted, fontWeight: 600, backdropFilter: 'blur(10px)' }}>\r\n                {label}\r\n              </div>\r\n            );\r\n          }\r\n          const m = item;\r\n          const timeStr = new Date(m.time).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n          return (\r\n            <div key={m.id} style={{ alignSelf: m.fromMe ? 'flex-end' : 'flex-start', maxWidth: '82%', display: 'flex', flexDirection: 'column', alignItems: m.fromMe ? 'flex-end' : 'flex-start' }}>\r\n              {!m.fromMe && chat.type === 'group' && m.senderName && (\r\n                <span style={{ fontSize: 12, color: theme.textMuted, marginBottom: 2, marginLeft: 4 }}>{m.senderName}</span>\r\n              )}\r\n              {m.attachment?.url && (\r\n                <div style={{ marginBottom: 2, borderRadius: 12, overflow: 'hidden', boxShadow: '0 1px 3px rgba(0,0,0,.2)' }}>\r\n                  {m.attachment.type === 'image' ? (\r\n                    <img src={m.attachment.url} alt=\"\" style={{ maxWidth: 260, maxHeight: 260, display: 'block' }} />\r\n                  ) : (\r\n                    <video src={m.attachment.url} controls style={{ maxWidth: 260, maxHeight: 180 }} />\r\n                  )}\r\n                </div>\r\n              )}\r\n              <div style={m.fromMe ? bubbleStyleOut : bubbleStyleIn}>\r\n                {m.text ? <span style={{ display: 'block', marginBottom: 2 }}>{m.text}</span> : null}\r\n                <div style={{ fontSize: 11, opacity: 0.8 }}>{timeStr}</div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {attachPreview && (\r\n        <div style={{ padding: 12, borderTop: `1px solid ${theme.border}`, background: theme.headerBg, backdropFilter: 'blur(20px)' }}>\r\n          <div style={{ position: 'relative', display: 'inline-block' }}>\r\n            {attachPreview.type === 'image' ? <img src={attachPreview.url} alt=\"\" style={{ maxHeight: 140, borderRadius: 12, boxShadow: '0 4px 12px rgba(0,0,0,.15)' }} /> : <video src={attachPreview.url} style={{ maxHeight: 140, borderRadius: 12, boxShadow: '0 4px 12px rgba(0,0,0,.15)' }} />}\r\n            <button type=\"button\" onClick={() => setAttachPreview(null)} style={{ position: 'absolute', top: 8, right: 8, border: 'none', background: 'rgba(0,0,0,.6)', color: '#fff', borderRadius: 50, width: 28, height: 28, cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 16 }}>×</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div style={{ padding: '12px 16px 14px', borderTop: `1px solid ${theme.border}`, background: theme.headerBg, backdropFilter: 'blur(24px) saturate(180%)', WebkitBackdropFilter: 'blur(24px) saturate(180%)', display: 'flex', gap: 10, alignItems: 'center' }}>\r\n        <label style={{ cursor: 'pointer', color: theme.textMuted, padding: 8, flexShrink: 0, borderRadius: 14, transition: 'all 0.2s' }} aria-label=\"Прикрепить файл\" onMouseEnter={(e) => e.currentTarget.style.background = isDark ? 'rgba(255,255,255,.06)' : 'rgba(0,0,0,.04)'} onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}>\r\n          <input type=\"file\" accept=\"image/*,video/*,.pdf,.doc,.docx\" style={{ display: 'none' }} onChange={onAttach} />\r\n          <IconAttach width={24} height={24} />\r\n        </label>\r\n        <input\r\n          style={{ flex: 1, minWidth: 0, padding: '14px 20px', borderRadius: 26, border: 'none', background: theme.messageInputBg || theme.inputBg, color: theme.text, fontSize: 15, outline: 'none', transition: 'all 0.2s', boxShadow: isDark ? '0 2px 8px rgba(0,0,0,.15)' : '0 2px 8px rgba(0,0,0,.05)' }}\r\n          placeholder=\"Сообщение\"\r\n          value={inputValue}\r\n          onChange={(e) => setInputValue(e.target.value)}\r\n          onKeyDown={(e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); if (attachPreview) sendMessage({ ...attachPreview, caption: inputValue }); else sendMessage(inputValue); } }}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => attachPreview ? sendMessage({ ...attachPreview, caption: inputValue }) : sendMessage(inputValue)}\r\n          style={{\r\n            width: 48,\r\n            height: 48,\r\n            minWidth: 48,\r\n            minHeight: 48,\r\n            flexShrink: 0,\r\n            padding: 0,\r\n            borderRadius: '50%',\r\n            border: 'none',\r\n            background: accent,\r\n            color: theme.accentText || '#fff',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: 18,\r\n            boxShadow: `0 6px 20px ${theme.glow || 'rgba(10, 132, 255, .4)'}`,\r\n            transition: 'all 0.2s',\r\n          }}\r\n          aria-label=\"Отправить\"\r\n        >\r\n          <IconSend width={22} height={22} />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Chats() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { theme } = useTheme();\r\n  const { token } = useUser();\r\n  const [chatList, setChatList] = useState(getChatList);\r\n  const [selectedChat, setSelectedChat] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [newChatOpen, setNewChatOpen] = useState(false);\r\n  const [activeFolderId, setActiveFolderId] = useState(FOLDER_ALL);\r\n  const [foldersRefresh, setFoldersRefresh] = useState(0);\r\n  const [folderMenuChatId, setFolderMenuChatId] = useState(null);\r\n  const folderMenuRef = useRef(null);\r\n  const folders = useMemo(() => getFolders(), [foldersRefresh]);\r\n\r\n  useEffect(() => {\r\n    if (!folderMenuChatId) return;\r\n    const onDocClick = (e) => {\r\n      if (folderMenuRef.current?.contains(e.target) || e.target.closest('[data-folder-trigger]')) return;\r\n      setFolderMenuChatId(null);\r\n    };\r\n    document.addEventListener('click', onDocClick);\r\n    return () => document.removeEventListener('click', onDocClick);\r\n  }, [folderMenuChatId]);\r\n\r\n  useEffect(() => {\r\n    const id = location.state?.openChatId;\r\n    if (id) {\r\n      const c = getChatList().find((ch) => ch.id === id);\r\n      if (c) setSelectedChat(c);\r\n      navigate('/messenger', { replace: true, state: {} });\r\n    }\r\n  }, [location.state?.openChatId, navigate]);\r\n\r\n  const refreshList = useCallback(async () => {\r\n    const fromApi = await apiGetChats();\r\n    if (Array.isArray(fromApi) && fromApi.length >= 0) {\r\n      try {\r\n        saveChatList(fromApi);\r\n      } catch {}\r\n      setChatList(fromApi);\r\n      return;\r\n    }\r\n    setChatList(getChatList());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    refreshList();\r\n  }, [refreshList]);\r\n\r\n  // Синхронизация при возврате на вкладку (другое устройство могло отправить сообщения)\r\n  useEffect(() => {\r\n    const onVisible = () => refreshList();\r\n    document.addEventListener('visibilitychange', onVisible);\r\n    return () => document.removeEventListener('visibilitychange', onVisible);\r\n  }, [refreshList]);\r\n\r\n  const filteredChats = useMemo(() => {\r\n    const q = searchQuery.trim().toLowerCase().replace(/^@/, '');\r\n    if (!q) return chatList;\r\n    return chatList.filter((c) => (c.name && c.name.toLowerCase().includes(q)) || (c.username && c.username.toLowerCase().includes(q)));\r\n  }, [chatList, searchQuery]);\r\n\r\n  const chatsByFolder = useMemo(() => {\r\n    if (activeFolderId === FOLDER_ALL) return filteredChats;\r\n    const folder = folders.find((f) => f.id === activeFolderId);\r\n    if (!folder?.chatIds?.length) return [];\r\n    return filteredChats.filter((c) => folder.chatIds.includes(c.id));\r\n  }, [activeFolderId, filteredChats, folders]);\r\n\r\n  const createNewChat = async (type) => {\r\n    if (type === 'channel') {\r\n      setNewChatOpen(false);\r\n      navigate('/messenger/new-channel');\r\n      return;\r\n    }\r\n    if (type === 'group') {\r\n      setNewChatOpen(false);\r\n      navigate('/messenger/new-group');\r\n      return;\r\n    }\r\n    const name = window.prompt('Введите ник @ или имя пользователя');\r\n    if (!name?.trim()) return;\r\n    const peerUsername = name.trim().replace(/^@/, '');\r\n    const created = await apiCreateChat({ name: name.trim(), type: 'user', peerUsername });\r\n    if (created?.id) {\r\n      addOrUpdateChat({ id: created.id, name: created.name || name.trim(), type: 'user', lastMessage: '', lastTime: null, unread: 0, peerUserId: created.peerUserId });\r\n      await refreshList();\r\n      setSelectedChat(created);\r\n      setNewChatOpen(false);\r\n    } else {\r\n      window.alert('Пользователь с таким ником не найден. Убедитесь, что он зарегистрирован в AIST и указал никнейм в настройках.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!selectedChat) refreshList();\r\n  }, [selectedChat, refreshList]);\r\n\r\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\r\n  const showListOnly = isMobile && selectedChat;\r\n  const isDark = typeof window !== 'undefined' && window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n  const accent = typeof theme.accent === 'string' ? theme.accent : '#0a84ff';\r\n\r\n  // Двухколоночный макет: слева — только список чатов, справа — окно чата (как в Telegram Desktop)\r\n  const s = {\r\n    container: { display: 'flex', flexDirection: 'row', height: '100%', minHeight: 0, background: theme.pageBg },\r\n    header: { height: 64, padding: '0 16px', display: 'flex', alignItems: 'center', justifyContent: 'space-between', background: theme.headerBg, backdropFilter: 'blur(24px) saturate(180%)', WebkitBackdropFilter: 'blur(24px) saturate(180%)', borderBottom: `1px solid ${theme.border}`, boxShadow: isDark ? '0 4px 20px rgba(0,0,0,.15)' : '0 4px 20px rgba(0,0,0,.06)' },\r\n    headerTitle: { fontSize: 24, fontWeight: 700, color: theme.text, letterSpacing: '-0.5px' },\r\n    search: { padding: '12px 16px 14px' },\r\n    searchInput: { width: '100%', padding: '14px 18px 14px 50px', borderRadius: 24, border: 'none', background: theme.inputBg, color: theme.text, fontSize: 15, outline: 'none', transition: 'all 0.2s', boxShadow: isDark ? '0 2px 8px rgba(0,0,0,.15)' : '0 2px 8px rgba(0,0,0,.05)' },\r\n    searchWrap: { position: 'relative' },\r\n    searchIcon: { position: 'absolute', left: 18, top: '50%', transform: 'translateY(-50%)', color: theme.textMuted, pointerEvents: 'none' },\r\n    sidebar: { width: 400, minWidth: 320, maxWidth: 480, flexShrink: 0, background: theme.sidebarBg, display: 'flex', flexDirection: 'column', overflow: 'hidden', position: 'relative', borderRight: `1px solid ${theme.border}`, backdropFilter: 'blur(24px) saturate(160%)', WebkitBackdropFilter: 'blur(24px) saturate(160%)' },\r\n    chatList: { flex: 1, overflowY: 'auto', overflowX: 'hidden' },\r\n    chatItem: { padding: '14px 16px', display: 'flex', alignItems: 'center', gap: 14, cursor: 'pointer', transition: 'all 0.2s', borderBottom: theme.border ? `1px solid ${theme.border}` : 'none' },\r\n    chatItemActive: { background: isDark ? 'rgba(255,255,255,0.06)' : 'rgba(0,0,0,0.04)' },\r\n    avatar: { width: 56, height: 56, borderRadius: '50%', background: `linear-gradient(135deg, ${accent}, ${accent}dd)`, color: theme.accentText || '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 22, fontWeight: 600, flexShrink: 0, boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}` },\r\n    chatInfo: { flex: 1, minWidth: 0 },\r\n    chatName: { fontSize: 16, fontWeight: 600, color: theme.text, marginBottom: 4, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', letterSpacing: '-0.2px' },\r\n    lastMsg: { fontSize: 14, color: theme.textMuted, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', lineHeight: 1.35 },\r\n    chatMeta: { flexShrink: 0, display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: 4 },\r\n    chatTime: { fontSize: 12, color: theme.textMuted, fontWeight: 500 },\r\n    unreadBadge: { minWidth: 20, height: 20, borderRadius: 10, background: accent, color: theme.accentText || '#fff', fontSize: 11, fontWeight: 600, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '0 6px', boxShadow: `0 2px 8px ${theme.glow || 'rgba(10, 132, 255, .35)'}` },\r\n    mainArea: { flex: 1, display: 'flex', flexDirection: 'column', minWidth: 0, minHeight: 0, background: theme.cardBg, transition: 'opacity 0.2s' },\r\n    empty: { flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', padding: 48, textAlign: 'center' },\r\n    emptyIconWrap: { width: 120, height: 120, borderRadius: 60, background: `linear-gradient(135deg, ${accent}15, ${accent}08)`, display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: 28, backdropFilter: 'blur(16px)', boxShadow: `0 8px 32px ${theme.glow || 'rgba(10, 132, 255, .2)'}` },\r\n    emptyTitle: { fontSize: 28, fontWeight: 700, color: theme.text, marginBottom: 14 },\r\n    emptySub: { fontSize: 17, lineHeight: 1.6, color: theme.textMuted, maxWidth: 320 },\r\n    emptyTagline: { fontSize: 16, color: theme.textMuted, marginTop: 36, opacity: 0.7 },\r\n  };\r\n\r\n  if (newChatOpen) {\r\n    return (\r\n      <div style={{ ...s.container, flexDirection: 'column', width: '100%' }}>\r\n        <header style={s.header}>\r\n          <button type=\"button\" style={{ border: 'none', background: 'transparent', color: theme.accent, padding: 8 }} onClick={() => setNewChatOpen(false)}>\r\n            <IconBack width={24} height={24} />\r\n          </button>\r\n          <span style={s.headerTitle}>Новое сообщение</span>\r\n          <span style={{ width: 40 }} />\r\n        </header>\r\n        <div style={s.search}>\r\n          <div style={s.searchWrap}>\r\n            <span style={s.searchIcon}><IconSearch width={20} height={20} /></span>\r\n            <input type=\"text\" style={s.searchInput} placeholder=\"Поиск по нику или имени\" />\r\n          </div>\r\n        </div>\r\n        <div style={{ flex: 1, overflowY: 'auto' }}>\r\n          <div style={{ ...s.chatItem, flexDirection: 'column', alignItems: 'flex-start' }} onClick={() => createNewChat('group')}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, width: '100%' }}>\r\n              <div style={{ ...s.avatar, background: theme.sidebarBg, color: theme.text, fontSize: 24 }}>👥</div>\r\n              <div><div style={s.chatName}>Создать группу</div><div style={s.lastMsg}>Общий чат с несколькими участниками</div></div>\r\n              <IconChevronRight width={20} height={20} style={{ marginLeft: 'auto', color: theme.textMuted }} />\r\n            </div>\r\n          </div>\r\n          <div style={{ ...s.chatItem, flexDirection: 'column', alignItems: 'flex-start' }} onClick={() => createNewChat('channel')}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, width: '100%' }}>\r\n              <div style={{ ...s.avatar, background: theme.sidebarBg, color: theme.text }}><IconChannel width={24} height={24} /></div>\r\n              <div><div style={s.chatName}>Создать канал</div><div style={s.lastMsg}>Публикация новостей для подписчиков</div></div>\r\n              <IconChevronRight width={20} height={20} style={{ marginLeft: 'auto', color: theme.textMuted }} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={s.container}>\r\n      <div style={{ ...s.sidebar, display: showListOnly ? 'none' : 'flex', ...(isMobile ? { width: '100%', maxWidth: '100%' } : {}) }}>\r\n        <header style={s.header}>\r\n          <span style={s.headerTitle}>Чаты</span>\r\n          <button type=\"button\" style={{ border: 'none', background: 'transparent', color: theme.accent, padding: 8 }} onClick={() => setNewChatOpen(true)} aria-label=\"Новое сообщение\">\r\n            <IconPen width={24} height={24} />\r\n          </button>\r\n        </header>\r\n        <div style={s.search}>\r\n          <div style={s.searchWrap}>\r\n            <span style={s.searchIcon}><IconSearch width={20} height={20} /></span>\r\n            <input type=\"text\" style={s.searchInput} placeholder=\"Поиск\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div style={{ padding: '8px 14px 12px', display: 'flex', gap: 8, overflowX: 'auto', flexShrink: 0 }}>\r\n          <button type=\"button\" style={{ padding: '8px 16px', borderRadius: 20, border: 'none', background: activeFolderId === FOLDER_ALL ? accent : theme.sidebarBg, color: activeFolderId === FOLDER_ALL ? (theme.accentText || '#fff') : theme.textMuted, fontSize: 13, fontWeight: 600, cursor: 'pointer', whiteSpace: 'nowrap', transition: 'all 0.2s' }} onClick={() => { setFolderMenuChatId(null); setActiveFolderId(FOLDER_ALL); }}>Все чаты</button>\r\n          {folders.map((f) => (\r\n            <button key={f.id} type=\"button\" style={{ padding: '8px 16px', borderRadius: 20, border: 'none', background: activeFolderId === f.id ? accent : theme.sidebarBg, color: activeFolderId === f.id ? (theme.accentText || '#fff') : theme.textMuted, fontSize: 13, fontWeight: 600, cursor: 'pointer', whiteSpace: 'nowrap', transition: 'all 0.2s' }} onClick={() => { setFolderMenuChatId(null); setActiveFolderId(f.id); }}>{f.name}</button>\r\n          ))}\r\n        </div>\r\n        {/* Истории */}\r\n        <div style={{ padding: '12px 16px 8px', display: 'flex', gap: 12, overflowX: 'auto', flexShrink: 0, borderBottom: `1px solid ${theme.border}` }}>\r\n          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 6, flexShrink: 0, cursor: 'pointer' }}>\r\n            <div style={{ width: 62, height: 62, borderRadius: '50%', background: `linear-gradient(135deg, ${accent}, ${accent}dd)`, padding: 3, boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}` }}>\r\n              <div style={{ width: '100%', height: '100%', borderRadius: '50%', background: theme.sidebarBg, display: 'flex', alignItems: 'center', justifyContent: 'center', color: theme.text, fontSize: 24 }}>+</div>\r\n            </div>\r\n            <span style={{ fontSize: 11, color: theme.textMuted, fontWeight: 500 }}>Моя история</span>\r\n          </div>\r\n          {chatsByFolder.slice(0, 8).map((chat) => (\r\n            <div key={`story-${chat.id}`} style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 6, flexShrink: 0, cursor: 'pointer' }}>\r\n              <div style={{ width: 62, height: 62, borderRadius: '50%', background: `linear-gradient(135deg, ${accent}, ${accent}dd)`, padding: 3, boxShadow: `0 4px 14px ${theme.glow || 'rgba(10, 132, 255, .3)'}` }}>\r\n                <div style={{ width: '100%', height: '100%', borderRadius: '50%', background: theme.cardBg, display: 'flex', alignItems: 'center', justifyContent: 'center', overflow: 'hidden' }}>\r\n                  {chat.photo ? <img src={chat.photo} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} /> : <span style={{ fontSize: 20, fontWeight: 600, color: theme.text }}>{chat.name?.[0]?.toUpperCase() || '?'}</span>}\r\n                </div>\r\n              </div>\r\n              <span style={{ fontSize: 11, color: theme.textMuted, fontWeight: 500, maxWidth: 60, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{chat.name}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"scrollable\" style={s.chatList}>\r\n          {chatsByFolder.length === 0 && (\r\n            <div style={{ padding: 24, textAlign: 'center', color: theme.textMuted, fontSize: 15 }}>Нет чатов в этой папке</div>\r\n          )}\r\n          {chatsByFolder.map((chat) => (\r\n            <div\r\n              key={chat.id}\r\n              role=\"button\"\r\n              tabIndex={0}\r\n              onClick={() => { setFolderMenuChatId(null); setSelectedChat(chat); }}\r\n              onKeyDown={(e) => e.key === 'Enter' && setSelectedChat(chat)}\r\n              onMouseEnter={(e) => { if (selectedChat?.id !== chat.id) e.currentTarget.style.background = isDark ? 'rgba(255,255,255,.04)' : 'rgba(0,0,0,.03)'; }}\r\n              onMouseLeave={(e) => { if (selectedChat?.id !== chat.id) e.currentTarget.style.background = 'transparent'; }}\r\n              style={{ ...s.chatItem, ...(selectedChat?.id === chat.id ? s.chatItemActive : {}), position: 'relative' }}\r\n            >\r\n              <div style={s.avatar}>{chat.photo ? <img src={chat.photo} alt=\"\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} /> : (chat.type === 'channel' ? <IconChannel width={22} height={22} /> : (chat.name?.[0]?.toUpperCase() || '?'))}</div>\r\n              <div style={s.chatInfo}>\r\n                <div style={s.chatName}>{chat.name}</div>\r\n                <div style={{ ...s.lastMsg, ...(chat.unread > 0 ? { fontWeight: 500, color: theme.text } : {}) }}>{chat.lastMessage || (chat.type === 'channel' ? 'Канал' : 'Нет сообщений')}</div>\r\n              </div>\r\n              <div style={s.chatMeta}>\r\n                <span style={s.chatTime}>\r\n                  {chat.lastTime\r\n                    ? (() => {\r\n                        const d = new Date(chat.lastTime);\r\n                        const now = new Date();\r\n                        if (d.toDateString() === now.toDateString()) return d.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n                        if (d.getTime() > now.getTime() - 7 * 86400000) return d.toLocaleDateString('ru-RU', { weekday: 'short' });\r\n                        return d.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' });\r\n                      })()\r\n                    : ''}\r\n                </span>\r\n                {chat.unread > 0 && <span style={s.unreadBadge}>{chat.unread > 99 ? '99+' : chat.unread}</span>}\r\n              </div>\r\n              <button type=\"button\" data-folder-trigger aria-label=\"Папки\" style={{ border: 'none', background: 'transparent', color: theme.textMuted, padding: 6, borderRadius: 8, cursor: 'pointer', flexShrink: 0 }} onClick={(e) => { e.stopPropagation(); setFolderMenuChatId(folderMenuChatId === chat.id ? null : chat.id); }}>⋯</button>\r\n              {folderMenuChatId === chat.id && (\r\n                <div ref={folderMenuRef} style={{ position: 'absolute', right: 8, top: '100%', zIndex: 10, marginTop: 2, padding: 8, borderRadius: 12, background: theme.cardBg || theme.sidebarBg, boxShadow: '0 4px 12px rgba(0,0,0,.2)', minWidth: 180 }} onClick={(e) => e.stopPropagation()}>\r\n                  <div style={{ fontSize: 12, color: theme.textMuted, marginBottom: 6 }}>Добавить в папку</div>\r\n                  {folders.length === 0 ? <div style={{ fontSize: 13, color: theme.textMuted }}>Создайте папки в Настройках</div> : folders.map((f) => {\r\n                    const inFolder = (f.chatIds || []).includes(chat.id);\r\n                    return (\r\n                      <button key={f.id} type=\"button\" style={{ display: 'block', width: '100%', padding: '8px 10px', border: 'none', background: inFolder ? 'rgba(0,136,204,.15)' : 'transparent', color: theme.text, borderRadius: 8, cursor: 'pointer', textAlign: 'left', fontSize: 14 }} onClick={() => { if (inFolder) removeChatFromFolder(f.id, chat.id); else addChatToFolder(f.id, chat.id); setFoldersRefresh((k) => k + 1); }}>\r\n                        {inFolder ? '✓ ' : ''}{f.name}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Новое сообщение\"\r\n          onClick={() => setNewChatOpen(true)}\r\n          style={{\r\n            position: 'absolute',\r\n            bottom: 24,\r\n            right: 16,\r\n            width: 60,\r\n            height: 60,\r\n            borderRadius: 30,\r\n            border: 'none',\r\n            background: accent,\r\n            color: theme.accentText || '#fff',\r\n            boxShadow: `0 8px 32px ${theme.glow || 'rgba(10, 132, 255, .5)'}`,\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n          }}\r\n          onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.08)'}\r\n          onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n        >\r\n          <IconPen width={28} height={28} />\r\n        </button>\r\n      </div>\r\n      <div style={s.mainArea}>\r\n        {selectedChat ? <ChatView chat={selectedChat} onBack={() => setSelectedChat(null)} /> : (\r\n          <div style={s.empty}>\r\n            <div style={s.emptyIconWrap}>\r\n              <IconPen width={36} height={36} style={{ color: theme.textMuted }} />\r\n            </div>\r\n            <div style={s.emptyTitle}>Выберите чат</div>\r\n            <div style={s.emptySub}>Или нажмите кнопку с ручкой выше, чтобы начать новый диалог</div>\r\n            <div style={s.emptyTagline}>AIST — удобный, комфортный и безопасный мессенджер</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}