{"ast":null,"code":"import{Routes,Route,Navigate,Outlet}from'react-router-dom';import{useEffect,useState}from'react';import Landing from'./pages/Landing';import Register from'./pages/Register';import Messenger from'./pages/Messenger';import ChannelCreatePage from'./pages/ChannelCreatePage';import GroupCreatePage from'./pages/GroupCreatePage';import UserAgreement from'./pages/UserAgreement';import{CallProvider}from'./context/CallContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PrivateRoute(_ref){let{children}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(null);useEffect(()=>{const token=localStorage.getItem('aist_token');setIsAuthenticated(!!token);},[]);if(isAuthenticated===null){return/*#__PURE__*/_jsx(\"div\",{style:{height:'100vh',display:'flex',alignItems:'center',justifyContent:'center',color:'rgba(255,255,255,.9)'},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});}return isAuthenticated?children:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}function PublicRoute(_ref2){let{children}=_ref2;const[isAuthenticated,setIsAuthenticated]=useState(null);useEffect(()=>{const token=localStorage.getItem('aist_token');setIsAuthenticated(!!token);},[]);if(isAuthenticated===null){return/*#__PURE__*/_jsx(\"div\",{style:{height:'100vh',display:'flex',alignItems:'center',justifyContent:'center',color:'rgba(255,255,255,.9)'},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});}return!isAuthenticated?children:/*#__PURE__*/_jsx(Navigate,{to:\"/messenger\",replace:true});}function App(){useEffect(()=>{// Убираем стандартные стили браузера\ndocument.body.style.margin='0';document.body.style.padding='0';document.body.style.overflow='hidden';},[]);return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PublicRoute,{children:/*#__PURE__*/_jsx(Landing,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(PublicRoute,{children:/*#__PURE__*/_jsx(Register,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/user-agreement\",element:/*#__PURE__*/_jsx(UserAgreement,{})}),/*#__PURE__*/_jsxs(Route,{path:\"/messenger\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(CallProvider,{children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',display:'flex',flexDirection:'column'},children:/*#__PURE__*/_jsx(Outlet,{})})})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Messenger,{})}),/*#__PURE__*/_jsx(Route,{path:\"new-channel\",element:/*#__PURE__*/_jsx(ChannelCreatePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"new-group\",element:/*#__PURE__*/_jsx(GroupCreatePage,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]});}export default App;","map":{"version":3,"names":["Routes","Route","Navigate","Outlet","useEffect","useState","Landing","Register","Messenger","ChannelCreatePage","GroupCreatePage","UserAgreement","CallProvider","jsx","_jsx","jsxs","_jsxs","PrivateRoute","_ref","children","isAuthenticated","setIsAuthenticated","token","localStorage","getItem","style","height","display","alignItems","justifyContent","color","to","replace","PublicRoute","_ref2","App","document","body","margin","padding","overflow","path","element","flexDirection","index"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/App.jsx"],"sourcesContent":["import { Routes, Route, Navigate, Outlet } from 'react-router-dom';\r\nimport { useEffect, useState } from 'react';\r\nimport Landing from './pages/Landing';\r\nimport Register from './pages/Register';\r\nimport Messenger from './pages/Messenger';\r\nimport ChannelCreatePage from './pages/ChannelCreatePage';\r\nimport GroupCreatePage from './pages/GroupCreatePage';\r\nimport UserAgreement from './pages/UserAgreement';\r\nimport { CallProvider } from './context/CallContext';\r\n\r\nfunction PrivateRoute({ children }) {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('aist_token');\r\n    setIsAuthenticated(!!token);\r\n  }, []);\r\n\r\n  if (isAuthenticated === null) {\r\n    return <div style={{ \r\n      height: '100vh', \r\n      display: 'flex', \r\n      alignItems: 'center', \r\n      justifyContent: 'center',\r\n      color: 'rgba(255,255,255,.9)'\r\n    }}>Загрузка...</div>;\r\n  }\r\n\r\n  return isAuthenticated ? children : <Navigate to=\"/\" replace />;\r\n}\r\n\r\nfunction PublicRoute({ children }) {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('aist_token');\r\n    setIsAuthenticated(!!token);\r\n  }, []);\r\n\r\n  if (isAuthenticated === null) {\r\n    return <div style={{ \r\n      height: '100vh', \r\n      display: 'flex', \r\n      alignItems: 'center', \r\n      justifyContent: 'center',\r\n      color: 'rgba(255,255,255,.9)'\r\n    }}>Загрузка...</div>;\r\n  }\r\n\r\n  return !isAuthenticated ? children : <Navigate to=\"/messenger\" replace />;\r\n}\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    // Убираем стандартные стили браузера\r\n    document.body.style.margin = '0';\r\n    document.body.style.padding = '0';\r\n    document.body.style.overflow = 'hidden';\r\n  }, []);\r\n\r\n  return (\r\n    <Routes>\r\n      <Route\r\n        path=\"/\"\r\n        element={\r\n          <PublicRoute>\r\n            <Landing />\r\n          </PublicRoute>\r\n        }\r\n      />\r\n      <Route\r\n        path=\"/login\"\r\n        element={\r\n          <PublicRoute>\r\n            <Register />\r\n          </PublicRoute>\r\n        }\r\n      />\r\n      <Route path=\"/user-agreement\" element={<UserAgreement />} />\r\n      <Route path=\"/messenger\" element={<PrivateRoute><CallProvider><div style={{ height: '100%', display: 'flex', flexDirection: 'column' }}><Outlet /></div></CallProvider></PrivateRoute>}>\r\n        <Route index element={<Messenger />} />\r\n        <Route path=\"new-channel\" element={<ChannelCreatePage />} />\r\n        <Route path=\"new-group\" element={<GroupCreatePage />} />\r\n      </Route>\r\n      <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n    </Routes>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}