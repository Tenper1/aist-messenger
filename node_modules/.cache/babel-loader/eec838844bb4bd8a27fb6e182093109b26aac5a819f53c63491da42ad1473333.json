{"ast":null,"code":"import _objectSpread from\"C:/Users/Vladislav/Documents/GitHub/aist-messenger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useMemo,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const STORAGE_KEY='aist_theme';const CHAT_BG_KEY='aist_chat_bg';// Liquid Glass: мягкие градиенты, полупрозрачные карточки, размытие\nconst glassLight={pageBg:'linear-gradient(165deg, #e8eef7 0%, #f0f4fb 40%, #e2eaf5 100%)',text:'rgba(15, 25, 45, .94)',textMuted:'rgba(55, 70, 100, .82)',cardBg:'rgba(255,255,255,.82)',cardBorder:'rgba(255,255,255,.9)',inputBg:'rgba(255,255,255,.92)',inputBorder:'rgba(140, 180, 220, .28)',accent:'#0088cc',accentText:'#ffffff',headerBg:'rgba(255,255,255,.9)',sidebarBg:'rgba(248, 252, 255, .92)',border:'rgba(160, 190, 230, .22)',bubbleIn:'rgba(255,255,255,.98)',bubbleOut:'rgba(0, 136, 204, .92)',tabBarBg:'rgba(255,255,255,.92)'};// Цвета как в Telegram Desktop/Web (тёмная тема)\nconst glassDark={pageBg:'#0e1621',text:'#fff',textMuted:'rgba(255,255,255,.6)',cardBg:'#17212b',cardBorder:'transparent',inputBg:'#242f3d',inputBorder:'rgba(255,255,255,.06)',accent:'#5288c1',accentText:'#fff',headerBg:'#17212b',sidebarBg:'#17212b',border:'rgba(255,255,255,.06)',bubbleIn:'#2b5278',bubbleOut:'#1e3a5f',tabBarBg:'#17212b'};const themes={system:{id:'system',label:'Как в системе'},light:_objectSpread({id:'light',label:'Светлая'},glassLight),dark:_objectSpread({id:'dark',label:'Тёмная'},glassDark)};const CHAT_BG_PRESETS=[{id:'default',name:'По умолчанию',value:''},{id:'gradient1',name:'Мягкий градиент',value:'linear-gradient(180deg, rgba(200,230,255,.15) 0%, transparent 50%)'},{id:'gradient2',name:'Тёплый',value:'linear-gradient(180deg, rgba(255,230,200,.12) 0%, transparent 50%)'},{id:'dots',name:'Точки',value:'radial-gradient(circle at 1px 1px, rgba(0,0,0,.04) 1px, transparent 0); background-size: 24px 24px'},{id:'telegram',name:'Как в Telegram',value:'radial-gradient(circle at 2px 2px, rgba(255,255,255,.03) 1.5px, transparent 0); background-size: 28px 28px; background-color: rgba(0,0,0,.08)'}];const ThemeContext=/*#__PURE__*/createContext(null);export function ThemeProvider(_ref){let{children}=_ref;const[themeId,setThemeIdState]=useState(()=>{try{return localStorage.getItem(STORAGE_KEY)||'dark';}catch(_unused){return'dark';}});const[chatBg,setChatBgState]=useState(()=>{try{return localStorage.getItem(CHAT_BG_KEY)||'';}catch(_unused2){return'';}});const[systemDark,setSystemDark]=useState(()=>typeof window!=='undefined'&&window.matchMedia('(prefers-color-scheme: dark)').matches);useEffect(()=>{const m=window.matchMedia('(prefers-color-scheme: dark)');const fn=()=>setSystemDark(m.matches);m.addEventListener('change',fn);return()=>m.removeEventListener('change',fn);},[]);const effectiveId=themeId==='system'?systemDark?'dark':'light':themeId;const theme=_objectSpread(_objectSpread({},themes[effectiveId]||themes.light),{},{isDark:effectiveId==='dark'});useEffect(()=>{document.body.style.background=theme.pageBg;document.body.style.color=theme.text;},[theme.pageBg,theme.text]);const setThemeId=id=>{setThemeIdState(id);try{localStorage.setItem(STORAGE_KEY,id);}catch(_unused3){}};const setChatBg=v=>{setChatBgState(v||'');try{if(v)localStorage.setItem(CHAT_BG_KEY,v);else localStorage.removeItem(CHAT_BG_KEY);}catch(_unused4){}};const themeList=useMemo(()=>[{id:'system',label:'Как в системе'},{id:'light',label:'Светлая'},{id:'dark',label:'Тёмная'}],[]);const value=useMemo(()=>({themeId,setThemeId,theme,themeList,isDark:theme.isDark,chatBg,setChatBg,chatBgPresets:CHAT_BG_PRESETS}),[themeId,theme,themeList,chatBg]);return/*#__PURE__*/_jsx(ThemeContext.Provider,{value:value,children:children});}export function useTheme(){const ctx=useContext(ThemeContext);if(!ctx)throw new Error('useTheme must be used within ThemeProvider');return ctx;}","map":{"version":3,"names":["React","createContext","useContext","useMemo","useEffect","useState","jsx","_jsx","STORAGE_KEY","CHAT_BG_KEY","glassLight","pageBg","text","textMuted","cardBg","cardBorder","inputBg","inputBorder","accent","accentText","headerBg","sidebarBg","border","bubbleIn","bubbleOut","tabBarBg","glassDark","themes","system","id","label","light","_objectSpread","dark","CHAT_BG_PRESETS","name","value","ThemeContext","ThemeProvider","_ref","children","themeId","setThemeIdState","localStorage","getItem","_unused","chatBg","setChatBgState","_unused2","systemDark","setSystemDark","window","matchMedia","matches","m","fn","addEventListener","removeEventListener","effectiveId","theme","isDark","document","body","style","background","color","setThemeId","setItem","_unused3","setChatBg","v","removeItem","_unused4","themeList","chatBgPresets","Provider","useTheme","ctx","Error"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/context/ThemeContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useMemo, useEffect, useState } from 'react';\r\n\r\nconst STORAGE_KEY = 'aist_theme';\r\nconst CHAT_BG_KEY = 'aist_chat_bg';\r\n\r\n// Liquid Glass: мягкие градиенты, полупрозрачные карточки, размытие\r\nconst glassLight = {\r\n  pageBg: 'linear-gradient(165deg, #e8eef7 0%, #f0f4fb 40%, #e2eaf5 100%)',\r\n  text: 'rgba(15, 25, 45, .94)',\r\n  textMuted: 'rgba(55, 70, 100, .82)',\r\n  cardBg: 'rgba(255,255,255,.82)',\r\n  cardBorder: 'rgba(255,255,255,.9)',\r\n  inputBg: 'rgba(255,255,255,.92)',\r\n  inputBorder: 'rgba(140, 180, 220, .28)',\r\n  accent: '#0088cc',\r\n  accentText: '#ffffff',\r\n  headerBg: 'rgba(255,255,255,.9)',\r\n  sidebarBg: 'rgba(248, 252, 255, .92)',\r\n  border: 'rgba(160, 190, 230, .22)',\r\n  bubbleIn: 'rgba(255,255,255,.98)',\r\n  bubbleOut: 'rgba(0, 136, 204, .92)',\r\n  tabBarBg: 'rgba(255,255,255,.92)',\r\n};\r\n\r\n// Цвета как в Telegram Desktop/Web (тёмная тема)\r\nconst glassDark = {\r\n  pageBg: '#0e1621',\r\n  text: '#fff',\r\n  textMuted: 'rgba(255,255,255,.6)',\r\n  cardBg: '#17212b',\r\n  cardBorder: 'transparent',\r\n  inputBg: '#242f3d',\r\n  inputBorder: 'rgba(255,255,255,.06)',\r\n  accent: '#5288c1',\r\n  accentText: '#fff',\r\n  headerBg: '#17212b',\r\n  sidebarBg: '#17212b',\r\n  border: 'rgba(255,255,255,.06)',\r\n  bubbleIn: '#2b5278',\r\n  bubbleOut: '#1e3a5f',\r\n  tabBarBg: '#17212b',\r\n};\r\n\r\nconst themes = {\r\n  system: { id: 'system', label: 'Как в системе' },\r\n  light: { id: 'light', label: 'Светлая', ...glassLight },\r\n  dark: { id: 'dark', label: 'Тёмная', ...glassDark },\r\n};\r\n\r\nconst CHAT_BG_PRESETS = [\r\n  { id: 'default', name: 'По умолчанию', value: '' },\r\n  { id: 'gradient1', name: 'Мягкий градиент', value: 'linear-gradient(180deg, rgba(200,230,255,.15) 0%, transparent 50%)' },\r\n  { id: 'gradient2', name: 'Тёплый', value: 'linear-gradient(180deg, rgba(255,230,200,.12) 0%, transparent 50%)' },\r\n  { id: 'dots', name: 'Точки', value: 'radial-gradient(circle at 1px 1px, rgba(0,0,0,.04) 1px, transparent 0); background-size: 24px 24px' },\r\n  { id: 'telegram', name: 'Как в Telegram', value: 'radial-gradient(circle at 2px 2px, rgba(255,255,255,.03) 1.5px, transparent 0); background-size: 28px 28px; background-color: rgba(0,0,0,.08)' },\r\n];\r\n\r\nconst ThemeContext = createContext(null);\r\n\r\nexport function ThemeProvider({ children }) {\r\n  const [themeId, setThemeIdState] = useState(() => {\r\n    try {\r\n      return localStorage.getItem(STORAGE_KEY) || 'dark';\r\n    } catch {\r\n      return 'dark';\r\n    }\r\n  });\r\n  const [chatBg, setChatBgState] = useState(() => {\r\n    try {\r\n      return localStorage.getItem(CHAT_BG_KEY) || '';\r\n    } catch {\r\n      return '';\r\n    }\r\n  });\r\n  const [systemDark, setSystemDark] = useState(() =>\r\n    typeof window !== 'undefined' && window.matchMedia('(prefers-color-scheme: dark)').matches\r\n  );\r\n\r\n  useEffect(() => {\r\n    const m = window.matchMedia('(prefers-color-scheme: dark)');\r\n    const fn = () => setSystemDark(m.matches);\r\n    m.addEventListener('change', fn);\r\n    return () => m.removeEventListener('change', fn);\r\n  }, []);\r\n\r\n  const effectiveId = themeId === 'system' ? (systemDark ? 'dark' : 'light') : themeId;\r\n  const theme = { ...(themes[effectiveId] || themes.light), isDark: effectiveId === 'dark' };\r\n\r\n  useEffect(() => {\r\n    document.body.style.background = theme.pageBg;\r\n    document.body.style.color = theme.text;\r\n  }, [theme.pageBg, theme.text]);\r\n\r\n  const setThemeId = (id) => {\r\n    setThemeIdState(id);\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, id);\r\n    } catch {}\r\n  };\r\n\r\n  const setChatBg = (v) => {\r\n    setChatBgState(v || '');\r\n    try {\r\n      if (v) localStorage.setItem(CHAT_BG_KEY, v);\r\n      else localStorage.removeItem(CHAT_BG_KEY);\r\n    } catch {}\r\n  };\r\n\r\n  const themeList = useMemo(() => [\r\n    { id: 'system', label: 'Как в системе' },\r\n    { id: 'light', label: 'Светлая' },\r\n    { id: 'dark', label: 'Тёмная' },\r\n  ], []);\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      themeId,\r\n      setThemeId,\r\n      theme,\r\n      themeList,\r\n      isDark: theme.isDark,\r\n      chatBg,\r\n      setChatBg,\r\n      chatBgPresets: CHAT_BG_PRESETS,\r\n    }),\r\n    [themeId, theme, themeList, chatBg]\r\n  );\r\n\r\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\r\n}\r\n\r\nexport function useTheme() {\r\n  const ctx = useContext(ThemeContext);\r\n  if (!ctx) throw new Error('useTheme must be used within ThemeProvider');\r\n  return ctx;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}