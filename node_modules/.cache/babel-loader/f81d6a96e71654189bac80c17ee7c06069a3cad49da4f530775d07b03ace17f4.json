{"ast":null,"code":"import _objectSpread from\"C:/Users/Vladislav/Documents/GitHub/aist-messenger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useMemo,useEffect,useCallback,useRef}from'react';import{useNavigate,useLocation}from'react-router-dom';import{useTheme}from'../context/ThemeContext';import{useUser}from'../context/UserContext';import{IconBack,IconSearch,IconPen,IconChannel,IconChevronRight,IconPhone,IconVideo,IconAttach}from'./Icons';import CallScreen from'./CallScreen';import{getChatList,saveChatList,getMessages,appendMessage,saveMessages,addOrUpdateChat,createChat,getChannelMeta,saveChannelMeta}from'../lib/chatStorage';import{apiGetChats,apiGetMessages,apiSendMessage,apiCreateChat}from'../lib/api';import{getFolders,addChatToFolder,removeChatFromFolder,getChatFolderIds}from'../lib/folderStorage';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const APP_DOMAIN='https://aist-messenger.vercel.app';const FOLDER_ALL='all';function ChatView(_ref){let{chat,onBack}=_ref;const{theme,chatBg}=useTheme();const{displayName}=useUser();const[messages,setMessages]=useState([]);const[inputValue,setInputValue]=useState('');const[attachPreview,setAttachPreview]=useState(null);const[callMode,setCallMode]=useState(null);const[showChannelInfo,setShowChannelInfo]=useState(false);const isMobile=typeof window!=='undefined'&&window.matchMedia('(max-width: 768px)').matches;const messagesAreaBg=chatBg||(theme.isDark?'#0f1419':'#e6ebee');const messagesAreaPattern=theme.isDark?'radial-gradient(circle at 1px 1px, rgba(255,255,255,.035) 1px, transparent 0); background-size: 28px 28px':'radial-gradient(circle at 1px 1px, rgba(0,0,0,.035) 1px, transparent 0); background-size: 28px 28px';const channelMeta=chat.type==='channel'?getChannelMeta(chat.id):null;const channelLink=(channelMeta===null||channelMeta===void 0?void 0:channelMeta.shareLink)||\"\".concat(APP_DOMAIN,\"/c/\").concat(chat.id);// Локальное хранение: сначала показываем с устройства, затем синхронизируем с сервером при открытии\nuseEffect(()=>{setMessages(getMessages(chat.id));let cancelled=false;(async()=>{const fromApi=await apiGetMessages(chat.id);if(cancelled)return;if(Array.isArray(fromApi)){const merged=saveMessages(chat.id,fromApi);setMessages(merged);}})();return()=>{cancelled=true;};},[chat.id]);const sendMessage=useCallback(async textOrAttachment=>{const isAttach=typeof textOrAttachment==='object';const text=isAttach?textOrAttachment.caption||'':(textOrAttachment||'').trim();const attachment=isAttach?textOrAttachment:null;if(!text&&!attachment)return;const localId=\"m_\".concat(Date.now(),\"_\").concat(Math.random().toString(36).slice(2,9));const localMsg={id:localId,fromMe:true,text:text||(attachment?attachment.type==='image'?'Фото':'Видео':''),time:new Date().toISOString(),senderName:displayName||'Вы',attachment:attachment?{type:attachment.type,url:attachment.url}:undefined};// Сначала сохраняем на устройстве и сразу показываем\nconst next=appendMessage(chat.id,localMsg);setMessages(next);setInputValue('');setAttachPreview(null);addOrUpdateChat(_objectSpread(_objectSpread({},chat),{},{lastMessage:text||'Медиа',lastTime:Date.now()}));// Затем отправляем на сервер для синхронизации с другими устройствами\nconst fromApi=await apiSendMessage(chat.id,{text:localMsg.text,attachment:attachment?{type:attachment.type,url:attachment.url}:null});if(fromApi&&fromApi.id!==localId){const list=getMessages(chat.id);const idx=list.findIndex(m=>m.id===localId);if(idx>=0){const updated=[...list];updated[idx]=_objectSpread(_objectSpread({},list[idx]),{},{id:fromApi.id,time:fromApi.time||list[idx].time});saveMessages(chat.id,updated);setMessages(updated);}}},[chat,displayName]);const MAX_FILE_MB=16;const ALLOWED_IMAGE=['image/jpeg','image/png','image/gif','image/webp'];const ALLOWED_VIDEO=['video/mp4','video/webm'];const onAttach=e=>{var _e$target$files;const f=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!f)return;const sizeMB=f.size/(1024*1024);if(sizeMB>MAX_FILE_MB)return;if(ALLOWED_IMAGE.includes(f.type)){const r=new FileReader();r.onload=()=>setAttachPreview({type:'image',url:r.result});r.readAsDataURL(f);}else if(ALLOWED_VIDEO.includes(f.type)){const r=new FileReader();r.onload=()=>setAttachPreview({type:'video',url:r.result});r.readAsDataURL(f);}};const bubbleIn=theme.bubbleIn||(theme.isDark?'#182533':'#ffffff');const bubbleOut=theme.bubbleOut||theme.accent;const bubbleStyleIn={padding:'10px 14px 8px 14px',borderRadius:'18px 18px 18px 6px',background:bubbleIn,color:theme.text,fontSize:15,lineHeight:1.4,maxWidth:'100%',boxShadow:theme.isDark?'0 1px 2px rgba(0,0,0,0.3)':'0 1px 2px rgba(0,0,0,0.1)',backdropFilter:'blur(10px)'};const bubbleStyleOut=_objectSpread(_objectSpread({},bubbleStyleIn),{},{borderRadius:'18px 18px 6px 18px',background:bubbleOut,color:theme.accentText||'#fff',boxShadow:'0 2px 8px rgba(0,136,204,0.3)'});const formatDateKey=t=>new Date(t).toDateString();const messagesWithDates=useMemo(()=>{const out=[];let lastDate=null;messages.forEach(m=>{const d=formatDateKey(m.time);if(d!==lastDate){lastDate=d;out.push({type:'date',key:\"date-\".concat(d),date:m.time});}out.push(m);});return out;},[messages]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',height:'100%'},children:[/*#__PURE__*/_jsxs(\"header\",{style:{height:58,padding:'0 12px 0 4px',display:'flex',alignItems:'center',gap:8,background:theme.headerBg,backdropFilter:'blur(20px)',borderBottom:\"1px solid \".concat(theme.border||'rgba(255,255,255,0.08)')},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',color:theme.accent,padding:12,cursor:'pointer',display:isMobile?'flex':'none',alignItems:'center',justifyContent:'center',borderRadius:8,transition:'background 0.15s ease'},onClick:onBack,\"aria-label\":\"\\u041D\\u0430\\u0437\\u0430\\u0434\",children:/*#__PURE__*/_jsx(IconBack,{width:24,height:24})}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>chat.type==='channel'&&setShowChannelInfo(true),style:{flex:1,border:'none',background:'transparent',padding:'10px 6px',cursor:chat.type==='channel'?'pointer':'default',textAlign:'left',minWidth:0,borderRadius:8,transition:'background 0.15s ease'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:17,color:theme.text,display:'block',letterSpacing:'-0.3px'},children:chat.name}),chat.type!=='channel'&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:13,color:theme.textMuted,fontWeight:500},children:\"\\u0431\\u044B\\u043B(\\u0430) \\u043D\\u0435\\u0434\\u0430\\u0432\\u043D\\u043E\"})]}),chat.type!=='channel'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',padding:12,color:theme.textMuted,cursor:'pointer',borderRadius:8,transition:'all 0.15s ease'},\"aria-label\":\"\\u0413\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u043E\\u0439 \\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\",onClick:()=>setCallMode('voice'),children:/*#__PURE__*/_jsx(IconPhone,{width:22,height:22})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',padding:12,color:theme.textMuted,cursor:'pointer',borderRadius:8,transition:'all 0.15s ease'},\"aria-label\":\"\\u0412\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\",onClick:()=>setCallMode('video'),children:/*#__PURE__*/_jsx(IconVideo,{width:22,height:22})})]})]}),showChannelInfo&&channelMeta&&/*#__PURE__*/_jsx(\"div\",{role:\"dialog\",\"aria-modal\":\"true\",\"aria-label\":\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u043A\\u0430\\u043D\\u0430\\u043B\\u0435\",style:{position:'fixed',inset:0,zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center',padding:16,background:'rgba(0,0,0,.5)'},onClick:()=>setShowChannelInfo(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:theme.cardBg,borderRadius:16,padding:20,maxWidth:360,width:'100%',border:\"1px solid \".concat(theme.border),boxShadow:'0 8px 32px rgba(0,0,0,.2)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:600,marginBottom:12,color:theme.text},children:chat.name}),channelMeta.description?/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:theme.textMuted,marginBottom:12,whiteSpace:'pre-wrap'},children:channelMeta.description}):null,/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:theme.textMuted,marginBottom:8},children:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u043D\\u0430\\u043B:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{readOnly:true,value:channelLink,style:{flex:1,padding:'8px 12px',borderRadius:8,border:\"1px solid \".concat(theme.border),background:theme.inputBg,color:theme.text,fontSize:13}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _navigator$clipboard;(_navigator$clipboard=navigator.clipboard)===null||_navigator$clipboard===void 0?void 0:_navigator$clipboard.writeText(channelLink);},style:{padding:'8px 16px',borderRadius:8,border:'none',background:theme.accent,color:theme.accentText,cursor:'pointer',fontSize:14},children:\"\\u041A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowChannelInfo(false),style:{marginTop:16,width:'100%',padding:10,borderRadius:8,border:'none',background:theme.sidebarBg,color:theme.text,cursor:'pointer'},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})}),callMode&&/*#__PURE__*/_jsx(CallScreen,{peerName:chat.name,isVideo:callMode==='video',onEnd:()=>setCallMode(null),peerUserId:chat.peerUserId||chat.otherUserId}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',padding:'10px 16px 16px',display:'flex',flexDirection:'column',gap:4,background:messagesAreaBg,backgroundImage:messagesAreaPattern},children:[messages.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:theme.textMuted,fontSize:14,textAlign:'center',padding:40},children:\"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"}),messagesWithDates.map(item=>{var _m$attachment;if(item.type==='date'){const label=new Date(item.date).toLocaleDateString('ru-RU',{day:'numeric',month:'long',year:'numeric'});return/*#__PURE__*/_jsx(\"div\",{style:{alignSelf:'center',margin:'16px 0 8px',padding:'6px 16px',borderRadius:12,background:theme.isDark?'rgba(255,255,255,.08)':'rgba(0,0,0,.06)',fontSize:13,color:theme.textMuted,fontWeight:600,backdropFilter:'blur(10px)'},children:label},item.key);}const m=item;const timeStr=new Date(m.time).toLocaleTimeString('ru-RU',{hour:'2-digit',minute:'2-digit'});return/*#__PURE__*/_jsxs(\"div\",{style:{alignSelf:m.fromMe?'flex-end':'flex-start',maxWidth:'82%',display:'flex',flexDirection:'column',alignItems:m.fromMe?'flex-end':'flex-start'},children:[((_m$attachment=m.attachment)===null||_m$attachment===void 0?void 0:_m$attachment.url)&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:2,borderRadius:12,overflow:'hidden',boxShadow:'0 1px 3px rgba(0,0,0,.2)'},children:m.attachment.type==='image'?/*#__PURE__*/_jsx(\"img\",{src:m.attachment.url,alt:\"\",style:{maxWidth:260,maxHeight:260,display:'block'}}):/*#__PURE__*/_jsx(\"video\",{src:m.attachment.url,controls:true,style:{maxWidth:260,maxHeight:180}})}),/*#__PURE__*/_jsxs(\"div\",{style:m.fromMe?bubbleStyleOut:bubbleStyleIn,children:[m.text?/*#__PURE__*/_jsx(\"span\",{style:{display:'block',marginBottom:2},children:m.text}):null,/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.8},children:timeStr})]})]},m.id);})]}),attachPreview&&/*#__PURE__*/_jsx(\"div\",{style:{padding:8,borderTop:\"1px solid \".concat(theme.border),background:theme.headerBg},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',display:'inline-block'},children:[attachPreview.type==='image'?/*#__PURE__*/_jsx(\"img\",{src:attachPreview.url,alt:\"\",style:{maxHeight:120,borderRadius:8}}):/*#__PURE__*/_jsx(\"video\",{src:attachPreview.url,style:{maxHeight:120,borderRadius:8}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setAttachPreview(null),style:{position:'absolute',top:4,right:4,border:'none',background:'rgba(0,0,0,.5)',color:'#fff',borderRadius:4,padding:4},children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px 16px',borderTop:\"1px solid \".concat(theme.border||'rgba(255,255,255,0.08)'),background:theme.headerBg,backdropFilter:'blur(20px)',display:'flex',gap:12,alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{cursor:'pointer',color:theme.textMuted,padding:10,flexShrink:0,borderRadius:10,transition:'all 0.15s ease'},\"aria-label\":\"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*,video/*,.pdf,.doc,.docx\",style:{display:'none'},onChange:onAttach}),/*#__PURE__*/_jsx(IconAttach,{width:24,height:24})]}),/*#__PURE__*/_jsx(\"input\",{style:{flex:1,minWidth:0,padding:'12px 18px',borderRadius:22,border:'none',background:theme.inputBg,color:theme.text,fontSize:15,outline:'none',transition:'all 0.2s ease'},placeholder:\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",value:inputValue,onChange:e=>setInputValue(e.target.value),onKeyDown:e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();if(attachPreview)sendMessage(_objectSpread(_objectSpread({},attachPreview),{},{caption:inputValue}));else sendMessage(inputValue);}}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>attachPreview?sendMessage(_objectSpread(_objectSpread({},attachPreview),{},{caption:inputValue})):sendMessage(inputValue),style:{width:48,height:48,minWidth:48,minHeight:48,flexShrink:0,padding:0,borderRadius:'50%',border:'none',background:theme.accent,color:theme.accentText||'#fff',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',fontSize:18,boxShadow:'0 2px 10px rgba(0,136,204,0.35)',transition:'all 0.2s ease'},\"aria-label\":\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",children:\"\\u27A4\"})]})]});}export default function Chats(){var _location$state2;const navigate=useNavigate();const location=useLocation();const{theme}=useTheme();const[chatList,setChatList]=useState(getChatList);const[selectedChat,setSelectedChat]=useState(null);const[searchQuery,setSearchQuery]=useState('');const[newChatOpen,setNewChatOpen]=useState(false);const[activeFolderId,setActiveFolderId]=useState(FOLDER_ALL);const[foldersRefresh,setFoldersRefresh]=useState(0);const[folderMenuChatId,setFolderMenuChatId]=useState(null);const folderMenuRef=useRef(null);const folders=useMemo(()=>getFolders(),[foldersRefresh]);useEffect(()=>{if(!folderMenuChatId)return;const onDocClick=e=>{var _folderMenuRef$curren;if((_folderMenuRef$curren=folderMenuRef.current)!==null&&_folderMenuRef$curren!==void 0&&_folderMenuRef$curren.contains(e.target)||e.target.closest('[data-folder-trigger]'))return;setFolderMenuChatId(null);};document.addEventListener('click',onDocClick);return()=>document.removeEventListener('click',onDocClick);},[folderMenuChatId]);useEffect(()=>{var _location$state;const id=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.openChatId;if(id){const c=getChatList().find(ch=>ch.id===id);if(c)setSelectedChat(c);navigate('/messenger',{replace:true,state:{}});}},[(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.openChatId,navigate]);const refreshList=useCallback(async()=>{const fromApi=await apiGetChats();if(Array.isArray(fromApi)&&fromApi.length>=0){try{saveChatList(fromApi);}catch(_unused){}setChatList(fromApi);return;}setChatList(getChatList());},[]);useEffect(()=>{refreshList();},[refreshList]);// Синхронизация при возврате на вкладку (другое устройство могло отправить сообщения)\nuseEffect(()=>{const onVisible=()=>refreshList();document.addEventListener('visibilitychange',onVisible);return()=>document.removeEventListener('visibilitychange',onVisible);},[refreshList]);const filteredChats=useMemo(()=>{const q=searchQuery.trim().toLowerCase().replace(/^@/,'');if(!q)return chatList;return chatList.filter(c=>c.name&&c.name.toLowerCase().includes(q)||c.username&&c.username.toLowerCase().includes(q));},[chatList,searchQuery]);const chatsByFolder=useMemo(()=>{var _folder$chatIds;if(activeFolderId===FOLDER_ALL)return filteredChats;const folder=folders.find(f=>f.id===activeFolderId);if(!(folder!==null&&folder!==void 0&&(_folder$chatIds=folder.chatIds)!==null&&_folder$chatIds!==void 0&&_folder$chatIds.length))return[];return filteredChats.filter(c=>folder.chatIds.includes(c.id));},[activeFolderId,filteredChats,folders]);const createNewChat=async type=>{if(type==='channel'){setNewChatOpen(false);navigate('/messenger/new-channel');return;}if(type==='group'){setNewChatOpen(false);navigate('/messenger/new-group');return;}const name=window.prompt('Введите ник @ или имя пользователя');if(!(name!==null&&name!==void 0&&name.trim()))return;const peerUsername=name.trim().replace(/^@/,'');const created=await apiCreateChat({name:name.trim(),type:'user',peerUsername});if(created!==null&&created!==void 0&&created.id){addOrUpdateChat({id:created.id,name:created.name||name.trim(),type:'user',lastMessage:'',lastTime:null,unread:0,peerUserId:created.peerUserId});await refreshList();setSelectedChat(created);setNewChatOpen(false);}else{window.alert('Пользователь с таким ником не найден. Убедитесь, что он зарегистрирован в AIST и указал никнейм в настройках.');}};useEffect(()=>{if(!selectedChat)refreshList();},[selectedChat,refreshList]);const isMobile=typeof window!=='undefined'&&window.matchMedia('(max-width: 768px)').matches;const showListOnly=isMobile&&selectedChat;// Двухколоночный макет: слева — только список чатов, справа — окно чата (как в Telegram Desktop)\nconst s={container:{display:'flex',flexDirection:'row',height:'100%',minHeight:0,background:theme.pageBg},header:{height:56,padding:'0 16px',display:'flex',alignItems:'center',justifyContent:'space-between',background:theme.headerBg,backdropFilter:'blur(20px)',borderBottom:\"1px solid \".concat(theme.border||'rgba(255,255,255,0.08)')},headerTitle:{fontSize:22,fontWeight:700,color:theme.text,letterSpacing:'-0.5px'},search:{padding:'8px 16px 12px'},searchInput:{width:'100%',padding:'12px 16px 12px 44px',borderRadius:22,border:'none',background:theme.inputBg,color:theme.text,fontSize:15,outline:'none',transition:'all 0.2s ease'},searchWrap:{position:'relative'},searchIcon:{position:'absolute',left:16,top:'50%',transform:'translateY(-50%)',color:theme.textMuted,pointerEvents:'none'},sidebar:{width:380,minWidth:300,maxWidth:450,flexShrink:0,background:theme.sidebarBg,display:'flex',flexDirection:'column',overflow:'hidden',position:'relative',borderRight:\"1px solid \".concat(theme.border||'rgba(255,255,255,0.08)')},chatList:{flex:1,overflowY:'auto',overflowX:'hidden'},chatItem:{padding:'12px 14px',display:'flex',alignItems:'center',gap:12,cursor:'pointer',transition:'all 0.15s ease',borderBottom:theme.border?\"1px solid \".concat(theme.border):'none'},chatItemActive:{background:theme.isDark?'rgba(255,255,255,0.08)':'rgba(0,0,0,0.04)'},avatar:{width:56,height:56,borderRadius:'50%',background:\"linear-gradient(135deg, \".concat(theme.accent,\", \").concat(theme.accent,\"dd)\"),color:theme.accentText,display:'flex',alignItems:'center',justifyContent:'center',fontSize:22,fontWeight:600,flexShrink:0,boxShadow:'0 2px 8px rgba(0,0,0,0.15)'},chatInfo:{flex:1,minWidth:0},chatName:{fontSize:16,fontWeight:600,color:theme.text,marginBottom:3,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',letterSpacing:'-0.2px'},lastMsg:{fontSize:14,color:theme.textMuted,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',lineHeight:1.3},chatMeta:{flexShrink:0,display:'flex',flexDirection:'column',alignItems:'flex-end',gap:4},chatTime:{fontSize:12,color:theme.textMuted,fontWeight:500},unreadBadge:{minWidth:20,height:20,borderRadius:10,background:theme.accent,color:theme.accentText||'#fff',fontSize:11,fontWeight:600,display:'flex',alignItems:'center',justifyContent:'center',padding:'0 6px',boxShadow:'0 2px 6px rgba(0,136,204,0.3)'},mainArea:{flex:1,display:'flex',flexDirection:'column',minWidth:0,minHeight:0,background:theme.cardBg,transition:'opacity 0.2s ease'},empty:{flex:1,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',padding:48,textAlign:'center'},emptyIconWrap:{width:100,height:100,borderRadius:50,background:\"linear-gradient(135deg, \".concat(theme.accent,\"22, \").concat(theme.accent,\"11)\"),display:'flex',alignItems:'center',justifyContent:'center',marginBottom:24,backdropFilter:'blur(10px)'},emptyTitle:{fontSize:24,fontWeight:700,color:theme.text,marginBottom:12},emptySub:{fontSize:16,lineHeight:1.6,color:theme.textMuted,maxWidth:280},emptyTagline:{fontSize:14,color:theme.textMuted,marginTop:32,opacity:0.7}};if(newChatOpen){return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},s.container),{},{flexDirection:'column',width:'100%'}),children:[/*#__PURE__*/_jsxs(\"header\",{style:s.header,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',color:theme.accent,padding:8},onClick:()=>setNewChatOpen(false),children:/*#__PURE__*/_jsx(IconBack,{width:24,height:24})}),/*#__PURE__*/_jsx(\"span\",{style:s.headerTitle,children:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"span\",{style:{width:40}})]}),/*#__PURE__*/_jsx(\"div\",{style:s.search,children:/*#__PURE__*/_jsxs(\"div\",{style:s.searchWrap,children:[/*#__PURE__*/_jsx(\"span\",{style:s.searchIcon,children:/*#__PURE__*/_jsx(IconSearch,{width:20,height:20})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:s.searchInput,placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u0438\\u043A\\u0443 \\u0438\\u043B\\u0438 \\u0438\\u043C\\u0435\\u043D\\u0438\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.chatItem),{},{flexDirection:'column',alignItems:'flex-start'}),onClick:()=>createNewChat('group'),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12,width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.avatar),{},{background:theme.sidebarBg,color:theme.text,fontSize:24}),children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:s.chatName,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0433\\u0440\\u0443\\u043F\\u043F\\u0443\"}),/*#__PURE__*/_jsx(\"div\",{style:s.lastMsg,children:\"\\u041E\\u0431\\u0449\\u0438\\u0439 \\u0447\\u0430\\u0442 \\u0441 \\u043D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u0438\\u043C\\u0438 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0430\\u043C\\u0438\"})]}),/*#__PURE__*/_jsx(IconChevronRight,{width:20,height:20,style:{marginLeft:'auto',color:theme.textMuted}})]})}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.chatItem),{},{flexDirection:'column',alignItems:'flex-start'}),onClick:()=>createNewChat('channel'),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12,width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.avatar),{},{background:theme.sidebarBg,color:theme.text}),children:/*#__PURE__*/_jsx(IconChannel,{width:24,height:24})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:s.chatName,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u0430\\u043D\\u0430\\u043B\"}),/*#__PURE__*/_jsx(\"div\",{style:s.lastMsg,children:\"\\u041F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043B\\u044F \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0447\\u0438\\u043A\\u043E\\u0432\"})]}),/*#__PURE__*/_jsx(IconChevronRight,{width:20,height:20,style:{marginLeft:'auto',color:theme.textMuted}})]})})]})]});}return/*#__PURE__*/_jsxs(\"div\",{style:s.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},s.sidebar),{},{display:showListOnly?'none':'flex'},isMobile?{width:'100%',maxWidth:'100%'}:{}),children:[/*#__PURE__*/_jsxs(\"header\",{style:s.header,children:[/*#__PURE__*/_jsx(\"span\",{style:s.headerTitle,children:\"\\u0427\\u0430\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{border:'none',background:'transparent',color:theme.accent,padding:8},onClick:()=>setNewChatOpen(true),\"aria-label\":\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",children:/*#__PURE__*/_jsx(IconPen,{width:24,height:24})})]}),/*#__PURE__*/_jsx(\"div\",{style:s.search,children:/*#__PURE__*/_jsxs(\"div\",{style:s.searchWrap,children:[/*#__PURE__*/_jsx(\"span\",{style:s.searchIcon,children:/*#__PURE__*/_jsx(IconSearch,{width:20,height:20})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:s.searchInput,placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'6px 12px 10px',display:'flex',gap:6,overflowX:'auto',flexShrink:0},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{padding:'6px 14px',borderRadius:18,border:'none',background:activeFolderId===FOLDER_ALL?theme.accent:'rgba(255,255,255,.08)',color:activeFolderId===FOLDER_ALL?'#fff':theme.textMuted,fontSize:13,fontWeight:500,cursor:'pointer',whiteSpace:'nowrap'},onClick:()=>{setFolderMenuChatId(null);setActiveFolderId(FOLDER_ALL);},children:\"\\u0412\\u0441\\u0435 \\u0447\\u0430\\u0442\\u044B\"}),folders.map(f=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{padding:'6px 14px',borderRadius:18,border:'none',background:activeFolderId===f.id?theme.accent:'rgba(255,255,255,.08)',color:activeFolderId===f.id?'#fff':theme.textMuted,fontSize:13,fontWeight:500,cursor:'pointer',whiteSpace:'nowrap'},onClick:()=>{setFolderMenuChatId(null);setActiveFolderId(f.id);},children:f.name},f.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scrollable\",style:s.chatList,children:[chatsByFolder.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{padding:24,textAlign:'center',color:theme.textMuted,fontSize:15},children:\"\\u041D\\u0435\\u0442 \\u0447\\u0430\\u0442\\u043E\\u0432 \\u0432 \\u044D\\u0442\\u043E\\u0439 \\u043F\\u0430\\u043F\\u043A\\u0435\"}),chatsByFolder.map(chat=>{var _chat$name,_chat$name$;return/*#__PURE__*/_jsxs(\"div\",{role:\"button\",tabIndex:0,onClick:()=>{setFolderMenuChatId(null);setSelectedChat(chat);},onKeyDown:e=>e.key==='Enter'&&setSelectedChat(chat),onMouseEnter:e=>{if((selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)!==chat.id)e.currentTarget.style.background=theme.isDark?'rgba(255,255,255,.04)':'rgba(0,0,0,.03)';},onMouseLeave:e=>{if((selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)!==chat.id)e.currentTarget.style.background='transparent';},style:_objectSpread(_objectSpread(_objectSpread({},s.chatItem),(selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)===chat.id?s.chatItemActive:{}),{},{position:'relative'}),children:[/*#__PURE__*/_jsx(\"div\",{style:s.avatar,children:chat.photo?/*#__PURE__*/_jsx(\"img\",{src:chat.photo,alt:\"\",style:{width:'100%',height:'100%',borderRadius:'50%',objectFit:'cover'}}):chat.type==='channel'?/*#__PURE__*/_jsx(IconChannel,{width:22,height:22}):((_chat$name=chat.name)===null||_chat$name===void 0?void 0:(_chat$name$=_chat$name[0])===null||_chat$name$===void 0?void 0:_chat$name$.toUpperCase())||'?'}),/*#__PURE__*/_jsxs(\"div\",{style:s.chatInfo,children:[/*#__PURE__*/_jsx(\"div\",{style:s.chatName,children:chat.name}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},s.lastMsg),chat.unread>0?{fontWeight:500,color:theme.text}:{}),children:chat.lastMessage||(chat.type==='channel'?'Канал':'Нет сообщений')})]}),/*#__PURE__*/_jsxs(\"div\",{style:s.chatMeta,children:[/*#__PURE__*/_jsx(\"span\",{style:s.chatTime,children:chat.lastTime?(()=>{const d=new Date(chat.lastTime);const now=new Date();if(d.toDateString()===now.toDateString())return d.toLocaleTimeString('ru-RU',{hour:'2-digit',minute:'2-digit'});if(d.getTime()>now.getTime()-7*86400000)return d.toLocaleDateString('ru-RU',{weekday:'short'});return d.toLocaleDateString('ru-RU',{day:'numeric',month:'short'});})():''}),chat.unread>0&&/*#__PURE__*/_jsx(\"span\",{style:s.unreadBadge,children:chat.unread>99?'99+':chat.unread})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-folder-trigger\":true,\"aria-label\":\"\\u041F\\u0430\\u043F\\u043A\\u0438\",style:{border:'none',background:'transparent',color:theme.textMuted,padding:6,borderRadius:8,cursor:'pointer',flexShrink:0},onClick:e=>{e.stopPropagation();setFolderMenuChatId(folderMenuChatId===chat.id?null:chat.id);},children:\"\\u22EF\"}),folderMenuChatId===chat.id&&/*#__PURE__*/_jsxs(\"div\",{ref:folderMenuRef,style:{position:'absolute',right:8,top:'100%',zIndex:10,marginTop:2,padding:8,borderRadius:12,background:theme.cardBg||theme.sidebarBg,boxShadow:'0 4px 12px rgba(0,0,0,.2)',minWidth:180},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:theme.textMuted,marginBottom:6},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043F\\u0430\\u043F\\u043A\\u0443\"}),folders.length===0?/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:theme.textMuted},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0430\\u043F\\u043A\\u0438 \\u0432 \\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0430\\u0445\"}):folders.map(f=>{const inFolder=(f.chatIds||[]).includes(chat.id);return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",style:{display:'block',width:'100%',padding:'8px 10px',border:'none',background:inFolder?'rgba(0,136,204,.15)':'transparent',color:theme.text,borderRadius:8,cursor:'pointer',textAlign:'left',fontSize:14},onClick:()=>{if(inFolder)removeChatFromFolder(f.id,chat.id);else addChatToFolder(f.id,chat.id);setFoldersRefresh(k=>k+1);},children:[inFolder?'✓ ':'',f.name]},f.id);})]})]},chat.id);})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"aria-label\":\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",onClick:()=>setNewChatOpen(true),style:{position:'absolute',bottom:20,right:16,width:54,height:54,borderRadius:27,border:'none',background:theme.accent,color:'#fff',boxShadow:'0 2px 12px rgba(0,0,0,.35)',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(IconPen,{width:24,height:24})})]}),/*#__PURE__*/_jsx(\"div\",{style:s.mainArea,children:selectedChat?/*#__PURE__*/_jsx(ChatView,{chat:selectedChat,onBack:()=>setSelectedChat(null)}):/*#__PURE__*/_jsxs(\"div\",{style:s.empty,children:[/*#__PURE__*/_jsx(\"div\",{style:s.emptyIconWrap,children:/*#__PURE__*/_jsx(IconPen,{width:36,height:36,style:{color:theme.textMuted}})}),/*#__PURE__*/_jsx(\"div\",{style:s.emptyTitle,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0447\\u0430\\u0442\"}),/*#__PURE__*/_jsx(\"div\",{style:s.emptySub,children:\"\\u0418\\u043B\\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\u0441 \\u0440\\u0443\\u0447\\u043A\\u043E\\u0439 \\u0432\\u044B\\u0448\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043D\\u0430\\u0447\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0434\\u0438\\u0430\\u043B\\u043E\\u0433\"}),/*#__PURE__*/_jsx(\"div\",{style:s.emptyTagline,children:\"AIST \\u2014 \\u0443\\u0434\\u043E\\u0431\\u043D\\u044B\\u0439, \\u043A\\u043E\\u043C\\u0444\\u043E\\u0440\\u0442\\u043D\\u044B\\u0439 \\u0438 \\u0431\\u0435\\u0437\\u043E\\u043F\\u0430\\u0441\\u043D\\u044B\\u0439 \\u043C\\u0435\\u0441\\u0441\\u0435\\u043D\\u0434\\u0436\\u0435\\u0440\"})]})})]});}","map":{"version":3,"names":["React","useState","useMemo","useEffect","useCallback","useRef","useNavigate","useLocation","useTheme","useUser","IconBack","IconSearch","IconPen","IconChannel","IconChevronRight","IconPhone","IconVideo","IconAttach","CallScreen","getChatList","saveChatList","getMessages","appendMessage","saveMessages","addOrUpdateChat","createChat","getChannelMeta","saveChannelMeta","apiGetChats","apiGetMessages","apiSendMessage","apiCreateChat","getFolders","addChatToFolder","removeChatFromFolder","getChatFolderIds","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","APP_DOMAIN","FOLDER_ALL","ChatView","_ref","chat","onBack","theme","chatBg","displayName","messages","setMessages","inputValue","setInputValue","attachPreview","setAttachPreview","callMode","setCallMode","showChannelInfo","setShowChannelInfo","isMobile","window","matchMedia","matches","messagesAreaBg","isDark","messagesAreaPattern","channelMeta","type","id","channelLink","shareLink","concat","cancelled","fromApi","Array","isArray","merged","sendMessage","textOrAttachment","isAttach","text","caption","trim","attachment","localId","Date","now","Math","random","toString","slice","localMsg","fromMe","time","toISOString","senderName","url","undefined","next","_objectSpread","lastMessage","lastTime","list","idx","findIndex","m","updated","MAX_FILE_MB","ALLOWED_IMAGE","ALLOWED_VIDEO","onAttach","e","_e$target$files","f","target","files","sizeMB","size","includes","r","FileReader","onload","result","readAsDataURL","bubbleIn","bubbleOut","accent","bubbleStyleIn","padding","borderRadius","background","color","fontSize","lineHeight","maxWidth","boxShadow","backdropFilter","bubbleStyleOut","accentText","formatDateKey","t","toDateString","messagesWithDates","out","lastDate","forEach","d","push","key","date","style","display","flexDirection","height","children","alignItems","gap","headerBg","borderBottom","border","cursor","justifyContent","transition","onClick","width","flex","textAlign","minWidth","fontWeight","letterSpacing","name","textMuted","role","position","inset","zIndex","cardBg","stopPropagation","marginBottom","description","whiteSpace","readOnly","value","inputBg","_navigator$clipboard","navigator","clipboard","writeText","marginTop","sidebarBg","peerName","isVideo","onEnd","peerUserId","otherUserId","overflowY","backgroundImage","length","map","item","_m$attachment","label","toLocaleDateString","day","month","year","alignSelf","margin","timeStr","toLocaleTimeString","hour","minute","overflow","src","alt","maxHeight","controls","opacity","borderTop","top","right","flexShrink","accept","onChange","outline","placeholder","onKeyDown","shiftKey","preventDefault","minHeight","Chats","_location$state2","navigate","location","chatList","setChatList","selectedChat","setSelectedChat","searchQuery","setSearchQuery","newChatOpen","setNewChatOpen","activeFolderId","setActiveFolderId","foldersRefresh","setFoldersRefresh","folderMenuChatId","setFolderMenuChatId","folderMenuRef","folders","onDocClick","_folderMenuRef$curren","current","contains","closest","document","addEventListener","removeEventListener","_location$state","state","openChatId","c","find","ch","replace","refreshList","_unused","onVisible","filteredChats","q","toLowerCase","filter","username","chatsByFolder","_folder$chatIds","folder","chatIds","createNewChat","prompt","peerUsername","created","unread","alert","showListOnly","s","container","pageBg","header","headerTitle","search","searchInput","searchWrap","searchIcon","left","transform","pointerEvents","sidebar","borderRight","overflowX","chatItem","chatItemActive","avatar","chatInfo","chatName","textOverflow","lastMsg","chatMeta","chatTime","unreadBadge","mainArea","empty","emptyIconWrap","emptyTitle","emptySub","emptyTagline","marginLeft","className","_chat$name","_chat$name$","tabIndex","onMouseEnter","currentTarget","onMouseLeave","photo","objectFit","toUpperCase","getTime","weekday","ref","inFolder","k","bottom"],"sources":["C:/Users/Vladislav/Documents/GitHub/aist-messenger/src/components/Chats.jsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useTheme } from '../context/ThemeContext';\r\nimport { useUser } from '../context/UserContext';\r\nimport { IconBack, IconSearch, IconPen, IconChannel, IconChevronRight, IconPhone, IconVideo, IconAttach } from './Icons';\r\nimport CallScreen from './CallScreen';\r\nimport {\r\n  getChatList,\r\n  saveChatList,\r\n  getMessages,\r\n  appendMessage,\r\n  saveMessages,\r\n  addOrUpdateChat,\r\n  createChat,\r\n  getChannelMeta,\r\n  saveChannelMeta,\r\n} from '../lib/chatStorage';\r\nimport { apiGetChats, apiGetMessages, apiSendMessage, apiCreateChat } from '../lib/api';\r\nimport { getFolders, addChatToFolder, removeChatFromFolder, getChatFolderIds } from '../lib/folderStorage';\r\n\r\nconst APP_DOMAIN = 'https://aist-messenger.vercel.app';\r\nconst FOLDER_ALL = 'all';\r\n\r\nfunction ChatView({ chat, onBack }) {\r\n  const { theme, chatBg } = useTheme();\r\n  const { displayName } = useUser();\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [attachPreview, setAttachPreview] = useState(null);\r\n  const [callMode, setCallMode] = useState(null);\r\n  const [showChannelInfo, setShowChannelInfo] = useState(false);\r\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\r\n  const messagesAreaBg = chatBg || (theme.isDark\r\n    ? '#0f1419'\r\n    : '#e6ebee');\r\n  const messagesAreaPattern = theme.isDark\r\n    ? 'radial-gradient(circle at 1px 1px, rgba(255,255,255,.035) 1px, transparent 0); background-size: 28px 28px'\r\n    : 'radial-gradient(circle at 1px 1px, rgba(0,0,0,.035) 1px, transparent 0); background-size: 28px 28px';\r\n  const channelMeta = chat.type === 'channel' ? getChannelMeta(chat.id) : null;\r\n  const channelLink = channelMeta?.shareLink || `${APP_DOMAIN}/c/${chat.id}`;\r\n\r\n  // Локальное хранение: сначала показываем с устройства, затем синхронизируем с сервером при открытии\r\n  useEffect(() => {\r\n    setMessages(getMessages(chat.id));\r\n    let cancelled = false;\r\n    (async () => {\r\n      const fromApi = await apiGetMessages(chat.id);\r\n      if (cancelled) return;\r\n      if (Array.isArray(fromApi)) {\r\n        const merged = saveMessages(chat.id, fromApi);\r\n        setMessages(merged);\r\n      }\r\n    })();\r\n    return () => { cancelled = true; };\r\n  }, [chat.id]);\r\n\r\n  const sendMessage = useCallback(async (textOrAttachment) => {\r\n    const isAttach = typeof textOrAttachment === 'object';\r\n    const text = isAttach ? textOrAttachment.caption || '' : (textOrAttachment || '').trim();\r\n    const attachment = isAttach ? textOrAttachment : null;\r\n    if (!text && !attachment) return;\r\n    const localId = `m_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;\r\n    const localMsg = {\r\n      id: localId,\r\n      fromMe: true,\r\n      text: text || (attachment ? (attachment.type === 'image' ? 'Фото' : 'Видео') : ''),\r\n      time: new Date().toISOString(),\r\n      senderName: displayName || 'Вы',\r\n      attachment: attachment ? { type: attachment.type, url: attachment.url } : undefined,\r\n    };\r\n    // Сначала сохраняем на устройстве и сразу показываем\r\n    const next = appendMessage(chat.id, localMsg);\r\n    setMessages(next);\r\n    setInputValue('');\r\n    setAttachPreview(null);\r\n    addOrUpdateChat({ ...chat, lastMessage: text || 'Медиа', lastTime: Date.now() });\r\n    // Затем отправляем на сервер для синхронизации с другими устройствами\r\n    const fromApi = await apiSendMessage(chat.id, {\r\n      text: localMsg.text,\r\n      attachment: attachment ? { type: attachment.type, url: attachment.url } : null,\r\n    });\r\n    if (fromApi && fromApi.id !== localId) {\r\n      const list = getMessages(chat.id);\r\n      const idx = list.findIndex((m) => m.id === localId);\r\n      if (idx >= 0) {\r\n        const updated = [...list];\r\n        updated[idx] = { ...list[idx], id: fromApi.id, time: fromApi.time || list[idx].time };\r\n        saveMessages(chat.id, updated);\r\n        setMessages(updated);\r\n      }\r\n    }\r\n  }, [chat, displayName]);\r\n\r\n  const MAX_FILE_MB = 16;\r\n  const ALLOWED_IMAGE = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\n  const ALLOWED_VIDEO = ['video/mp4', 'video/webm'];\r\n  const onAttach = (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    const sizeMB = f.size / (1024 * 1024);\r\n    if (sizeMB > MAX_FILE_MB) return;\r\n    if (ALLOWED_IMAGE.includes(f.type)) {\r\n      const r = new FileReader();\r\n      r.onload = () => setAttachPreview({ type: 'image', url: r.result });\r\n      r.readAsDataURL(f);\r\n    } else if (ALLOWED_VIDEO.includes(f.type)) {\r\n      const r = new FileReader();\r\n      r.onload = () => setAttachPreview({ type: 'video', url: r.result });\r\n      r.readAsDataURL(f);\r\n    }\r\n  };\r\n\r\n  const bubbleIn = theme.bubbleIn || (theme.isDark ? '#182533' : '#ffffff');\r\n  const bubbleOut = theme.bubbleOut || theme.accent;\r\n  const bubbleStyleIn = {\r\n    padding: '10px 14px 8px 14px',\r\n    borderRadius: '18px 18px 18px 6px',\r\n    background: bubbleIn,\r\n    color: theme.text,\r\n    fontSize: 15,\r\n    lineHeight: 1.4,\r\n    maxWidth: '100%',\r\n    boxShadow: theme.isDark ? '0 1px 2px rgba(0,0,0,0.3)' : '0 1px 2px rgba(0,0,0,0.1)',\r\n    backdropFilter: 'blur(10px)',\r\n  };\r\n  const bubbleStyleOut = {\r\n    ...bubbleStyleIn,\r\n    borderRadius: '18px 18px 6px 18px',\r\n    background: bubbleOut,\r\n    color: theme.accentText || '#fff',\r\n    boxShadow: '0 2px 8px rgba(0,136,204,0.3)',\r\n  };\r\n\r\n  const formatDateKey = (t) => new Date(t).toDateString();\r\n  const messagesWithDates = useMemo(() => {\r\n    const out = [];\r\n    let lastDate = null;\r\n    messages.forEach((m) => {\r\n      const d = formatDateKey(m.time);\r\n      if (d !== lastDate) {\r\n        lastDate = d;\r\n        out.push({ type: 'date', key: `date-${d}`, date: m.time });\r\n      }\r\n      out.push(m);\r\n    });\r\n    return out;\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\r\n      <header style={{ height: 58, padding: '0 12px 0 4px', display: 'flex', alignItems: 'center', gap: 8, background: theme.headerBg, backdropFilter: 'blur(20px)', borderBottom: `1px solid ${theme.border || 'rgba(255,255,255,0.08)'}` }}>\r\n        <button type=\"button\" style={{ border: 'none', background: 'transparent', color: theme.accent, padding: 12, cursor: 'pointer', display: isMobile ? 'flex' : 'none', alignItems: 'center', justifyContent: 'center', borderRadius: 8, transition: 'background 0.15s ease' }} onClick={onBack} aria-label=\"Назад\">\r\n          <IconBack width={24} height={24} />\r\n        </button>\r\n        <button type=\"button\" onClick={() => chat.type === 'channel' && setShowChannelInfo(true)} style={{ flex: 1, border: 'none', background: 'transparent', padding: '10px 6px', cursor: chat.type === 'channel' ? 'pointer' : 'default', textAlign: 'left', minWidth: 0, borderRadius: 8, transition: 'background 0.15s ease' }}>\r\n          <span style={{ fontWeight: 700, fontSize: 17, color: theme.text, display: 'block', letterSpacing: '-0.3px' }}>{chat.name}</span>\r\n          {chat.type !== 'channel' && <span style={{ fontSize: 13, color: theme.textMuted, fontWeight: 500 }}>был(а) недавно</span>}\r\n        </button>\r\n        {chat.type !== 'channel' && (\r\n          <>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 12, color: theme.textMuted, cursor: 'pointer', borderRadius: 8, transition: 'all 0.15s ease' }} aria-label=\"Голосовой звонок\" onClick={() => setCallMode('voice')}><IconPhone width={22} height={22} /></button>\r\n            <button type=\"button\" style={{ border: 'none', background: 'transparent', padding: 12, color: theme.textMuted, cursor: 'pointer', borderRadius: 8, transition: 'all 0.15s ease' }} aria-label=\"Видеозвонок\" onClick={() => setCallMode('video')}><IconVideo width={22} height={22} /></button>\r\n          </>\r\n        )}\r\n      </header>\r\n      {showChannelInfo && channelMeta && (\r\n        <div\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-label=\"Информация о канале\"\r\n          style={{ position: 'fixed', inset: 0, zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: 16, background: 'rgba(0,0,0,.5)' }}\r\n          onClick={() => setShowChannelInfo(false)}\r\n        >\r\n          <div style={{ background: theme.cardBg, borderRadius: 16, padding: 20, maxWidth: 360, width: '100%', border: `1px solid ${theme.border}`, boxShadow: '0 8px 32px rgba(0,0,0,.2)' }} onClick={(e) => e.stopPropagation()}>\r\n            <div style={{ fontSize: 18, fontWeight: 600, marginBottom: 12, color: theme.text }}>{chat.name}</div>\r\n            {channelMeta.description ? <p style={{ fontSize: 14, color: theme.textMuted, marginBottom: 12, whiteSpace: 'pre-wrap' }}>{channelMeta.description}</p> : null}\r\n            <div style={{ fontSize: 13, color: theme.textMuted, marginBottom: 8 }}>Ссылка на канал:</div>\r\n            <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\r\n              <input readOnly value={channelLink} style={{ flex: 1, padding: '8px 12px', borderRadius: 8, border: `1px solid ${theme.border}`, background: theme.inputBg, color: theme.text, fontSize: 13 }} />\r\n              <button type=\"button\" onClick={() => { navigator.clipboard?.writeText(channelLink); }} style={{ padding: '8px 16px', borderRadius: 8, border: 'none', background: theme.accent, color: theme.accentText, cursor: 'pointer', fontSize: 14 }}>Копировать</button>\r\n            </div>\r\n            <button type=\"button\" onClick={() => setShowChannelInfo(false)} style={{ marginTop: 16, width: '100%', padding: 10, borderRadius: 8, border: 'none', background: theme.sidebarBg, color: theme.text, cursor: 'pointer' }}>Закрыть</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {callMode && (\r\n        <CallScreen peerName={chat.name} isVideo={callMode === 'video'} onEnd={() => setCallMode(null)} peerUserId={chat.peerUserId || chat.otherUserId} />\r\n      )}\r\n      <div style={{ flex: 1, overflowY: 'auto', padding: '10px 16px 16px', display: 'flex', flexDirection: 'column', gap: 4, background: messagesAreaBg, backgroundImage: messagesAreaPattern }}>\r\n        {messages.length === 0 && (\r\n          <div style={{ color: theme.textMuted, fontSize: 14, textAlign: 'center', padding: 40 }}>Нет сообщений</div>\r\n        )}\r\n        {messagesWithDates.map((item) => {\r\n          if (item.type === 'date') {\r\n            const label = new Date(item.date).toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });\r\n            return (\r\n              <div key={item.key} style={{ alignSelf: 'center', margin: '16px 0 8px', padding: '6px 16px', borderRadius: 12, background: theme.isDark ? 'rgba(255,255,255,.08)' : 'rgba(0,0,0,.06)', fontSize: 13, color: theme.textMuted, fontWeight: 600, backdropFilter: 'blur(10px)' }}>\r\n                {label}\r\n              </div>\r\n            );\r\n          }\r\n          const m = item;\r\n          const timeStr = new Date(m.time).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n          return (\r\n            <div key={m.id} style={{ alignSelf: m.fromMe ? 'flex-end' : 'flex-start', maxWidth: '82%', display: 'flex', flexDirection: 'column', alignItems: m.fromMe ? 'flex-end' : 'flex-start' }}>\r\n              {m.attachment?.url && (\r\n                <div style={{ marginBottom: 2, borderRadius: 12, overflow: 'hidden', boxShadow: '0 1px 3px rgba(0,0,0,.2)' }}>\r\n                  {m.attachment.type === 'image' ? (\r\n                    <img src={m.attachment.url} alt=\"\" style={{ maxWidth: 260, maxHeight: 260, display: 'block' }} />\r\n                  ) : (\r\n                    <video src={m.attachment.url} controls style={{ maxWidth: 260, maxHeight: 180 }} />\r\n                  )}\r\n                </div>\r\n              )}\r\n              <div style={m.fromMe ? bubbleStyleOut : bubbleStyleIn}>\r\n                {m.text ? <span style={{ display: 'block', marginBottom: 2 }}>{m.text}</span> : null}\r\n                <div style={{ fontSize: 11, opacity: 0.8 }}>{timeStr}</div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {attachPreview && (\r\n        <div style={{ padding: 8, borderTop: `1px solid ${theme.border}`, background: theme.headerBg }}>\r\n          <div style={{ position: 'relative', display: 'inline-block' }}>\r\n            {attachPreview.type === 'image' ? <img src={attachPreview.url} alt=\"\" style={{ maxHeight: 120, borderRadius: 8 }} /> : <video src={attachPreview.url} style={{ maxHeight: 120, borderRadius: 8 }} />}\r\n            <button type=\"button\" onClick={() => setAttachPreview(null)} style={{ position: 'absolute', top: 4, right: 4, border: 'none', background: 'rgba(0,0,0,.5)', color: '#fff', borderRadius: 4, padding: 4 }}>×</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div style={{ padding: '12px 16px', borderTop: `1px solid ${theme.border || 'rgba(255,255,255,0.08)'}`, background: theme.headerBg, backdropFilter: 'blur(20px)', display: 'flex', gap: 12, alignItems: 'center' }}>\r\n        <label style={{ cursor: 'pointer', color: theme.textMuted, padding: 10, flexShrink: 0, borderRadius: 10, transition: 'all 0.15s ease' }} aria-label=\"Прикрепить файл\">\r\n          <input type=\"file\" accept=\"image/*,video/*,.pdf,.doc,.docx\" style={{ display: 'none' }} onChange={onAttach} />\r\n          <IconAttach width={24} height={24} />\r\n        </label>\r\n        <input\r\n          style={{ flex: 1, minWidth: 0, padding: '12px 18px', borderRadius: 22, border: 'none', background: theme.inputBg, color: theme.text, fontSize: 15, outline: 'none', transition: 'all 0.2s ease' }}\r\n          placeholder=\"Сообщение\"\r\n          value={inputValue}\r\n          onChange={(e) => setInputValue(e.target.value)}\r\n          onKeyDown={(e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); if (attachPreview) sendMessage({ ...attachPreview, caption: inputValue }); else sendMessage(inputValue); } }}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => attachPreview ? sendMessage({ ...attachPreview, caption: inputValue }) : sendMessage(inputValue)}\r\n          style={{\r\n            width: 48,\r\n            height: 48,\r\n            minWidth: 48,\r\n            minHeight: 48,\r\n            flexShrink: 0,\r\n            padding: 0,\r\n            borderRadius: '50%',\r\n            border: 'none',\r\n            background: theme.accent,\r\n            color: theme.accentText || '#fff',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: 18,\r\n            boxShadow: '0 2px 10px rgba(0,136,204,0.35)',\r\n            transition: 'all 0.2s ease',\r\n          }}\r\n          aria-label=\"Отправить\"\r\n        >\r\n          ➤\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Chats() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { theme } = useTheme();\r\n  const [chatList, setChatList] = useState(getChatList);\r\n  const [selectedChat, setSelectedChat] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [newChatOpen, setNewChatOpen] = useState(false);\r\n  const [activeFolderId, setActiveFolderId] = useState(FOLDER_ALL);\r\n  const [foldersRefresh, setFoldersRefresh] = useState(0);\r\n  const [folderMenuChatId, setFolderMenuChatId] = useState(null);\r\n  const folderMenuRef = useRef(null);\r\n  const folders = useMemo(() => getFolders(), [foldersRefresh]);\r\n\r\n  useEffect(() => {\r\n    if (!folderMenuChatId) return;\r\n    const onDocClick = (e) => {\r\n      if (folderMenuRef.current?.contains(e.target) || e.target.closest('[data-folder-trigger]')) return;\r\n      setFolderMenuChatId(null);\r\n    };\r\n    document.addEventListener('click', onDocClick);\r\n    return () => document.removeEventListener('click', onDocClick);\r\n  }, [folderMenuChatId]);\r\n\r\n  useEffect(() => {\r\n    const id = location.state?.openChatId;\r\n    if (id) {\r\n      const c = getChatList().find((ch) => ch.id === id);\r\n      if (c) setSelectedChat(c);\r\n      navigate('/messenger', { replace: true, state: {} });\r\n    }\r\n  }, [location.state?.openChatId, navigate]);\r\n\r\n  const refreshList = useCallback(async () => {\r\n    const fromApi = await apiGetChats();\r\n    if (Array.isArray(fromApi) && fromApi.length >= 0) {\r\n      try {\r\n        saveChatList(fromApi);\r\n      } catch {}\r\n      setChatList(fromApi);\r\n      return;\r\n    }\r\n    setChatList(getChatList());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    refreshList();\r\n  }, [refreshList]);\r\n\r\n  // Синхронизация при возврате на вкладку (другое устройство могло отправить сообщения)\r\n  useEffect(() => {\r\n    const onVisible = () => refreshList();\r\n    document.addEventListener('visibilitychange', onVisible);\r\n    return () => document.removeEventListener('visibilitychange', onVisible);\r\n  }, [refreshList]);\r\n\r\n  const filteredChats = useMemo(() => {\r\n    const q = searchQuery.trim().toLowerCase().replace(/^@/, '');\r\n    if (!q) return chatList;\r\n    return chatList.filter((c) => (c.name && c.name.toLowerCase().includes(q)) || (c.username && c.username.toLowerCase().includes(q)));\r\n  }, [chatList, searchQuery]);\r\n\r\n  const chatsByFolder = useMemo(() => {\r\n    if (activeFolderId === FOLDER_ALL) return filteredChats;\r\n    const folder = folders.find((f) => f.id === activeFolderId);\r\n    if (!folder?.chatIds?.length) return [];\r\n    return filteredChats.filter((c) => folder.chatIds.includes(c.id));\r\n  }, [activeFolderId, filteredChats, folders]);\r\n\r\n  const createNewChat = async (type) => {\r\n    if (type === 'channel') {\r\n      setNewChatOpen(false);\r\n      navigate('/messenger/new-channel');\r\n      return;\r\n    }\r\n    if (type === 'group') {\r\n      setNewChatOpen(false);\r\n      navigate('/messenger/new-group');\r\n      return;\r\n    }\r\n    const name = window.prompt('Введите ник @ или имя пользователя');\r\n    if (!name?.trim()) return;\r\n    const peerUsername = name.trim().replace(/^@/, '');\r\n    const created = await apiCreateChat({ name: name.trim(), type: 'user', peerUsername });\r\n    if (created?.id) {\r\n      addOrUpdateChat({ id: created.id, name: created.name || name.trim(), type: 'user', lastMessage: '', lastTime: null, unread: 0, peerUserId: created.peerUserId });\r\n      await refreshList();\r\n      setSelectedChat(created);\r\n      setNewChatOpen(false);\r\n    } else {\r\n      window.alert('Пользователь с таким ником не найден. Убедитесь, что он зарегистрирован в AIST и указал никнейм в настройках.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!selectedChat) refreshList();\r\n  }, [selectedChat, refreshList]);\r\n\r\n  const isMobile = typeof window !== 'undefined' && window.matchMedia('(max-width: 768px)').matches;\r\n  const showListOnly = isMobile && selectedChat;\r\n\r\n  // Двухколоночный макет: слева — только список чатов, справа — окно чата (как в Telegram Desktop)\r\n  const s = {\r\n    container: { display: 'flex', flexDirection: 'row', height: '100%', minHeight: 0, background: theme.pageBg },\r\n    header: { height: 56, padding: '0 16px', display: 'flex', alignItems: 'center', justifyContent: 'space-between', background: theme.headerBg, backdropFilter: 'blur(20px)', borderBottom: `1px solid ${theme.border || 'rgba(255,255,255,0.08)'}` },\r\n    headerTitle: { fontSize: 22, fontWeight: 700, color: theme.text, letterSpacing: '-0.5px' },\r\n    search: { padding: '8px 16px 12px' },\r\n    searchInput: { width: '100%', padding: '12px 16px 12px 44px', borderRadius: 22, border: 'none', background: theme.inputBg, color: theme.text, fontSize: 15, outline: 'none', transition: 'all 0.2s ease' },\r\n    searchWrap: { position: 'relative' },\r\n    searchIcon: { position: 'absolute', left: 16, top: '50%', transform: 'translateY(-50%)', color: theme.textMuted, pointerEvents: 'none' },\r\n    sidebar: { width: 380, minWidth: 300, maxWidth: 450, flexShrink: 0, background: theme.sidebarBg, display: 'flex', flexDirection: 'column', overflow: 'hidden', position: 'relative', borderRight: `1px solid ${theme.border || 'rgba(255,255,255,0.08)'}` },\r\n    chatList: { flex: 1, overflowY: 'auto', overflowX: 'hidden' },\r\n    chatItem: { padding: '12px 14px', display: 'flex', alignItems: 'center', gap: 12, cursor: 'pointer', transition: 'all 0.15s ease', borderBottom: theme.border ? `1px solid ${theme.border}` : 'none' },\r\n    chatItemActive: { background: theme.isDark ? 'rgba(255,255,255,0.08)' : 'rgba(0,0,0,0.04)' },\r\n    avatar: { width: 56, height: 56, borderRadius: '50%', background: `linear-gradient(135deg, ${theme.accent}, ${theme.accent}dd)`, color: theme.accentText, display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 22, fontWeight: 600, flexShrink: 0, boxShadow: '0 2px 8px rgba(0,0,0,0.15)' },\r\n    chatInfo: { flex: 1, minWidth: 0 },\r\n    chatName: { fontSize: 16, fontWeight: 600, color: theme.text, marginBottom: 3, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', letterSpacing: '-0.2px' },\r\n    lastMsg: { fontSize: 14, color: theme.textMuted, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', lineHeight: 1.3 },\r\n    chatMeta: { flexShrink: 0, display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: 4 },\r\n    chatTime: { fontSize: 12, color: theme.textMuted, fontWeight: 500 },\r\n    unreadBadge: { minWidth: 20, height: 20, borderRadius: 10, background: theme.accent, color: theme.accentText || '#fff', fontSize: 11, fontWeight: 600, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '0 6px', boxShadow: '0 2px 6px rgba(0,136,204,0.3)' },\r\n    mainArea: { flex: 1, display: 'flex', flexDirection: 'column', minWidth: 0, minHeight: 0, background: theme.cardBg, transition: 'opacity 0.2s ease' },\r\n    empty: { flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', padding: 48, textAlign: 'center' },\r\n    emptyIconWrap: { width: 100, height: 100, borderRadius: 50, background: `linear-gradient(135deg, ${theme.accent}22, ${theme.accent}11)`, display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: 24, backdropFilter: 'blur(10px)' },\r\n    emptyTitle: { fontSize: 24, fontWeight: 700, color: theme.text, marginBottom: 12 },\r\n    emptySub: { fontSize: 16, lineHeight: 1.6, color: theme.textMuted, maxWidth: 280 },\r\n    emptyTagline: { fontSize: 14, color: theme.textMuted, marginTop: 32, opacity: 0.7 },\r\n  };\r\n\r\n  if (newChatOpen) {\r\n    return (\r\n      <div style={{ ...s.container, flexDirection: 'column', width: '100%' }}>\r\n        <header style={s.header}>\r\n          <button type=\"button\" style={{ border: 'none', background: 'transparent', color: theme.accent, padding: 8 }} onClick={() => setNewChatOpen(false)}>\r\n            <IconBack width={24} height={24} />\r\n          </button>\r\n          <span style={s.headerTitle}>Новое сообщение</span>\r\n          <span style={{ width: 40 }} />\r\n        </header>\r\n        <div style={s.search}>\r\n          <div style={s.searchWrap}>\r\n            <span style={s.searchIcon}><IconSearch width={20} height={20} /></span>\r\n            <input type=\"text\" style={s.searchInput} placeholder=\"Поиск по нику или имени\" />\r\n          </div>\r\n        </div>\r\n        <div style={{ flex: 1, overflowY: 'auto' }}>\r\n          <div style={{ ...s.chatItem, flexDirection: 'column', alignItems: 'flex-start' }} onClick={() => createNewChat('group')}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, width: '100%' }}>\r\n              <div style={{ ...s.avatar, background: theme.sidebarBg, color: theme.text, fontSize: 24 }}>👥</div>\r\n              <div><div style={s.chatName}>Создать группу</div><div style={s.lastMsg}>Общий чат с несколькими участниками</div></div>\r\n              <IconChevronRight width={20} height={20} style={{ marginLeft: 'auto', color: theme.textMuted }} />\r\n            </div>\r\n          </div>\r\n          <div style={{ ...s.chatItem, flexDirection: 'column', alignItems: 'flex-start' }} onClick={() => createNewChat('channel')}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, width: '100%' }}>\r\n              <div style={{ ...s.avatar, background: theme.sidebarBg, color: theme.text }}><IconChannel width={24} height={24} /></div>\r\n              <div><div style={s.chatName}>Создать канал</div><div style={s.lastMsg}>Публикация новостей для подписчиков</div></div>\r\n              <IconChevronRight width={20} height={20} style={{ marginLeft: 'auto', color: theme.textMuted }} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={s.container}>\r\n      <div style={{ ...s.sidebar, display: showListOnly ? 'none' : 'flex', ...(isMobile ? { width: '100%', maxWidth: '100%' } : {}) }}>\r\n        <header style={s.header}>\r\n          <span style={s.headerTitle}>Чаты</span>\r\n          <button type=\"button\" style={{ border: 'none', background: 'transparent', color: theme.accent, padding: 8 }} onClick={() => setNewChatOpen(true)} aria-label=\"Новое сообщение\">\r\n            <IconPen width={24} height={24} />\r\n          </button>\r\n        </header>\r\n        <div style={s.search}>\r\n          <div style={s.searchWrap}>\r\n            <span style={s.searchIcon}><IconSearch width={20} height={20} /></span>\r\n            <input type=\"text\" style={s.searchInput} placeholder=\"Поиск\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div style={{ padding: '6px 12px 10px', display: 'flex', gap: 6, overflowX: 'auto', flexShrink: 0 }}>\r\n          <button type=\"button\" style={{ padding: '6px 14px', borderRadius: 18, border: 'none', background: activeFolderId === FOLDER_ALL ? theme.accent : 'rgba(255,255,255,.08)', color: activeFolderId === FOLDER_ALL ? '#fff' : theme.textMuted, fontSize: 13, fontWeight: 500, cursor: 'pointer', whiteSpace: 'nowrap' }} onClick={() => { setFolderMenuChatId(null); setActiveFolderId(FOLDER_ALL); }}>Все чаты</button>\r\n          {folders.map((f) => (\r\n            <button key={f.id} type=\"button\" style={{ padding: '6px 14px', borderRadius: 18, border: 'none', background: activeFolderId === f.id ? theme.accent : 'rgba(255,255,255,.08)', color: activeFolderId === f.id ? '#fff' : theme.textMuted, fontSize: 13, fontWeight: 500, cursor: 'pointer', whiteSpace: 'nowrap' }} onClick={() => { setFolderMenuChatId(null); setActiveFolderId(f.id); }}>{f.name}</button>\r\n          ))}\r\n        </div>\r\n        <div className=\"scrollable\" style={s.chatList}>\r\n          {chatsByFolder.length === 0 && (\r\n            <div style={{ padding: 24, textAlign: 'center', color: theme.textMuted, fontSize: 15 }}>Нет чатов в этой папке</div>\r\n          )}\r\n          {chatsByFolder.map((chat) => (\r\n            <div\r\n              key={chat.id}\r\n              role=\"button\"\r\n              tabIndex={0}\r\n              onClick={() => { setFolderMenuChatId(null); setSelectedChat(chat); }}\r\n              onKeyDown={(e) => e.key === 'Enter' && setSelectedChat(chat)}\r\n              onMouseEnter={(e) => { if (selectedChat?.id !== chat.id) e.currentTarget.style.background = theme.isDark ? 'rgba(255,255,255,.04)' : 'rgba(0,0,0,.03)'; }}\r\n              onMouseLeave={(e) => { if (selectedChat?.id !== chat.id) e.currentTarget.style.background = 'transparent'; }}\r\n              style={{ ...s.chatItem, ...(selectedChat?.id === chat.id ? s.chatItemActive : {}), position: 'relative' }}\r\n            >\r\n              <div style={s.avatar}>{chat.photo ? <img src={chat.photo} alt=\"\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} /> : (chat.type === 'channel' ? <IconChannel width={22} height={22} /> : (chat.name?.[0]?.toUpperCase() || '?'))}</div>\r\n              <div style={s.chatInfo}>\r\n                <div style={s.chatName}>{chat.name}</div>\r\n                <div style={{ ...s.lastMsg, ...(chat.unread > 0 ? { fontWeight: 500, color: theme.text } : {}) }}>{chat.lastMessage || (chat.type === 'channel' ? 'Канал' : 'Нет сообщений')}</div>\r\n              </div>\r\n              <div style={s.chatMeta}>\r\n                <span style={s.chatTime}>\r\n                  {chat.lastTime\r\n                    ? (() => {\r\n                        const d = new Date(chat.lastTime);\r\n                        const now = new Date();\r\n                        if (d.toDateString() === now.toDateString()) return d.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n                        if (d.getTime() > now.getTime() - 7 * 86400000) return d.toLocaleDateString('ru-RU', { weekday: 'short' });\r\n                        return d.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' });\r\n                      })()\r\n                    : ''}\r\n                </span>\r\n                {chat.unread > 0 && <span style={s.unreadBadge}>{chat.unread > 99 ? '99+' : chat.unread}</span>}\r\n              </div>\r\n              <button type=\"button\" data-folder-trigger aria-label=\"Папки\" style={{ border: 'none', background: 'transparent', color: theme.textMuted, padding: 6, borderRadius: 8, cursor: 'pointer', flexShrink: 0 }} onClick={(e) => { e.stopPropagation(); setFolderMenuChatId(folderMenuChatId === chat.id ? null : chat.id); }}>⋯</button>\r\n              {folderMenuChatId === chat.id && (\r\n                <div ref={folderMenuRef} style={{ position: 'absolute', right: 8, top: '100%', zIndex: 10, marginTop: 2, padding: 8, borderRadius: 12, background: theme.cardBg || theme.sidebarBg, boxShadow: '0 4px 12px rgba(0,0,0,.2)', minWidth: 180 }} onClick={(e) => e.stopPropagation()}>\r\n                  <div style={{ fontSize: 12, color: theme.textMuted, marginBottom: 6 }}>Добавить в папку</div>\r\n                  {folders.length === 0 ? <div style={{ fontSize: 13, color: theme.textMuted }}>Создайте папки в Настройках</div> : folders.map((f) => {\r\n                    const inFolder = (f.chatIds || []).includes(chat.id);\r\n                    return (\r\n                      <button key={f.id} type=\"button\" style={{ display: 'block', width: '100%', padding: '8px 10px', border: 'none', background: inFolder ? 'rgba(0,136,204,.15)' : 'transparent', color: theme.text, borderRadius: 8, cursor: 'pointer', textAlign: 'left', fontSize: 14 }} onClick={() => { if (inFolder) removeChatFromFolder(f.id, chat.id); else addChatToFolder(f.id, chat.id); setFoldersRefresh((k) => k + 1); }}>\r\n                        {inFolder ? '✓ ' : ''}{f.name}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Новое сообщение\"\r\n          onClick={() => setNewChatOpen(true)}\r\n          style={{\r\n            position: 'absolute',\r\n            bottom: 20,\r\n            right: 16,\r\n            width: 54,\r\n            height: 54,\r\n            borderRadius: 27,\r\n            border: 'none',\r\n            background: theme.accent,\r\n            color: '#fff',\r\n            boxShadow: '0 2px 12px rgba(0,0,0,.35)',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n          }}\r\n        >\r\n          <IconPen width={24} height={24} />\r\n        </button>\r\n      </div>\r\n      <div style={s.mainArea}>\r\n        {selectedChat ? <ChatView chat={selectedChat} onBack={() => setSelectedChat(null)} /> : (\r\n          <div style={s.empty}>\r\n            <div style={s.emptyIconWrap}>\r\n              <IconPen width={36} height={36} style={{ color: theme.textMuted }} />\r\n            </div>\r\n            <div style={s.emptyTitle}>Выберите чат</div>\r\n            <div style={s.emptySub}>Или нажмите кнопку с ручкой выше, чтобы начать новый диалог</div>\r\n            <div style={s.emptyTagline}>AIST — удобный, комфортный и безопасный мессенджер</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}